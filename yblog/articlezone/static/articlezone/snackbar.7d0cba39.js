var _e=Object.defineProperty,ye=Object.defineProperties;var xe=Object.getOwnPropertyDescriptors;var ee=Object.getOwnPropertySymbols;var ve=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var $=(t,e,n)=>e in t?_e(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,c=(t,e)=>{for(var n in e||(e={}))ve.call(e,n)&&$(t,n,e[n]);if(ee)for(var n of ee(e))be.call(e,n)&&$(t,n,e[n]);return t},h=(t,e)=>ye(t,xe(e));var d=(t,e,n)=>($(t,typeof e!="symbol"?e+"":e,n),n);import{N as te,a as m,j as i,b as p,T as _,S as Ce,E as ke,w as Se,e as we,f as Ae,g as Pe,P as T,h as Ee,F as Fe,i as Be,k as ne,l as Ie,D as re,r as A,m as O,I as R,A as Ne,n as De,M as ie,o as U,B as g,p as S,q as L,s as Te,t as Oe,u as Re,C as Ue,v as V,x as ze,y as He,z as Me,G as We,H as $e,J as Le,c as oe,d as ae,K as Ve,L as Ge,O as Je,Q as Xe,U as je,V as Ye,W as P,$ as qe,X as Qe}from"./vendor.95bbe24d.js";function z(){return Math.floor(Math.random()*23333333)}function G(t=""){return{text:t}}function E(t=""){return{children:[G(t)]}}function Ke(t,e,n={}){return{idx:z(),type:"inline",name:t,parameters:e,children:[G("")],hiddens:[],flags:n}}function F(t,e,n={}){return{idx:z(),type:"group",name:t,parameters:e,relation:"separating",children:[E()],hiddens:[],flags:n}}function Ze(t,e,n={}){return{idx:z(),type:"struct",name:t,num_children:1,relation:"separating",parameters:e,children:[le()],hiddens:[],flags:{}}}function et(t,e,n={}){return{idx:z(),type:"support",name:t,parameters:e,children:[G()],hiddens:[],flags:n}}function se(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"}function v(t){return"type"in t}function y(t){return v(t)?t.type:"children"in t?"paragraph":"text"}function Ut(t,e,n){return y(t)==e&&t.name==n}function le(){return F("struct-child",{},{})}function tt(t){return Number(t.slice(0,t.length-3))}function nt(t){return`${t}rem`}function zt(t,e){return nt(tt(t)*e)}function rt(t,e){for(let n=0;n<t.hiddens.length;n++)if(J(t.hiddens[n],e))return n;return-1}function de(t,e){let n={};for(let r in t)n[r]=e(t[r]);return n}function it(t,e,n){return[...t.slice(0,e),n,...t.slice(e+1,t.length)]}function J(t,e){return!v(t)||!v(e)?!1:t.idx==e.idx}function B(t,e){for(let[n,r]of te.descendants(t))if(J(n,e))return r}function Ht(t,e){for(let[n,r]of te.descendants(t))if(v(n)&&`${n.idx}`==`${e}`)return r}function X(t,e){if(t==null)return e;if(e==null)return t;if(typeof e=="string"||typeof e=="number"||typeof e=="boolean")return e;if(typeof t=="string"||typeof t=="number"||typeof t=="boolean")return t;let n={};for(let r in c(c({},t),e))n[r]=X(t[r],e[r]);return n}class ce{constructor(e,n){d(this,"core");d(this,"default_renderers");d(this,"style_renderers");this.core=e,this.default_renderers=n,this.style_renderers={inline:{},group:{},struct:{},support:{}}}get_renderer(e,n=void 0){return n==null?this.default_renderers[e]:this.style_renderers[e][n]||this.default_renderers[e]}update_renderer(e,n,r=void 0){if(r==null){this.default_renderers[n]=e;return}this.style_renderers[n][r]=e}}const ue=m.createContext({});function he(t){return i(ue.Consumer,{children:e=>i(ue.Provider,{value:c(c({},e),t.value),children:t.children})})}class ot extends m.Component{constructor(e){super(e);d(this,"printer");d(this,"core");d(this,"my_refs");this.state={root:F("root",{})},this.printer=e.printer,this.core=this.printer.core,this.my_refs={}}componentDidMount(){let e=this;this.core.add_notificatioon(n=>e.setState({root:n})),this.setState({root:this.core.root})}get_path_id(e){return JSON.stringify(e.map(n=>Number(n)))}get_ref(e,n=!1){let r=this.my_refs[this.get_path_id(e)];if(!(!n&&(r==null||r.current==null)))return r}set_ref(e,n){return this.my_refs[this.get_path_id(e)]=n,e}scroll_to(e){let n=this.get_ref(e);n!=null&&n.current.scrollIntoView({behavior:"smooth",block:"center"})}_sub_component(e){let n=e.element,r=this,o=this._sub_component.bind(this),a=this.printer,s=e.contexts,l=e.now_path,u=y(n);if(u=="text"){let k=a.get_renderer("text"),W=n.text;return p(m.Fragment,{children:[i("span",{style:{display:"hidden"},ref:r.get_ref(l,!0)}),i(k.render_func,{element:n,context:{},children:W})]})}let f=n.children,x;v(n)&&(x=n.name);let M=a.get_renderer(u,x);return p(m.Fragment,{children:[i("span",{style:{display:"hidden"},ref:r.get_ref(l,!0)}),i(M.render_func,{element:n,context:s[this.get_path_id(l)],children:Object.keys(f).map(k=>i(o,{element:f[k],contexts:s,now_path:[...l,k]},k))})]})}build_envs(e,n,r,o){let a=o;if(this.set_ref(a,m.createRef()),!("children"in e))return[n,r];let s=e,l=y(s),u;v(s)&&(u=s.name);let x=this.printer.get_renderer(l,u),[K,M]=x.enter_effect(s,n);n=K;for(let Z in s.children)[n,r]=this.build_envs(s.children[Z],n,r,[...o,Z]);let[k,W]=x.exit_effect(s,n,M);return r[this.get_path_id(a)]=W,[k,r]}render(){let e=this,n=this._sub_component.bind(this);e.my_refs={};let[r,o]=this.build_envs(e.state.root,{},{},[]),a={refs:e.my_refs,root:e.state.root,core:e.core,printer:e.printer,printer_component:e};return i(he,{value:a,children:i(n,{element:e.state.root,contexts:o,now_path:[]})})}}function w(t,e=(r,o)=>[o,{}],n=(r,o,a)=>[o,a]){return{render_func:t,enter_effect:e,exit_effect:n}}class me extends ce{constructor(e){super(e,{text:w(n=>i("span",{children:n.children})),inline:w(n=>i("span",{children:n.children})),paragraph:w(n=>i("span",{children:n.children})),group:w(n=>i("span",{children:n.children})),struct:w(n=>i("span",{children:n.children})),support:w(n=>i("span",{children:n.children}))})}}d(me,"Component",ot);function at(t){const e=t.normalizeNode;return t.normalizeNode=n=>{const[r,o]=n;if(y(r)=="struct"){let a=r;if(a.children.length<a.num_children){let s=[];for(let l=0;l<a.num_children-a.children.length;l++)s.push(le());_.insertNodes(t,s,{at:[...o,a.children.length]});return}if(a.children.length>a.num_children){_.removeNodes(t,{at:[...o,a.children.length-1]});return}for(let s in a.children){let l=a.children[s];if(y(l)!="group"){_.removeNodes(t,{at:[...o,parseInt(s)]});return}}}e(n)},t}function st(t){const e=t.normalizeNode;let n=r=>y(r)=="group"||y(r)=="struct";return t.normalizeNode=r=>{const[o,a]=r;if(a.length-1,"children"in o&&y(o)!="struct"){let s=!1;for(let[l,u]of o.children.entries()){if(!n(u))continue;if(!s){s=!0;continue}s=!0;let f=u;if(l==0)return;let x=o.children[l-1];if(n(x)&&f.relation=="separating"){_.insertNodes(t,E(),{at:[...a,l]});return}if(!n(x)&&f.relation=="chaining"){_.moveNodes(t,{at:[...a,l-1],to:[...a,l]});return}}}e(r)},t}function lt(t){const e=t.isInline;return t.isInline=n=>{if(v(n)){let r=n;if(r.flags.forceInline)return!0;if(r.flags.forceBlock)return!1}return e(n)||y(n)=="inline"},t}function dt(t){const e=t.isVoid;return t.isVoid=n=>v(n)&&n.flags.forceVoid?!0:e(n)||y(n)=="support",t}var ct=[at,st,lt,dt];function ut(t){for(let e of ct)t=e(t);return t}class ht extends m.Component{constructor(e){super(e);d(this,"editor");d(this,"core");d(this,"slate");d(this,"onUpdate");d(this,"onFocusChange");this.editor=e.editor,this.core=this.editor.core,this.slate=this.editor.slate,this.onUpdate=e.onUpdate||(n=>{}),this.onFocusChange=e.onFocusChange||(()=>{})}update_value(e){this.core.update_children(e),this.onUpdate(e)}renderElement(e){let n=this,r=e.element,o=y(r),a;v(r)&&(a=r.name);let s=this.editor.get_renderer(o,a),l=e.attributes,u={element:r,editor:n.editor,children:e.children},f={};return n.editor.slate.isInline(r)&&(f={display:"inline-block"}),i("div",h(c({},l),{style:f,children:i(s,c({},u))}))}renderLeaf(e){let n=this,r=this.editor.get_renderer("text"),o=e.attributes,a={element:e.leaf,editor:n.editor,children:e.children};return i("span",h(c({},o),{children:i(r,c({},a))}))}render(){let e=this,n={editor:e.editor,slate:e.slate,core:e.core};return i(he,{value:n,children:i(Ce,{editor:e.slate,value:[E("")],onChange:r=>{e.update_value(r),e.onFocusChange()},children:i(ke,{renderElement:e.renderElement.bind(e),renderLeaf:e.renderLeaf.bind(e),onClick:r=>{e.onFocusChange()}})})})}}class j extends ce{constructor(e){super(e,{text:n=>i("span",{children:n.children}),inline:n=>i("span",{children:n.children}),paragraph:n=>i("div",{children:n.children}),group:n=>i("div",{children:n.children}),struct:n=>i("div",{children:n.children}),support:n=>i("div",{children:n.children})});d(this,"suboperations");d(this,"slate");this.slate=ut(Se(we(Pe()))),this.suboperations={}}add_suboperation(e,n){this.suboperations[e]=n}apply_all(){let e=this;Object.values(this.suboperations).map(n=>{n(e)}),this.suboperations={}}get_onClick(e,n){let r=this;if(r.core.root,e=="group"||e=="support"||e=="struct"){let o=r.core.get_style(e,n);return o==null?a=>{}:a=>{let s=o.makenode();_.insertNodes(r.slate,s)}}if(e=="inline"){let o=r.core.get_style("inline",n);return o==null?a=>{}:a=>{let s=r.slate.selection,l=!0;s!=null&&(l=JSON.stringify(s.anchor)==JSON.stringify(s.focus));let u=o.makenode();l?_.insertNodes(r.slate,u):_.wrapNodes(r.slate,u,{match:f=>Ae.isText(f),split:!0})}}return o=>{}}}d(j,"Component",ht);class mt{constructor(e,n){d(this,"styles");d(this,"root");d(this,"notifications");this.styles={inline:{},group:{},struct:{},support:{},abstract:{}};for(let r of e)this.add_style(r);this.root=F("root",n),this.notifications=[]}update_children(e){return this.update_root({children:e})}update_root(e){this.root=c(c({},this.root),e);for(let n of this.notifications)n(this.root)}add_notificatioon(e){this.notifications.push(e)}add_style(e){this.styles[e.type][e.name]=e}get_style(e,n){return this.styles[e][n]}}class Mt{constructor(e,n,r={}){d(this,"type","inline");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makenode");this.name=e,this.parameter_prototype=n,this.flags=r,this.makenode=()=>Ke(e,n,r)}}class Wt{constructor(e,n,r={}){d(this,"type","group");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makenode");this.name=e,this.parameter_prototype=n,this.flags=r,this.makenode=()=>F(e,n,r)}}class $t{constructor(e,n,r={}){d(this,"type","struct");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makenode");this.name=e,this.parameter_prototype=n,this.flags=r,this.makenode=()=>Ze(e,n,r)}}class Lt{constructor(e,n,r={}){d(this,"type","support");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makenode");this.name=e,this.parameter_prototype=n,this.flags=r,this.makenode=()=>et(e,n,r)}}class Vt{constructor(e,n){d(this,"type","abstract");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makehidden");this.name=e,this.parameter_prototype=n,this.flags={},this.makehidden=()=>F(e,n)}}function I(t,e,n){let r=t.core.root;if(J(e,r)){t.core.update_root(n);return}_.setNodes(t.slate,n,{at:B(t.slate,e)})}function ft(t,e){_.removeNodes(t.slate,{at:B(t.core.root,e)})}function gt(t,e,n){_.insertNodes(t.slate,e,{at:B(t.core.root,n)})}function pt(t,e,n){let r=B(t.core.root,n);r[r.length-1]++,_.insertNodes(t.slate,e,{at:r})}function _t(t,e,n){let r=t.core.root,o=B(r,e);r.idx==e.idx&&(o=[]);let a=e.children.length;a>0&&_.removeNodes(t.slate,{at:{anchor:{path:[...o,0],offset:0},focus:{path:[...o,a-1],offset:0}}}),_.insertNodes(t.slate,n,{at:[...o,0]})}const b=m.createContext("row"),fe=m.createContext(!1);function N(t){let e=t.title||"";return i(b.Consumer,{children:n=>i(Ie,{title:e,placement:n=="row"?"left":"top",children:t.children})})}function yt(t){let e=!t.simple,n=r=>{let o=r=="row"?"horizontal":"vertical",a=e?r=="row"?"column":"row":r;return i(b.Provider,{value:a,children:i(Be,h(c({orientation:o},t.buttongroup_props),{children:t.children}))})};return t.force_direction!=null?n(t.force_direction):i(b.Consumer,{children:r=>n(r)})}function ge(t){let e=!t.simple,n=r=>{let o=e?r=="row"?"column":"row":r;return i(b.Provider,{value:o,children:i(ne,{direction:r,children:t.children})})};return t.force_direction!=null?n(t.force_direction):i(b.Consumer,{children:r=>n(r)})}function Gt(t){let e=n=>i(b.Provider,{value:n,children:i(ne,{direction:n,children:t.children})});return t.force_direction!=null?e(t.force_direction):i(b.Consumer,{children:n=>e(n)})}class xt extends m.Component{constructor(e){super(e)}render(){let e=this.props,n=e.stacker||ge,r=e.component||T,o=a=>i(fe.Consumer,{children:s=>i(Ee,{anchorEl:e.anchorEl,open:e.open,placement:a=="row"?"right":"bottom",disablePortal:s,transition:!0,children:({TransitionProps:l})=>i(Fe,h(c({},l),{timeout:350,children:i(r,{children:i(n,{children:e.children})})}))})});return e.force_direction!=null?o(e.force_direction):i(b.Consumer,{children:a=>o(a)})}}const pe={palette:{divider:"#00000077",primary:{main:"#111111"}},editor:{margins:{background:"0.5rem",paragraph:"0.8rem",small:"0.2rem"},widths:{editable_drawer:"70%",minimum_content:"3rem"},typography:{body:{fontFamily:"default",fontSize:"1rem",lineHeight:"1.5rem",lineSpacing:"0.00938em",fontWeight:400},structure:{fontFamily:"Century Gothic, SimHei",fontSize:"1rem",lineHeight:"1.5rem",lineSpacing:"0.00938em",fontWeight:400}}},printer:{margins:{paragraph:"0.4rem",special:"0.8rem",colon:"1rem",level:"2rem",structure:"0.4rem"},typography:{body:{fontFamily:"default",fontSize:"1rem",lineHeight:"1.5rem",lineSpacing:"0.00938em",fontWeight:400},weaken:{fontFamily:"default",fontSize:"1rem",lineHeight:"1.5rem",lineSpacing:"0.00938em",fontWeight:400},structure:{fontFamily:"default",fontSize:"1rem",lineHeight:"1.5rem",lineSpacing:"0.00938em",fontWeight:400},display:{fontFamily:"default",fontSize:"1rem",lineHeight:"1.5rem",lineSpacing:"0.00938em",fontWeight:400},title:{fontFamily:"default",fontSize:"1rem",lineHeight:"1.5rem",lineSpacing:"0.00938em",fontWeight:400}}}};function vt(t){let e=t.element,n=t.editor,r=n.core.styles.abstract,o=t.onClose||(s=>{});function a(s){return l=>{if(o(l),s==null||r[s]==null)return;let u=[...e.hiddens,r[s].makehidden()];I(n,e,{hiddens:u})}}return i(ie,{anchorEl:t.anchor_element,open:t.open,onClose:o,children:Object.keys(r).map(s=>i(U,{onClick:a(s),children:s},s))})}class bt extends m.Component{constructor(e){super(e);d(this,"subeditor");d(this,"hiddenid");d(this,"father_editor");d(this,"father");d(this,"son");this.state={drawer_open:!1},this.subeditor=new j(new mt([...Object.values(e.editor.core.styles.inline),...Object.values(e.editor.core.styles.group),...Object.values(e.editor.core.styles.struct),...Object.values(e.editor.core.styles.support),...Object.values(e.editor.core.styles.abstract)],e.editor.core.root.parameters)),this.subeditor.default_renderers=e.editor.default_renderers,this.subeditor.style_renderers=e.editor.style_renderers,this.father_editor=e.editor,this.father=e.father,this.son=e.son}sub_apply(e){let n=this.father,r=this.son,o=rt(n,r),a=h(c({},r),{children:this.subeditor.core.root.children}),s=it(n.hiddens,o,a);I(e,n,{hiddens:s})}render(){let e=this;return this.props,i(re,{anchor:"left",open:e.props.open,onClose:e.props.onClose,ModalProps:{keepMounted:!0},PaperProps:{sx:{width:"60%"}},SlideProps:{onExited:()=>{e.father_editor.apply_all()}},children:i(fe.Provider,{value:!0,children:i(Nt,{editor:e.subeditor,onMount:()=>{_t(e.subeditor,e.subeditor.core.root,e.props.son.children),e.props.editor.add_suboperation(`${e.son.idx}-hidden`,e.sub_apply.bind(e))}})})})}}function Ct(t){let e=t.element,n=t.editor,r=e.hiddens,o=t.onClose||(l=>{}),[a,s]=A.exports.useState(void 0);return p(O,{children:[i(ie,{anchorEl:t.anchor_element,open:t.open,onClose:t.onClose,children:Object.keys(r).map(l=>p(U,{onClick:u=>{s(l),o(u)},children:[r[l].name,"-",l]},l))}),Object.keys(r).map(l=>i(bt,{editor:n,father:e,son:e.hiddens[l],open:a==l,onClose:u=>{s(void 0)}},l))]})}function kt(t){let e=t.editor,n=t.element,[r,o]=A.exports.useState(void 0),[a,s]=A.exports.useState(void 0);return p(O,{children:[i(N,{title:"\u65B0\u5EFA\u62BD\u8C61",children:i(R,{onClick:l=>o(l.currentTarget),children:i(Ne,{})})}),i(N,{title:"\u7F16\u8F91\u62BD\u8C61",children:i(R,{onClick:l=>s(l.currentTarget),children:i(De,{})})}),i(vt,{editor:e,element:n,anchor_element:r,open:r!=null,onClose:l=>o(void 0)}),i(Ct,{editor:e,element:n,anchor_element:a,open:a!=null,onClose:l=>{s(void 0)}})]})}const Jt=t=>i(g,h(c({contentEditable:!1},t),{sx:[{userSelect:"none"},...Array.isArray(t.sx)?t.sx:[t.sx]]})),Xt=t=>i(S,h(c({component:g},t),{sx:[e=>h(c({},e.editor.typography.body),{marginTop:e.editor.margins.paragraph}),...Array.isArray(t.sx)?t.sx:[t.sx]]})),St=t=>i(S,h(c({component:g},t),{sx:[e=>h(c({},e.editor.typography.structure),{marginY:"auto",height:e.editor.typography.structure.lineHeight,whiteSpace:"nowrap"}),...Array.isArray(t.sx)?t.sx:[t.sx]]})),wt=t=>i(g,h(c({},t),{autogrow:void 0,sx:[c({paddingX:e=>e.editor.margins.background},t.autogrow?{flex:1,minWidth:0}:{}),...Array.isArray(t.sx)?t.sx:[t.sx]]})),jt=t=>i(T,h(c({elevation:0,variant:"outlined",square:!0},t),{is_inline:void 0,sx:[c({},t.is_inline?{display:"inline-block",height:e=>e.editor.typography.body.lineHeight,color:e=>e.palette.secondary.dark,marginX:e=>e.editor.margins.small}:{marginTop:e=>e.editor.margins.paragraph,color:e=>e.palette.primary.main}),...Array.isArray(t.sx)?t.sx:[t.sx]]})),Yt=t=>i(g,h(c({},t),{sx:[{marginTop:e=>e.editor.margins.paragraph},...Array.isArray(t.sx)?t.sx:[t.sx]]})),At=t=>i(T,h(c({elevation:0,variant:"outlined",square:!0},t),{sx:[{width:"100%",height:"100%",overflow:"hidden"},...Array.isArray(t.sx)?t.sx:[t.sx]]}));class Pt extends m.Component{constructor(e){super(e);d(this,"parameters");d(this,"onUpdate");this.parameters=this.props.initval,this.onUpdate=e.onUpdate||(n=>{})}componentDidUpdate(){this.parameters=this.props.initval,this.onUpdate=this.props.onUpdate||(e=>{})}get_all_treenodes(e,n){let r=this,o=[];for(let a in n){let s=[...e,a];se(n[a])||(o.push(s),o=[...o,...r.get_all_treenodes(s,n[a])])}return o}renderValue(e){let n=e.name,r=e.val,o=e.onChange,a={defaultValue:r,label:n,variant:"standard",sx:{marginLeft:"5%"}};return typeof r=="string"?i(L,c({onChange:s=>o(s.target.value)},a)):typeof r=="number"?i(L,c({onChange:s=>o(s.target.value),type:"number"},a)):typeof r=="boolean"?p(L,h(c({onChange:s=>{o(s.target.value=="true")},select:!0},a),{children:[i(U,{value:"true",children:"true"},0),i(U,{value:"false",children:"false"},1)]})):i(O,{})}renderDict(e){let n=c({},e.val),r=this.renderValue.bind(this),o=this.renderDict.bind(this),a=[...e.father_names,e.name],s=JSON.stringify(a);return i(Te,{nodeId:s,label:e.name,sx:{width:"auto",overflowX:"hidden"},children:Object.keys(e.val).map(l=>{let u=e.val[l];return se(u)?i(r,{name:l,val:u,onChange:f=>{n[l]=f,e.onChange(n)}},l):i(o,{name:l,val:u,father_names:a,onChange:f=>{n[l]=f,e.onChange(n)}},l)})})}render(){let e=this.renderDict.bind(this),n=this,r="Parameters",o=Object.values(this.get_all_treenodes([],{[r]:n.parameters})).map(a=>JSON.stringify(a));return i(Oe,{defaultExpanded:o,disableSelection:!0,disabledItemsFocusable:!0,defaultCollapseIcon:i(Re,{}),defaultExpandIcon:i(Ue,{}),children:i(e,{name:r,val:n.parameters,father_names:[],onChange:a=>{n.parameters=a,n.onUpdate(a)}})})}}class Et extends m.Component{constructor(e){super(e)}temp_update_value(e){let n=this.props;n.editor.add_suboperation(`${n.element.idx}-parameter`,r=>{I(r,n.element,{parameters:e})})}componentDidUpdate(e,n,r){}render(){let e=this,n=this.props;return i(Pt,{initval:n.element.parameters,onUpdate:r=>e.temp_update_value(r)})}}function Ft(t){let e=t.onClose||(n=>{});return p(re,{anchor:"left",open:t.open,onClose:e,ModalProps:{keepMounted:!0},SlideProps:{onExited:()=>{t.editor.apply_all()}},PaperProps:{sx:{width:"40%"}},children:[i(g,{children:p(St,{children:["idx: ",t.element.idx]})}),i(V,{}),i(Et,{editor:t.editor,element:t.element})]})}function H(t){let e=t.icon;return i(N,{title:t.title,children:i(R,{onClick:t.onClick,size:t.size,children:i(e,{})})})}function Bt(t){let[e,n]=A.exports.useState(!1),r=t.onClose||(o=>{});return p(O,{children:[i(H,{onClick:o=>n(!0),title:"\u8BBE\u7F6E\u53C2\u6570",icon:ze}),i(Ft,{editor:t.editor,element:t.element,open:e,onClose:o=>{r(o),n(!1)}})]})}function qt(t){return i(H,{onClick:e=>{ft(t.editor,t.element)},title:"\u5220\u9664\u7EC4\u4EF6",icon:Me})}function Qt(t){return p(m.Fragment,{children:[i(H,{onClick:e=>{gt(t.editor,E(),t.element)},title:"\u5411\u4E0A\u6DFB\u52A0\u6BB5\u843D",icon:We}),i(H,{onClick:e=>{pt(t.editor,E(),t.element)},title:"\u5411\u4E0B\u6DFB\u52A0\u6BB5\u843D",icon:$e})]})}function It(t){let e=t.button_class,[n,r]=m.useState(!1),o=m.useRef(),a=t.onClose||(()=>{}),s=u=>{r(u),u||a()},l=p(m.Fragment,{children:[i(N,{title:t.title,children:i(e,c({onClick:u=>s(!n),ref:o},t.button_props))}),i(xt,h(c({anchorEl:o.current,open:n},t.poper_props),{children:t.children}))]});return t.close_on_otherclick?i(He,{onClickAway:()=>{s(!1)},children:i(g,{children:l})}):l}function Kt(t){let e=t.element,n=t.editor,[r,o]=A.exports.useState(e.relation=="chaining");function a(s){let l=s.target.checked;o(l),l==!1&&I(n,e,{relation:"separating"}),l==!0&&I(n,e,{relation:"chaining"})}return i(N,{title:"\u8D34\u5408",children:i(Le,{checked:r,onChange:a})})}class Nt extends m.Component{constructor(e){super(e);d(this,"editor");d(this,"onUpdate");d(this,"onMount");d(this,"onFocusChange");this.editor=e.editor,this.onUpdate=e.onUpdate||(n=>{}),this.onMount=e.onMount||(()=>{}),this.onFocusChange=e.onFocusChange||(()=>{})}componentDidMount(){let e=this;this.onMount(),this.editor.core.add_notificatioon(()=>{e.forceUpdate()})}render(){let e={group:Je,inline:Xe,support:je,struct:Ye},n={xs:.15,md:.1,xl:.05},r=de(n,l=>1-l),o=l=>de(l,u=>`${Math.floor(u*100)%100}%`),a=X(pe,this.props.theme),s=this;return i(oe,{theme:ae(a),children:p(At,{children:[i(g,{sx:{position:"absolute",height:"100%",width:r,overflow:"auto"},children:i(wt,{children:i(j.Component,{editor:s.editor,onUpdate:s.onUpdate,onFocusChange:s.onFocusChange})})}),i(g,{sx:{position:"absolute",height:"100%",left:o(r),width:n},children:p(ge,{force_direction:"column",children:[i(Bt,{editor:s.editor,element:s.editor.core.root}),i(kt,{editor:s.editor,element:s.editor.core.root}),i(V,{}),["group","inline","support","struct"].map(l=>{let u=e[l];return i(m.Fragment,{children:i(It,{poper_props:{stacker:yt,component:Ve(T)({backgroundColor:"#aabbddbb"})},button_class:R,button_props:{children:i(u,{})},title:l,children:Object.keys(s.editor.core.styles[l]).map(f=>p(m.Fragment,{children:[i(Ge,{onClick:x=>s.editor.get_onClick(l,f)(x),variant:"text",children:f}),i(V,{orientation:"vertical",flexItem:!0})]},f))})},l)})]})})]})})}}const Zt=t=>i(S,h(c({component:t.inline?"span":g},t),{inline:void 0,sx:[e=>c(c({},e.printer.typography.weaken),t.inline?{marginRight:n=>n.printer.margins.colon,display:"inline-block"}:{}),...Array.isArray(t.sx)?t.sx:[t.sx]]})),en=t=>i(S,h(c({component:t.inline?"span":g},t),{inline:void 0,sx:[e=>c(c({},e.printer.typography.display),t.inline?{marginRight:n=>n.printer.margins.colon,display:"inline-block"}:{}),...Array.isArray(t.sx)?t.sx:[t.sx]]})),tn=t=>i(S,h(c({component:g},t),{sx:[e=>({fontFamily:"inherit",fontSize:"inherit",lineHeight:"inherit",lineSpacing:"inherit",fontWeight:"inherit",marginTop:e.printer.margins.paragraph}),...Array.isArray(t.sx)?t.sx:[t.sx]]})),nn=t=>i(S,h(c({component:t.inline?"span":g},t),{inline:void 0,leftmargin:void 0,sx:[e=>c(c({},e.printer.typography.structure),t.inline?h(c({},t.leftmargin?{marginLeft:n=>n.printer.margins.colon}:{marginRight:n=>n.printer.margins.colon}),{display:"inline-block"}):{}),...Array.isArray(t.sx)?t.sx:[t.sx]]})),rn=t=>i(g,h(c({},t),{subtitle_like:void 0,small_margin:void 0,sx:[e=>h(c({},t.subtitle_like?e.printer.typography.title:{}),{marginTop:t.small_margin?e.printer.margins.paragraph:e.printer.margins.special}),...Array.isArray(t.sx)?t.sx:[t.sx]]})),on=t=>i(g,h(c({},t),{sx:[{marginLeft:e=>e.printer.margins.level},...Array.isArray(t.sx)?t.sx:[t.sx]]})),an=t=>i(g,h(c({},t),{sx:[{width:e=>e.printer.margins.level},...Array.isArray(t.sx)?t.sx:[t.sx]]})),Dt=t=>i(g,h(c({},t),{sx:[e=>h(c({},e.printer.typography.body),{padding:e.printer.margins.structure,boxSizing:"border-box",height:"100%",width:"100%",overflowY:"auto",wordWrap:"break-word"}),...Array.isArray(t.sx)?t.sx:[t.sx]]}));class sn extends m.Component{constructor(e){super(e);d(this,"printer");d(this,"main");this.printer=e.printer,this.main=m.createRef()}scroll_to(e){this.main.current!=null&&this.main.current.scroll_to(e)}render(){let e=X(pe,this.props.theme),n=this.main;return i(oe,{theme:ae(e),children:i(Dt,{children:i(me.Component,{ref:n,printer:this.printer})})})}}function Y(t){let e=qe(`#_data_${t}`);if(!!e)return e.html()}var q={csrf:Y("csrf"),node_id:parseInt(Y("node_id")),logged_in:Y("logged_in")},Tt="http://127.0.0.1:8000";P.defaults.baseURL=Tt;P.defaults.xsrfHeaderName="X-CSRFToken";P.defaults.headers.post["X-CSRFToken"]=q.csrf;async function D(t,e,n){n==null&&(n=q.node_id);let r=(await P.get(t(n))).data;return e!=null&&(r=r[e]),r}async function Q(t,e,n){return n==null&&(n=q.node_id),(await P.post(t(n),e)).data.status}var C={get:{content:t=>`get/node/content/${t}`,nodetree:t=>`get/nodetree/${t}`,concept:t=>`get/node/concepts/${t}`,create_time:t=>`get/node/create_time/${t}`,comments:t=>`get/node/comments/${t}`},post:{content:t=>`post/node/content/${t}`,comments:t=>`post/node/comments/${t}`,nodetree:t=>`post/nodetree/${t}`}},ln={get:{content:t=>D(C.get.content,"content",t),nodetree:t=>D(C.get.nodetree,"data",t),concept:t=>D(C.get.concept,"concepts",t),create_time:t=>D(C.get.create_time,void 0,t),comments:t=>D(C.get.comments,"comments",t)},post:{content:(t,e)=>Q(C.post.content,t,e),nodetree:(t,e)=>Q(C.post.nodetree,t,e),comments:(t,e)=>Q(C.post.comments,t,e)}};function dn(t){return i(Qe,{anchorOrigin:{vertical:"top",horizontal:"center"},open:t.open,message:t.status?t.info_sucess:t.info_fail,onClose:()=>t.onClose()})}export{ge as A,an as B,w as C,Nt as D,mt as E,Ht as F,ue as G,Wt as H,ln as I,$t as J,Lt as K,Mt as L,Vt as M,Qt as N,dn as O,me as P,q as Q,Gt as S,j as Y,sn as a,Jt as b,St as c,Bt as d,kt as e,Kt as f,qt as g,wt as h,Ut as i,It as j,jt as k,Yt as l,b as m,N as n,gt as o,pt as p,E as q,Xt as r,I as s,rn as t,zt as u,tn as v,nn as w,on as x,Zt as y,en as z};
