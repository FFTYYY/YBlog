var Se=Object.defineProperty,De=Object.defineProperties;var Ne=Object.getOwnPropertyDescriptors;var de=Object.getOwnPropertySymbols;var Ae=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable;var H=(t,e,r)=>e in t?Se(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,u=(t,e)=>{for(var r in e||(e={}))Ae.call(e,r)&&H(t,r,e[r]);if(de)for(var r of de(e))Be.call(e,r)&&H(t,r,e[r]);return t},h=(t,e)=>De(t,Ne(e));var d=(t,e,r)=>(H(t,typeof e!="symbol"?e+"":e,r),r);import"./modulepreload-polyfill.9d8db203.js";import{N as Y,j as o,C as j,a as x,T as f,S as Re,E as Pe,w as Me,b as Oe,c as je,D as ue,r as C,d as c,F as q,B as F,M as ce,e as he,f as Ue,I as J,g as fe,h as ze,G as E,i as R,k as U,A as Ie,l as Le,m as Te,n as S,o as $e,p as We,q as Ge,s as Ve,t as He,u as Ye,v as X,P as D,x as z,y as qe,R as Je}from"./vendor.5ffad586.js";function K(){return Math.random()*23333333}function Q(t=""){return{text:t}}function w(t=""){return{children:[Q(t)]}}function Xe(t,e,r={}){return{idx:K(),type:"inline",name:t,parameters:e,children:[Q("")],hiddens:[],flags:r}}function I(t,e,r={}){return{idx:K(),type:"group",name:t,parameters:e,relation:"separating",children:[w()],hiddens:[],flags:r}}function Ke(t,e,r={}){return{idx:K(),type:"support",name:t,parameters:e,children:[Q()],hiddens:[],flags:r}}function m(t){return y(t)?t.type:"children"in t?"paragraph":"text"}function y(t){return"type"in t}function N(t,e,r){return m(t)==e&&t.name==r}function Qe(t,e){for(let r=0;r<t.hiddens.length;r++)if(Z(t.hiddens[r],e))return r;return-1}function Ze(t,e,r){return[...t.slice(0,e),r,...t.slice(e+1,t.length)]}const P={style:{userSelect:"none"},contentEditable:!1};function Z(t,e){return!y(t)||!y(e)?!1:t.idx==e.idx}function b(t,e){for(let[r,n]of Y.descendants(t))if(Z(r,e))return n}function A(t){return o(j,h(u({},t.attributes),{sx:{marginLeft:"1%",marginRight:"1%"},children:t.children}))}class pe{constructor(e,r){d(this,"core");d(this,"default_renderers");d(this,"style_renderers");this.core=e,this.default_renderers=r,this.style_renderers={inline:{},group:{},struct:{},support:{}}}get_renderer(e,r=void 0){if(r==null)return this.default_renderers[e];if(e=="text"||e=="paragraph")throw new Error(`\u5F53 nodetype = ${e}\uFF0Cstylename \u4E0D\u80FD\u4E0D\u4E3A undefined\u3002\uFF08stylename = ${r}\uFF09`);return this.style_renderers[e][r]||this.default_renderers[e]}update_renderer(e,r,n=void 0){if(n==null&&(this.default_renderers[r]=e),r=="text"||r=="paragraph")throw new Error(`\u5F53 nodetype = ${r}\uFF0Cstylename \u4E0D\u80FD\u4E0D\u4E3A undefined\u3002\uFF08stylename = ${n}\uFF09`);this.style_renderers[r][n]=e}}class et extends x.Component{constructor(e){super(e);d(this,"renderer");d(this,"core");d(this,"env_enters");d(this,"env_exits");this.state={root:I("root",{})},this.renderer=e.renderer,this.core=this.renderer.core,this.core.add_notificatioon(this.root_notification.bind(this)),this.setState({root:this.core.root}),this.env_enters={},this.env_exits={}}root_notification(e){this.setState({root:e})}_sub_component(e){let r=e.element,n=this,i=this._sub_component.bind(this),s=this.renderer,l=m(r);if(l=="text"){let g=s.get_renderer("text"),v=r.text;return v==""&&(v=o("br",{})),o(g.renderer_func,{attributes:{},element:r,env_enter:{},env_exit:{},children:v})}let a,p=y(r);p&&(a=r.name);let k=r.children,B=s.get_renderer(l,a);return o(B.renderer_func,{attributes:{},element:r,children:Object.keys(k).map(g=>o(i,{element:k[g]},g)),env_enter:p?n.env_enters[r.idx]:{},env_exit:p?n.env_exits[r.idx]:{}})}build_envs(e,r={}){if(!y(e)){if("children"in e)for(let l of e.children)r=this.build_envs(l,r);return r}let n=e,s=this.renderer.get_renderer(n.type,n.name);r=s.pre_effect_enter(n,u({},r)),this.env_enters[n.idx]=r;for(let l of n.children)r=this.build_envs(l,r);return r=s.pre_effect_exit(n,u({},r)),this.env_exits[n.idx]=r,r}render(){let e=this,r=this._sub_component.bind(this);return this.env_enters={},this.env_exits={},this.build_envs(e.state.root),console.log(this.env_enters),o(r,{element:e.state.root})}}function _(t,e,r){return e=e||((n,i)=>i),r=r||((n,i)=>i),{renderer_func:t,pre_effect_enter:e,pre_effect_exit:r}}class ee extends pe{constructor(e){super(e,{text:_(r=>o("span",h(u({},r.attributes),{children:r.children}))),inline:_(r=>o("span",h(u({},r.attributes),{children:r.children}))),paragraph:_(r=>o("div",h(u({},r.attributes),{children:r.children}))),group:_(A),struct:_(A),support:_(A)})}}d(ee,"Component",et);function tt(t){const e=t.normalizeNode;return t.normalizeNode=r=>{const[n,i]=r;if(i.length-1,"children"in n)for(let[s,l]of n.children.entries()){if(s==0)continue;let a=n.children[s-1];if(m(l)!="group")continue;let p=l;if(m(a)=="group"&&p.relation=="separating"){f.insertNodes(t,w(),{at:[...i,s]});return}}e(r)},t}function rt(t){const e=t.isInline;return t.isInline=r=>{if(y(r)){let n=r;if(n.flags.forceInline)return!0;if(n.flags.forceBlock)return!1}return e(r)||m(r)=="inline"},t}function nt(t){const e=t.isVoid;return t.isVoid=r=>y(r)&&r.flags.forceVoid?!0:e(r)||m(r)=="support",t}var it=[tt,rt,nt];function ot(t){for(let e of it)t=e(t);return t}class st extends x.Component{constructor(e){super(e);d(this,"editor");d(this,"core");d(this,"slate");d(this,"onUpdate");this.editor=e.editor,this.core=this.editor.core,this.slate=this.editor.slate,this.onUpdate=e.onUpdate||(r=>{})}update_value(e){this.core.update_children(e),this.onUpdate(e)}renderElement(e){let r=this,n=e.element||e.leaf,i=m(n),s;y(n)&&(s=n.name);let l=this.editor.get_renderer(i,s);return o(l,h(u({},e),{editor:r.editor}))}renderLeaf(e){let r=this,n=this.editor.get_renderer("text");return o(n,h(u({},e),{editor:r.editor}))}render(){let e=this;return o(Re,{editor:e.slate,value:[w("")],onChange:r=>e.update_value(r),children:o(Pe,{renderElement:e.renderElement.bind(e),renderLeaf:e.renderLeaf.bind(e)})})}}class L extends pe{constructor(e){super(e,{text:r=>o("span",h(u({},r.attributes),{children:r.children})),inline:r=>o("span",h(u({},r.attributes),{children:r.children})),paragraph:r=>o("div",h(u({},r.attributes),{children:r.children})),group:A,struct:A,support:A});d(this,"suboperations");d(this,"slate");this.slate=ot(Me(je())),this.suboperations={}}add_suboperation(e,r){this.suboperations[e]=r}apply_all(){let e=this;Object.values(this.suboperations).map(r=>{r(e)}),this.suboperations={}}get_onClick(e,r){let n=this;if(n.core.root,e=="group"){let i=n.core.groupstyles[r];return i==null?s=>{}:s=>{let l=i.makenode();f.insertNodes(n.slate,l)}}if(e=="inline"){let i=n.core.inlinestyles[r];return i==null?s=>{}:s=>{let l=i.makenode();f.wrapNodes(n.slate,l,{match:a=>Oe.isText(a),split:!0})}}if(e=="support"){let i=n.core.supportstyles[r];return i==null?s=>{}:s=>{let l=i.makenode();f.insertNodes(n.slate,l)}}return i=>{}}}d(L,"Component",st);class _e{constructor(e=[],r=[],n=[],i=[],s=[],l={}){d(this,"inlinestyles");d(this,"groupstyles");d(this,"structstyles");d(this,"supportstyles");d(this,"abstractstyles");d(this,"root");d(this,"notifications");d(this,"init_parameters");this.inlinestyles={},this.groupstyles={},this.structstyles={},this.supportstyles={},this.abstractstyles={};for(let a of e)this.add_inlinestyle(a);for(let a of r)this.add_groupstyle(a);for(let a of n)this.add_structstyle(a);for(let a of i)this.add_supportstyle(a);for(let a of s)this.add_abstractstyle(a);this.init_parameters=l,this.root=I("root",l),this.notifications=[]}update_children(e){return this.update_root({children:e})}update_root(e){this.root=u(u({},this.root),e);for(let r of this.notifications)r(this.root)}add_notificatioon(e){this.notifications.push(e)}add_inlinestyle(e){this.inlinestyles[e.name]=e}add_groupstyle(e){this.groupstyles[e.name]=e}add_structstyle(e){this.structstyles[e.name]=e}add_supportstyle(e){this.supportstyles[e.name]=e}add_abstractstyle(e){this.abstractstyles[e.name]=e}}class te{constructor(e,r,n){d(this,"name");d(this,"parameter_prototype");d(this,"prototype");this.name=e,this.parameter_prototype=r,this.prototype=n}makenode(){return this.prototype()}update_prototype(e){this.prototype=e}}class lt extends te{constructor(e,r,n={}){super(e,r,()=>Xe(e,r,n))}}class at extends te{constructor(e,r,n={}){super(e,r,()=>I(e,r,n))}}class me extends te{constructor(e,r,n={}){super(e,r,()=>Ke(e,r,n))}}class dt{constructor(e,r){d(this,"name");d(this,"parameter_prototype");this.name=e,this.parameter_prototype=r}makehidden(){return I(this.name,this.parameter_prototype)}}function M(t,e,r){let n=t.core.root;if(Z(e,n)){t.core.update_root(r);return}f.setNodes(t.slate,r,{at:b(t.slate,e)})}function ut(t,e){f.removeNodes(t.slate,{at:b(t.core.root,e)})}function ct(t,e,r){f.moveNodes(t.slate,{at:b(t.core.root,e),to:r})}function ge(t,e,r){f.insertNodes(t.slate,e,{at:r})}function ht(t,e,r){f.insertNodes(t.slate,e,{at:b(t.core.root,r)})}function ft(t,e,r){let n=t.core.root,i=b(n,e);n.idx==e.idx&&(i=[]);let s=e.children.length;s>0&&f.removeNodes(t.slate,{at:{anchor:{path:[...i,0],offset:0},focus:{path:[...i,s-1],offset:0}}}),f.insertNodes(t.slate,r,{at:[...i,0]})}function pt(t){let e=t.element,r=t.editor,n=r.core.abstractstyles,i=t.onClose||(l=>{});function s(l){return a=>{if(i(a),l==null||n[l]==null)return;let p=[...e.hiddens,n[l].makehidden()];M(r,e,{hiddens:p})}}return o(ce,{anchorEl:t.anchor_element,open:t.open,onClose:i,children:Object.keys(n).map(l=>o(he,{onClick:s(l),children:l},l))})}class _t extends x.Component{constructor(e){super(e);d(this,"subeditor");d(this,"hiddenid");d(this,"father_editor");d(this,"father");d(this,"son");this.state={drawer_open:!1},this.subeditor=new L(new _e(Object.values(e.editor.core.inlinestyles),Object.values(e.editor.core.groupstyles),Object.values(e.editor.core.structstyles),Object.values(e.editor.core.supportstyles),Object.values(e.editor.core.abstractstyles))),this.subeditor.default_renderers=e.editor.default_renderers,this.subeditor.style_renderers=e.editor.style_renderers,this.father_editor=e.editor,this.father=e.father,this.son=e.son}sub_apply(e){let r=this.father,n=this.son,i=Qe(r,n),s=h(u({},n),{children:this.subeditor.core.root.children}),l=Ze(r.hiddens,i,s);M(e,r,{hiddens:l})}render(){let e=this;return this.props,o(ue,{anchor:"left",open:e.props.open,onClose:e.props.onClose,ModalProps:{keepMounted:!0},PaperProps:{sx:{width:"40%"}},SlideProps:{onExited:()=>{e.father_editor.apply_all()}},children:o(be,{editor:e.subeditor,onMount:()=>{ft(e.subeditor,e.subeditor.core.root,e.props.son.children),e.props.editor.add_suboperation(e.son.idx,e.sub_apply.bind(e))}})})}}function mt(t){let e=t.element,r=t.editor,n=e.hiddens,i=t.onClose||(a=>{}),[s,l]=C.exports.useState(void 0);return c(q,{children:[o(ce,{anchorEl:t.anchor_element,open:t.open,onClose:t.onClose,children:Object.keys(n).map(a=>c(he,{onClick:p=>{l(a),i(p)},children:[n[a].name,"-",a]},a))}),Object.keys(n).map(a=>o(_t,{editor:r,father:e,son:e.hiddens[a],open:s==a,onClose:p=>{l(void 0)}},a))]})}function re(t){let e=t.editor,r=t.element,[n,i]=C.exports.useState(void 0),[s,l]=C.exports.useState(void 0);return c(q,{children:[o(F,{onClick:a=>i(a.currentTarget),variant:"contained",children:"New"}),o(F,{onClick:a=>l(a.currentTarget),variant:"contained",children:"Edit"}),o(pt,{editor:e,element:r,anchor_element:n,open:n!=null,onClose:a=>i(void 0)}),o(mt,{editor:e,element:r,anchor_element:s,open:s!=null,onClose:a=>{l(void 0)}})]})}class gt extends x.Component{constructor(e){super(e);d(this,"parameters");d(this,"onUpdate");this.parameters=this.props.initval,this.onUpdate=e.onUpdate||(r=>{})}parameter_values(){return this.parameters}renderString(e){return o(Ue,{defaultValue:e.val,onChange:r=>e.onChange(r.target.value),label:e.name,variant:"standard",sx:{marginLeft:"5%"}})}renderDict(e){let r=u({},e.val),n=this.renderString.bind(this),i=this.renderDict.bind(this);return c(j,{sx:{marginLeft:"5%"},children:[o("p",{children:e.name}),Object.keys(e.val).map(s=>{let l=e.val[s];return typeof l=="string"?o(n,{name:s,val:l,onChange:a=>{r[s]=a,e.onChange(r)}},s):o(i,{name:s,val:l,onChange:a=>{r[s]=a,e.onChange(r)}},s)})]},e.name)}render(){let e=this.renderDict.bind(this),r=this;return o(e,{name:"Parameters",val:r.parameters,onChange:n=>{r.parameters=n,r.onUpdate(n)}})}}function vt(t){function e(r){t.editor.add_suboperation(t.element.idx,n=>{M(n,t.element,{parameters:r})})}return o(gt,{initval:t.element.parameters,onUpdate:r=>e(r)})}function ve(t){let e=t.onClose||(r=>{});return o(ue,h(u({},P),{anchor:"left",open:t.open,onClose:e,ModalProps:{keepMounted:!0},SlideProps:{onExited:()=>{t.editor.apply_all()}},PaperProps:{sx:{width:"40%"}},children:o(vt,{editor:t.editor,element:t.element})}))}function ne(t){let[e,r]=C.exports.useState(!1),n=t.onClose||(i=>{});return c(q,{children:[c(J,{onClick:i=>r(!0),children:["  ",o(fe,{})," "]}),o(ve,{editor:t.editor,element:t.element,open:e,onClose:i=>{n(i),r(!1)}})]})}function ye(t){return o(J,{onClick:e=>{ut(t.editor,t.element)},children:o(ze,{})})}class be extends x.Component{constructor(e){super(e);d(this,"editor");d(this,"onUpdate");d(this,"onMount");this.state={acc_expd:{group:!0,inline:!0,support:!0,struct:!0},param_drawer_open:!1},this.editor=e.editor,this.onUpdate=e.onUpdate||(r=>{}),this.onMount=e.onMount||(()=>{})}componentDidMount(){this.onMount()}render(){let e=this;return c("div",{style:{marginLeft:"1%",marginRight:"1%"},children:[c(E,{container:!0,children:[o(E,{item:!0,xs:10,children:o(L.Component,{editor:e.editor,onUpdate:e.onUpdate})}),o(E,{item:!0,xs:2,children:c(R,{spacing:2,children:[c(U,{orientation:"vertical",children:[c(J,{onClick:r=>e.setState({param_drawer_open:!0}),children:["  ",o(fe,{})," "]}),o(re,{editor:e.editor,element:e.editor.core.root,orientation:"vertical"})]}),["group","inline","support","struct"].map(r=>c(Ie,{expanded:e.state.acc_expd[r],onChange:(n,i)=>e.setState({acc_expd:h(u({},e.state.acc_expd),{[r]:i})}),children:[o(Le,{children:r}),o(Te,{children:o(U,{variant:"contained",fullWidth:!0,orientation:"vertical",children:Object.keys(this.editor.core[`${r}styles`]).map(n=>o(F,{onClick:i=>e.editor.get_onClick(r,n)(i),children:n},n))})})]},r))]})})]}),o(ve,{open:e.state.param_drawer_open,editor:e.editor,element:e.editor.core.root,onClose:r=>{e.setState({param_drawer_open:!1})}})]})}}function yt(t,e){return r=>{let n=r.element,i=r.editor,[s,l]=C.exports.useState(n.relation=="chaining");function a(p){let k=p.target.checked;if(l(k),k==!1&&(ht(i,w(),n),M(i,n,{relation:"separating"})),k==!0){M(i,n,{relation:"chaining"});let B=b(i.slate,n),g=B.length-1,v;for(let G=B[g]-1;G>=0;G--){let V=[...B];V[g]=G;let Ee=Y.descendant(i.slate,V);if(m(Ee)=="group"){v=V;break}}v!=null&&(v[g]++,ct(i,n,v))}}return o(S,{sx:{marginLeft:"1%",marginRight:"1%"},children:c(j,h(u({},r.attributes),{children:[o($e,h(u({},P),{position:"static",children:c(We,{children:[o(Ge,{children:e}),o(ne,{editor:i,element:n}),o(re,{editor:i,element:n}),o(ye,{editor:i,element:n}),o(Ve,{checked:s,onChange:a})]})})),o(S,{sx:{marginLeft:"1%",marginRight:"1%"},children:r.children})]}))})}}function T(t="theorem",e={},r=n=>n.title){return[new at(t,e),s=>{let l=s.element,a=r(l.parameters),p=yt(t,a);return o(p,u({},s))}]}function bt(t="strong",e={}){return[new lt(t,e),i=>{let s=i.element,l=i.editor;return o(S,h(u({component:"span"},i.attributes),{children:o(j,{style:{backgroundColor:"#AABBCC",display:"inline-block"},children:c(R,{direction:"row",spacing:1,children:[i.children,c(U,h(u({variant:"text"},P),{children:[o(ne,{editor:l,element:s}),o(re,{editor:l,element:s}),o(ye,{editor:l,element:s})]}))]})})}))}]}function xe(t=""){console.warn(t)}function xt(t="newparagraph"){return[new me(t,{}),n=>{let i=n.element,s=n.editor;return c(U,h(u(u({},P),n.attributes),{sx:{width:"98%",marginLeft:"1%",marginRight:"1%"},variant:"outlined",size:"small",children:[o(F,{onClick:l=>{let a=b(s.core.root,i);a==null&&xe("\u8282\u70B9\u4E0D\u5728\u8282\u70B9\u6811\u4E2D\uFF01"),ge(s,w(),a)},startIcon:o(He,{fontSize:"small"}),fullWidth:!0}),o(F,{onClick:l=>{let a=b(s.core.root,i);a==null&&xe("\u8282\u70B9\u4E0D\u5728\u8282\u70B9\u6811\u4E2D\uFF01"),a[a.length-1]++,ge(s,w(),a)},startIcon:o(Ye,{fontSize:"small"}),fullWidth:!0}),n.children]}))}]}function Ce(t="splitter",e={}){return[new me(t,e),i=>c(X,h(u(u({},P),i.attributes),{sx:{marginLeft:"2%",marginRight:"2%",marginTop:"1%",marginBottom:"1%"},children:[o(D,{children:c(R,{direction:"row",children:[o(S,{children:t}),o(ne,{editor:i.editor,element:i.element})]})}),i.children]}))]}var Ct=_(t=>{let e=t.element;return c(D,h(u({},t.attributes),{children:[e.parameters.alias,":",t.children]}))}),wt=_(t=>(t.element,c(D,h(u({},t.attributes),{children:["/*",t.children,"*/"]})))),kt=_(t=>(t.element,c(D,h(u({},t.attributes),{children:["\u88F1\uFF1A",t.children]})))),Ft=_(t=>(t.element,c(D,h(u({},t.attributes),{children:["\u5F70\uFF1A",t.children]})))),Et=_(t=>{let e=t.element;return o(X,{children:e.parameters.title})}),St=_(t=>o(X,{})),[ie,Dt]=T("\u662D\u8A00",{title:"\u662D\u8A00",alias:""}),[oe,Nt]=T("\u968F\u8A00",{title:"\u968F\u8A00"}),At=new dt("\u7A46\u8A00",{}),[se,Bt]=T("\u88F1\u793A",{title:"\u88F1\u793A"}),[le,Rt]=T("\u5F70\u793A",{title:"\u5F70\u793A"}),[O,Pt]=xt("\u65B0\u6BB5"),[$,Mt]=Ce("\u5C0F\u8282\u7EBF",{title:""}),[W,Ot]=Ce("\u7AE0\u8282\u7EBF",{title:""}),[we,jt]=bt("\u5F3A\u8C03");function Ut(t){return t.add_groupstyle(ie),t.add_groupstyle(oe),t.add_groupstyle(se),t.add_groupstyle(le),t.add_abstractstyle(At),t.add_supportstyle(O),t.add_supportstyle($),t.add_supportstyle(W),t.add_inlinestyle(we),t}function zt(t){return t.update_renderer(Dt,"group",ie.name),t.update_renderer(Nt,"group",oe.name),t.update_renderer(Bt,"group",se.name),t.update_renderer(Rt,"group",le.name),t.update_renderer(Pt,"support",O.name),t.update_renderer(Mt,"support",$.name),t.update_renderer(Ot,"support",W.name),t.update_renderer(jt,"inline",we.name),t}function It(t){return t.update_renderer(Ct,"group",ie.name),t.update_renderer(wt,"group",oe.name),t.update_renderer(kt,"group",se.name),t.update_renderer(Ft,"group",le.name),t.update_renderer(Et,"support",$.name),t.update_renderer(St,"support",W.name),t}function Lt(t){let e="";if(document.cookie&&document.cookie!==""){const r=document.cookie.split(";");for(let n=0;n<r.length;n++){const i=r[n].trim();if(i.substring(0,t.length+1)===t+"="){e=decodeURIComponent(i.substring(t.length+1));break}}}return e}const Tt=Lt("csrftoken");var $t="http://127.0.0.1:8000";z.defaults.baseURL=$t;z.defaults.headers.post["X-CSRFToken"]=Tt;function Wt(){return 1}const ke=C.exports.createContext(!1);function ae(t){let r=t.no_button||!1?S:F,n=h(u({},t),{close_item:void 0,open_item:void 0,no_button:void 0});return o(ke.Consumer,{children:i=>o(r,h(u({},n),{children:i?t.open_item:t.close_item}))})}class Gt extends C.exports.Component{constructor(e){super(e);this.state={open:!1}}render(){let e=this;return o(D,{children:o(ke.Provider,{value:e.state.open,children:c(R,{children:[o(ae,{close_item:">",open_item:"<",onClick:r=>{e.setState({open:!e.state.open})}}),e.props.children]})})})}}function Vt(t){const e=t.normalizeNode;return t.normalizeNode=r=>{let[n,i]=r;if(i.length==0){let s=n,l=s.children.length;if(l==0||!N(s.children[0],"support","\u5C0F\u8282\u7EBF")){f.insertNodes(t,$.makenode(),{at:[0]});return}if(!N(s.children[l-1],"support","\u7AE0\u8282\u7EBF")){f.insertNodes(t,W.makenode(),{at:[l]});return}}if(N(n,"support","\u7AE0\u8282\u7EBF")&&(i.length!=1||i[0]!=t.children.length-1)){f.removeNodes(t,{at:i});return}e(r)},t}function Ht(t){const e=t.normalizeNode;return t.normalizeNode=r=>{let[n,i]=r;if("children"in n){for(let[s,l]of n.children.entries())if(!!(N(l,"support","\u5C0F\u8282\u7EBF")||N(l,"support","\u7AE0\u8282\u7EBF"))){if(s!=0){let a=n.children[s-1];if(!N(a,"support","\u65B0\u6BB5")){f.insertNodes(t,O.makenode(),{at:[...i,s]});return}}if(s!=n.children.length-1){let a=n.children[s+1];if(m(a)!="paragraph"||Y.string(a)!=""){f.insertNodes(t,w(""),{at:[...i,s+1]});return}}}}e(r)},t}function Yt(t){const e=t.normalizeNode;function r(i){return m(i)=="support"&&i.name==O.name}function n(i){let s=i.children.length;return s==0||!r(i.children[0])?0:r(i.children[s-1])?-1:s}return t.normalizeNode=i=>{let[s,l]=i;if(m(s)=="group"&&l.length!=0){let a=n(s);a>=0&&f.insertNodes(t,O.makenode(),{at:[...l,a]})}e(i)},t}let qt=[Yt,Ht,Vt];function Jt(t){for(let e of qt)t=e(t);return t}var Fe=Wt();class Xt extends x.Component{constructor(e){super(e);d(this,"editor");d(this,"core");d(this,"output");this.core=Ut(new _e),this.editor=zt(new L(this.core)),this.output=It(new ee(this.core)),this.editor.slate=Jt(this.editor.slate)}async componentDidMount(){var e=(await z.get(`/get_node/${Fe}`)).data.content,r={};e!=""&&(r=JSON.parse(e)),f.removeNodes(this.editor.slate,{at:[0]}),f.insertNodes(this.editor.slate,r,{at:[0]})}on_click_save(e){var r={content:this.core.root.children};z.post(`/post_node/${Fe}`,r)}mainpart(e){let r=this;return o(qe,{children:c(E,{container:!0,children:[o(E,{item:!0,xs:6,children:o(be,{editor:r.editor})},0),o(E,{item:!0,xs:6,children:o(ee.Component,{renderer:r.output})},1)]})})}render(){let e=this,r=this.mainpart.bind(this);return o(S,{children:c(R,{spacing:2,direction:"row",children:[c(Gt,{children:[o(ae,{open_item:"hahhahahahaa",close_item:"ha"}),o(ae,{open_item:"Save",close_item:"S",onClick:e.on_click_save.bind(e)})]}),o(r,{})]})})}}Je.render(o(x.StrictMode,{children:o(Xt,{})}),document.getElementById("root"));
