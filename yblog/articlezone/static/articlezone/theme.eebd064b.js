var Ge=Object.defineProperty,Le=Object.defineProperties;var Me=Object.getOwnPropertyDescriptors;var ae=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,We=Object.prototype.propertyIsEnumerable;var Y=(n,t,e)=>t in n?Ge(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e,y=(n,t)=>{for(var e in t||(t={}))He.call(t,e)&&Y(n,e,t[e]);if(ae)for(var e of ae(t))We.call(t,e)&&Y(n,e,t[e]);return n},G=(n,t)=>Le(n,Me(t));var E=(n,t,e)=>(Y(n,typeof t!="symbol"?t+"":t,e),e);import{j as r,b as d,a0 as Ke,v as L,I as P,a1 as C,m,p as M,a as S,P as ue,a2 as B,B as Z,L as oe,G as qe,H as Xe,q as Je,a3 as se}from"./vendor.7620ad78.js";import{A as x,b as F,c as ee,d as D,e as H,f as te,N as I,g as k,h as W,j as ce,k as T,l as K,m as de,n as Qe,o as he,p as Ve,q as Ye,r as _e,s as Ze,t as et,u as re,v as fe,w as me,x as b,y as tt,z as rt,B as ge,C as nt,G as pe,H as lt,J as it,K as A,L as xe,M as $,O as q,Q as we}from"./buttons.956eb144.js";let ve=n=>r(K,G(y({},n),{sx:n.element.relation=="chaining"?{marginTop:"0"}:{}}));function at(n=l=>l.title,t=l=>r(m,{}),e=l=>r(m,{children:l.children})){return l=>{let i=l.element,a=n(i.parameters),u=l.editor;return r(ve,{element:i,children:d(x,{force_direction:"column",children:[r(F,{children:r(Ke,{sx:{overflow:"auto"},children:d(x,{children:[r(ee,{children:a}),r(D,{editor:u,element:i}),r(H,{editor:u,element:i}),r(te,{editor:u,element:i}),r(I,{editor:u,element:i}),r(k,{editor:u,element:i}),r(t,{editor:u,element:i})]})})}),r(L,{}),r(W,{autogrow:!0,children:r(e,{editor:u,element:i,children:l.children})})]})})}}function z(n=l=>l.title,t=l=>r(m,{}),e=l=>r(m,{children:l.children})){return l=>{let i=l.element,a=n(i.parameters),u=l.editor,o=t;return r(ve,{element:i,children:d(x,{force_direction:"row",children:[r(W,{autogrow:!0,children:r(e,{editor:u,element:i,children:l.children})}),r(F,{children:d(ce,{children:[r(ee,{variant:"overline",children:a}),r(o,{editor:u,element:i}),d(T,{close_on_otherclick:!0,button_class:P,button_props:{size:"small",children:r(C,{fontSize:"small"})},title:"\u5C55\u5F00",children:[r(D,{editor:u,element:i}),r(H,{editor:u,element:i}),r(te,{editor:u,element:i}),r(k,{editor:u,element:i}),r(I,{editor:u,element:i})]})]})})]})})}}function ne(n="",t=l=>r(S.Fragment,{children:l.children}),e=l=>r(m,{})){return l=>{let i=l.element,a=l.editor,u=e;return r(K,{is_inline:!0,children:d(x,{force_direction:"row",children:[r(W,{children:r(t,{editor:a,element:i,children:l.children})}),r(F,{children:d(x,{force_direction:"row",children:[r(u,{editor:a,element:i}),d(T,{close_on_otherclick:!0,button_class:P,button_props:{sx:{height:"1rem",width:"1rem",margin:"0"},children:r(C,{sx:{height:"1rem"}})},title:"\u5C55\u5F00"+(n?` / ${n}`:""),children:[r(M,{children:i.name}),r(D,{editor:a,element:i}),r(H,{editor:a,element:i}),r(k,{editor:a,element:i})]})]})})]})})}}function ut(n){let t=n.element,e=n.editor,[l,i]=S.useState(!1),[a,u]=S.useState(!1),o=r(ue,{sx:{height:"5px"},variant:"outlined"});return r(F,{children:r(de,{children:d(Qe.Provider,{value:"row",children:[n.children,d(B,{container:!0,spacing:2,children:[r(B,{item:!0,xs:6,children:r(Z,{onMouseOver:()=>i(!0),onMouseOut:()=>i(!1),children:(()=>l?r(he,{title:"\u5411\u4E0A\u6DFB\u52A0\u6BB5\u843D",children:r(oe,{onClick:p=>{Ve(e,_e(),t)},size:"small",variant:"outlined",fullWidth:!0,children:r(qe,{fontSize:"small"})})}):o)()})}),r(B,{item:!0,xs:6,children:r(Z,{onMouseOver:()=>u(!0),onMouseOut:()=>u(!1),children:(()=>a?r(he,{title:"\u5411\u4E0B\u6DFB\u52A0\u6BB5\u843D",children:r(oe,{onClick:p=>{Ye(e,_e(),t)},size:"small",variant:"outlined",fullWidth:!0,children:r(Xe,{fontSize:"small"})})}):o)()})})]})]})})})}function ye(n=t=>t.name){return t=>{let e=t.editor,l=t.element,i=n(l.parameters);return r(F,{children:r(de,{children:d(L,{children:[r(ue,{variant:"outlined",children:d(x,{force_direction:"row",children:[r(M,{children:i}),d(T,{close_on_otherclick:!0,button_class:P,button_props:{size:"small",children:r(C,{fontSize:"small"})},title:"\u5C55\u5F00",children:[r(D,{editor:t.editor,element:t.element}),r(I,{editor:e,element:l}),r(k,{editor:e,element:l})]})]})}),t.children]})})})}}function ot(n,t=l=>!!l.url,e=l=>r("img",{src:l.parameters.url})){return l=>{let i=l.editor,a=l.element,u=a.parameters,o=e;return d(K,{is_inline:!0,children:[l.children,r(F,{children:d(x,{force_direction:"row",children:[t(u)?r(o,{parameters:u}):n,d(T,{close_on_otherclick:!0,button_class:P,button_props:{sx:{height:"1rem",width:"1rem",margin:"0"},children:r(C,{sx:{height:"1rem"}})},title:"\u5C55\u5F00"+(n?` / ${n}`:""),children:[r(M,{children:n}),r(D,{editor:i,element:a}),r(I,{editor:i,element:a}),r(k,{editor:i,element:a})]})]})})]})}}function st(n){return r(Ze,{children:n.children})}let ct=n=>r(K,G(y({},n),{sx:n.element.relation=="chaining"?{marginTop:"0"}:{}}));function dt(n=i=>i.title,t=(i,a)=>[],e=i=>r(m,{}),l=i=>r(m,{children:i.children})){return i=>{let a=i.element,u=n(a.parameters),o=i.editor,p=e,g=l,w=a.children,h=t(a.num_children,a.parameters);for(h=h.splice(0,w.length);h.length<w.length;)h.push(1);let _=h.reduce((c,v)=>c+v,0),[f,s]=S.useState(a.num_children);return S.useEffect(()=>{o.add_suboperation(`${a.idx}-struct`,()=>{et(o,a,{num_children:f})})}),r(ct,{element:a,children:d(x,{force_direction:"row",children:[r(B,{container:!0,columns:_,sx:{width:"100%"},children:h.map((c,v)=>r(B,{item:!0,xs:c,sx:{borderRight:v==w.length-1?"none":"1px solid"},children:r(W,{autogrow:!0,children:r(g,{editor:o,element:a,children:i.children[v]})})},v))}),r(F,{children:d(ce,{children:[r(ee,{variant:"overline",children:u}),r(p,{editor:o,element:a}),d(T,{close_on_otherclick:!0,button_class:P,button_props:{size:"small",children:r(C,{fontSize:"small"})},title:"\u5C55\u5F00",onClose:()=>{o.apply_all()},children:[r(D,{editor:o,element:a}),r(H,{editor:o,element:a}),r(te,{editor:o,element:a}),r(k,{editor:o,element:a}),r(I,{editor:o,element:a}),r(Je,{sx:{width:"5rem"},type:"number",label:"number of children",defaultValue:a.num_children,onChange:c=>{s(parseInt(c.target.value))}})]})]})})]})})}}class X{constructor(t,e,l){E(this,"env_key");E(this,"context_key");E(this,"_default_val");this.env_key=t,this.context_key=e,this._default_val=l}enter_effect(t,e,l){return[e,{}]}exit_effect(t,e,l){return[e,l]}ensure_env(t){return t[this.env_key]==null&&(t[this.env_key]=this._default_val),t}get_env(t){return t=this.ensure_env(t),t[this.env_key]}set_env(t,e){return t=this.ensure_env(t),t[this.env_key]=e,t}get_context(t){return t[this.context_key]}set_context(t,e){return t[this.context_key]=e,t}make_context(t){return{[this.context_key]:t}}fuse_result(t,e){let[l,i]=t,[a,u]=e;return[a,y(y({},i),u)]}enter_fuse(t,e,l){return this.fuse_result([e,l],this.enter_effect(t,e,l))}exit_fuse(t,e,l){return this.fuse_result([e,l],this.exit_effect(t,e,l))}}class J extends X{constructor(t,e,l=(i,a,u)=>!1){e==null&&(e=t);super(t,e,[0]);E(this,"clear_order");this.clear_order=l}enter_effect(t,e,l){e=this.ensure_env(e);let i=[...this.get_env(e)];this.clear_order(t,e)&&(i[i.length-1]=0),i[i.length-1]++;let a=[...i,0];return[this.set_env(e,a),this.make_context(i)]}exit_effect(t,e,l){let i=this.get_env(e);return i=i.slice(0,i.length-1),[this.set_env(e,i),l]}}class be extends X{constructor(t,e,l,i){super(t,e,{pre:[],suf:[]});E(this,"pre_inject");E(this,"suf_inject");this.pre_inject=l||(a=>r(m,{})),this.suf_inject=i||(a=>r(m,{}))}enter_effect(t,e,l){let i=this.pre_inject,a=this.suf_inject,u=this.get_env(e);return e=this.set_env(e,{pre:[...u.pre,r(i,{element:t,context:l})],suf:[...u.suf,r(a,{element:t,context:l})]}),[e,l]}exit_effect(t,e,l){return[e,l]}}class ht extends X{constructor(t,e){super(t,e,{pre:[],suf:[]})}enter_effect(t,e,l){let i=this.get_env(e);return e=this.set_env(e,{pre:[],suf:[]}),[e,this.make_context(i)]}}class le extends X{constructor(t,e,l={}){e==null&&(e=t);super(t,e,[void 0,l]);E(this,"information");this.information=l}enter_effect(t,e,l){return l=this.set_context(l,this.get_env(e)),e=this.set_env(e,[void 0,{}]),[e,l]}exit_effect(t,e,l){return e=this.set_env(e,[t,this.information]),[e,l]}}function Ee(n={}){return t=>{let e=t.element,l=!1;(e.type=="struct"||e.type=="group")&&(l=e.relation=="chaining");let i={marginTop:a=>fe(a.printer.margins.special,.5)};return n.small_margin&&(i={}),r(re,G(y({sx:l?i:{}},n),{children:t.children}))}}function j({small_margin_enter:n=!1,small_margin_exit:t=!1,extra_effectors:e=[],inject_pre:l=o=>r(m,{}),inject_suf:i=o=>r(m,{}),outer:a=void 0,inner:u=o=>r(m,{children:o.children})}){let o=a||Ee({small_margin:n}),p=u,g=new be("global-injector","global-injector",l,i),w=new le("global-brother","global-brother",{small_margin:t});return{render_func:h=>{let _=h.element;return r(o,{element:_,context:h.context,children:r(p,{element:_,context:h.context,children:h.children})})},enter_effect:(h,_)=>{let f=[_,{}];for(let s of e)f=s(h).enter_fuse(h,f[0],f[1]);return f=g.enter_fuse(h,f[0],f[1]),f=w.enter_fuse(h,f[0],f[1]),f},exit_effect:(h,_,f)=>{let s=[_,f];for(let c of e)s=c(h).exit_fuse(h,s[0],s[1]);return s=g.exit_fuse(h,s[0],s[1]),s=w.exit_fuse(h,s[0],s[1]),s}}}function _t({small_margin_enter:n=!1,small_margin_exit:t=!1,get_widths:e=p=>[],extra_effectors:l=[],inject_pre:i=p=>r(m,{}),inject_suf:a=p=>r(m,{}),outer:u=void 0,inner:o=p=>r(m,{children:p.children})}){let p=u||Ee({small_margin:n}),g=o,w=new be("global-injector","global-injector",i,a),h=new le("global-brother","global-brother",{small_margin:t});return{render_func:_=>{let f=_.element,s=_.children,c=e(f);for(c=c.splice(0,s.length);c.length<s.length;)c.push(1);let v=c.reduce((V,U)=>V+U,0);return r(p,{element:f,context:_.context,children:r(B,{container:!0,columns:v,children:c.map((V,U)=>r(B,{item:!0,xs:V,sx:{align:"center"},children:r(g,{element:f,context:_.context,children:_.children[U]})},U))})})},enter_effect:(_,f)=>{let s=[f,{}];for(let c of l)s=c(_).enter_fuse(_,s[0],s[1]);return s=w.enter_fuse(_,s[0],s[1]),s=h.enter_fuse(_,s[0],s[1]),s},exit_effect:(_,f,s)=>{let c=[f,s];for(let v of l)c=v(_).exit_fuse(_,c[0],c[1]);return c=w.exit_fuse(_,c[0],c[1]),c=h.exit_fuse(_,c[0],c[1]),c}}}function ft(){let n=new ht("global-injector","global-injector"),t=new le("global-brother","global-brother");return{render_func:e=>{let l=n.get_context(e.context),[i,a]=t.get_context(e.context),u=a.small_margin,o=i!=null&&(i.type=="group"||i.type=="struct");return d(me,{sx:o?{marginTop:u?g=>g.printer.margins.paragraph:g=>g.printer.margins.special}:{},children:[Object.keys(l.pre).map(g=>r(S.Fragment,{children:l.pre[g]},g)),e.children,Object.keys(l.suf).map(g=>r(S.Fragment,{children:l.suf[g]},g)),r("br",{})]})},enter_effect:(e,l)=>{let i=[l,{}];return i=n.enter_fuse(e,i[0],i[1]),i=t.enter_fuse(e,i[0],i[1]),i},exit_effect:(e,l,i)=>{let a=[l,i];return a=n.exit_fuse(e,a[0],a[1]),a=t.exit_fuse(e,a[0],a[1]),a}}}function Q({extra_effectors:n=[],outer:t=e=>r("span",{children:e.children})}){let e=t;return{render_func:l=>{let i=l.element;return r(e,{element:i,context:l.context,children:l.children})},enter_effect:(l,i)=>{let a=[i,{}];for(let u of n)a=u(l).enter_fuse(l,a[0],a[1]);return a},exit_effect:(l,i,a)=>{let u=[i,a];for(let o of n)u=o(l).exit_fuse(l,u[0],u[1]);return u}}}function ie(n){let t=["\u3007","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D"];return`${n}`.split("").map(e=>t[Number(e)]).join("")}var mt=(()=>{let n=e=>new J(`order/${e.parameters.title}`,`order/${e.parameters.title}`);return j({extra_effectors:[n],inject_pre:e=>{let l=n(e.element).get_context(e.context),i=ie(l[l.length-1]),a=e.element.parameters.title,u=e.element.parameters.alias;return d(b,{inline:!0,children:[a," ",i,u?` (${u})`:""]})},outer:e=>r(re,{subtitle_like:!0,children:e.children})})})(),gt=(()=>{let n=e=>new J("order/normal","order/normal");return j({extra_effectors:[n],inject_pre:e=>{let l=n(e.element).get_context(e.context),i=e.element.parameters.order,a=e.element.parameters.starting;return d(b,{inline:!0,children:[i?`[${l}] `:"",a]})},inject_suf:e=>{let l=e.element.parameters.ending;return r(b,{inline:!0,leftmargin:!0,children:l})},outer:e=>r(re,{children:e.children})})})(),pt=(()=>j({inner:n=>{let t=n.element.parameters.enter,e=n.element.parameters.exit;return d(x,{force_direction:"column",children:[t?r(b,{children:t}):r(m,{}),r(tt,{children:r(rt,{children:n.children})}),e?r(b,{children:e}):r(m,{})]})}}))(),xt=(()=>j({inner:n=>{let t=n.element.parameters.enter,e=n.element.parameters.exit;return d(x,{force_direction:"column",children:[t?r(b,{children:t}):r(m,{}),r(ge,{align:"center",children:n.children}),e?r(b,{align:"right",children:e}):r(m,{})]})}}))(),wt=(()=>j({inner:n=>r(x,{force_direction:"column",children:r(ge,{sx:{fontSize:t=>fe(t.printer.typography.structure.fontSize,2)},children:n.children})})}))(),Se=(()=>{let n=new J("order/section","order/section");return{render_func:t=>{let e=n.get_context(t.context),i=t.element.parameters.title;return d(L,{children:[d(b,{inline:!0,children:["\u7B2C",ie(e),"\u8282"]}),r(b,{inline:!0,sx:{marginRight:0},children:i})]})},enter_effect:(t,e)=>{let l=[e,{}];return l=n.enter_fuse(t,l[0],l[1]),l},exit_effect:(t,e,l)=>{let i=[e,l];return i=n.exit_fuse(t,i[0],i[1]),i}}})(),Be=(()=>pe(n=>(n.element,r(L,{}))))(),vt=(()=>Q({outer:n=>r("strong",{children:n.children})}))(),yt=(()=>pe(n=>r(m,{})))(),bt=(()=>Q({outer:n=>{let t=n.element.parameters,e=t.width>0?`${t.width}rem`:"100%",l=t.height>0?`${t.height}rem`:"100%";return r("img",{src:t.url,style:{width:e,height:l}})}}))(),Et=(()=>_t({small_margin_enter:!0,small_margin_exit:!0,get_widths:n=>n.parameters.widths.split(",").map(t=>t==""?1:parseInt(t))}))(),St=(()=>Q({outer:n=>r("del",{children:n.children})}))(),Bt=(()=>Q({outer:n=>{let t=n.element.parameters.targetidx,e=n.element.parameters.targeturl;return e?r(se,{href:e,children:n.children}):r(lt.Consumer,{children:l=>r(se,{component:"button",onClick:i=>l.printer_component.scroll_to(it(l.root,t)),children:r(M,{children:n.children})})})}}))(),Ft=(()=>{let n=t=>new J(`order/${t.parameters.label}`,`order/${t.parameters.label}`,e=>e.relation=="separating");return j({small_margin_enter:!0,extra_effectors:[n],inner:t=>{let e=n(t.element).get_context(t.context);return r(S.Fragment,{children:d(x,{force_direction:"row",children:[r(nt,{children:r(me,{children:ie(e)})}),r(Z,{children:t.children})]})})}})})(),At=ft(),Dt=at(n=>n.title),kt=z(n=>n.label),jt=z(n=>n.label),Pt=z(n=>n.label),Ct=z(n=>n.label),Fe=ut,Ae=ye(n=>n.title),De=ye(n=>"\u7AE0\u8282"),It=ne(),Tt=st,$t=ot("\u56FE\u7247",n=>!!n.url,n=>{let t=n.parameters,e=t.width>0?`${t.width}rem`:"100%",l=t.height>0?`${t.height}rem`:"100%";return r("img",{src:t.url,style:{width:e,height:l}})}),zt=dt(n=>n.title,(n,t)=>t.widths.split(",").map(e=>e==""?1:parseInt(e))),Nt=ne("\u520A\u8C03",n=>r("del",{children:n.children})),Ot=ne("\u94FE\u8C03",n=>r("u",{children:n.children}));let Rt=z(n=>n.label);var ke=new A("\u662D\u8A00",{title:"\u662D\u8A00",alias:""}),je=new A("\u5E38\u8A00",{label:"\u5E38\u8A00",order:!1,starting:"",ending:""}),Pe=new A("\u968F\u8A00",{label:"\u968F\u8A00",enter:"",exit:""}),Ce=new xe("\u9F50\u8A00",{label:"\u9F50\u8A00",widths:"1"});let Ie=new A("\u5217\u8A00",{label:"\u5217\u8A00"});var Te=new A("\u88F1\u793A",{label:"\u88F1\u793A",enter:"",exit:""}),$e=new A("\u5F70\u793A",{label:"\u5F70\u793A"}),N=new $("\u65B0\u6BB5",{}),O=new $("\u5C0F\u8282\u7EBF",{title:""}),R=new $("\u7AE0\u8282\u7EBF",{}),ze=new q("\u5F3A\u8C03",{}),Ne=new q("\u520A\u8C03",{});let Oe=new q("\u94FE\u8C03",{targetidx:"",targeturl:""});var Re=new $("\u56FE\u8C03",{url:"",title:"",width:10,height:-1},{forceInline:!0}),Ue=new we("\u7A46\u8A00",{}),Ut={group:A,inline:q,abstract:we,support:$,struct:xe},Gt={[ke.name]:[ke,Dt,mt],[Pe.name]:[Pe,jt,pt],[Te.name]:[Te,Pt,xt],[$e.name]:[$e,Ct,wt],[Ue.name]:[Ue,void 0,void 0],[N.name]:[N,Fe,void 0],[O.name]:[O,Ae,Se],[R.name]:[R,De,Be],[ze.name]:[ze,It,vt],[je.name]:[je,kt,gt],[Ce.name]:[Ce,zt,Et],[Re.name]:[Re,$t,bt],[Ne.name]:[Ne,Nt,St],[Oe.name]:[Oe,Ot,Bt],[Ie.name]:[Ie,Rt,Ft]};function Wt(n,t,e,l,i){let[a,u,o]=Gt[n],p=Ut[a.type],g=y(y(y(y({},a.parameter_prototype),e),l),i),w=a.flags;return[new p(t,g,w),u,o]}function Kt(n){return n.add_style(N),n.add_style(O),n.add_style(R),n}function qt(n){return n.update_renderer(Tt,"paragraph"),n.update_renderer(Fe,"support",N.name),n.update_renderer(Ae,"support",O.name),n.update_renderer(De,"support",R.name),n}function Xt(n){return n.update_renderer(At,"paragraph"),n.update_renderer(yt,"support",N.name),n.update_renderer(Se,"support",O.name),n.update_renderer(Be,"support",R.name),n}const Jt={palette:{divider:"#00000077",primary:{main:"#111111"}},printer:{margins:{paragraph:"0.4rem",special:"1.0rem",colon:"1rem",level:"2rem"},typography:{body:{fontFamily:"STXihei"},title:{fontFamily:"STXinwei"},structure:{fontFamily:"SimHei"},display:{fontFamily:"KaiTi"},weaken:{fontFamily:"FangSong"}}}};export{qt as a,Xt as b,Jt as c,R as e,Wt as m,ie as n,O as s,Kt as w};
