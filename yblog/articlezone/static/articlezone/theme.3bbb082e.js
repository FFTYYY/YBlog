var Nt=Object.defineProperty,Pt=Object.defineProperties;var Rt=Object.getOwnPropertyDescriptors;var Oe=Object.getOwnPropertySymbols;var Mt=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable;var we=(r,e,t)=>e in r?Nt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,f=(r,e)=>{for(var t in e||(e={}))Mt.call(e,t)&&we(r,t,e[t]);if(Oe)for(var t of Oe(e))jt.call(e,t)&&we(r,t,e[t]);return r},$=(r,e)=>Pt(r,Rt(e));var d=(r,e,t)=>(we(r,typeof e!="symbol"?e+"":e,t),t);import{g as Ee,a as ke,s as Ce,_ as C,u as Ae,K as It,b as Be,d as De,e as Te,L as se,M as Ne,T as z,f as dt,N as Lt,O as Gt,Q as zt,R as Wt,h as Ot,S as Ut,J as ht,U as Vt,V as Ht,A as E,W as L,X as Pe,Y as W,Z as ue,$ as Re,a0 as Z,a1 as O,a2 as Me,a3 as ce,a4 as de,a5 as ft,a6 as Q,p as Y,a7 as he,a8 as u,a9 as mt,P as _t,aa as Jt,B as le,o as Ue,q as Ve,v as He,ab as Xt,ac as Kt,ad as qt,l as pt,ae,af as gt,ag as Se,ah as Zt,ai as oe,aj as k,ak as Qt,al as Yt,am as er,an as xt,ao as vt,ap as tr,I as je,aq as bt,ar as rr,as as nr,at as Je,k as Xe,au as ir}from"./snackbar.919a0c38.js";import{r as I,j as l,b as v,F as y,a as w}from"./jsx-runtime.71fbd6ab.js";const lr=I.exports.createContext();var Ke=lr;function ar(r){return Ee("MuiGrid",r)}const or=[0,1,2,3,4,5,6,7,8,9,10],sr=["column-reverse","column","row-reverse","row"],ur=["nowrap","wrap-reverse","wrap"],H=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Ie=ke("MuiGrid",["root","container","item","zeroMinWidth",...or.map(r=>`spacing-xs-${r}`),...sr.map(r=>`direction-xs-${r}`),...ur.map(r=>`wrap-xs-${r}`),...H.map(r=>`grid-xs-${r}`),...H.map(r=>`grid-sm-${r}`),...H.map(r=>`grid-md-${r}`),...H.map(r=>`grid-lg-${r}`),...H.map(r=>`grid-xl-${r}`)]),cr=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function G(r){const e=parseFloat(r);return`${e}${String(r).replace(String(e),"")||"px"}`}function dr({theme:r,ownerState:e}){let t;return r.breakpoints.keys.reduce((n,i)=>{let a={};if(e[i]&&(t=e[i]),!t)return n;if(t===!0)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=se({values:e.columns,breakpoints:r.breakpoints.values}),s=typeof o=="object"?o[i]:o;if(s==null)return n;const c=`${Math.round(t/s*1e8)/1e6}%`;let g={};if(e.container&&e.item&&e.columnSpacing!==0){const m=r.spacing(e.columnSpacing);if(m!=="0px"){const h=`calc(${c} + ${G(m)})`;g={flexBasis:h,maxWidth:h}}}a=C({flexBasis:c,flexGrow:0,maxWidth:c},g)}return r.breakpoints.values[i]===0?Object.assign(n,a):n[r.breakpoints.up(i)]=a,n},{})}function hr({theme:r,ownerState:e}){const t=se({values:e.direction,breakpoints:r.breakpoints.values});return Ne({theme:r},t,n=>{const i={flexDirection:n};return n.indexOf("column")===0&&(i[`& > .${Ie.item}`]={maxWidth:"none"}),i})}function fr({theme:r,ownerState:e}){const{container:t,rowSpacing:n}=e;let i={};if(t&&n!==0){const a=se({values:n,breakpoints:r.breakpoints.values});i=Ne({theme:r},a,o=>{const s=r.spacing(o);return s!=="0px"?{marginTop:`-${G(s)}`,[`& > .${Ie.item}`]:{paddingTop:G(s)}}:{}})}return i}function mr({theme:r,ownerState:e}){const{container:t,columnSpacing:n}=e;let i={};if(t&&n!==0){const a=se({values:n,breakpoints:r.breakpoints.values});i=Ne({theme:r},a,o=>{const s=r.spacing(o);return s!=="0px"?{width:`calc(100% + ${G(s)})`,marginLeft:`-${G(s)}`,[`& > .${Ie.item}`]:{paddingLeft:G(s)}}:{}})}return i}function yt(r,e,t={}){if(!e||!r||r<=0)return[];if(typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number")return[t[`spacing-xs-${String(r)}`]||`spacing-xs-${String(r)}`];const{xs:n,sm:i,md:a,lg:o,xl:s}=r;return[Number(n)>0&&(t[`spacing-xs-${String(n)}`]||`spacing-xs-${String(n)}`),Number(i)>0&&(t[`spacing-sm-${String(i)}`]||`spacing-sm-${String(i)}`),Number(a)>0&&(t[`spacing-md-${String(a)}`]||`spacing-md-${String(a)}`),Number(o)>0&&(t[`spacing-lg-${String(o)}`]||`spacing-lg-${String(o)}`),Number(s)>0&&(t[`spacing-xl-${String(s)}`]||`spacing-xl-${String(s)}`)]}const _r=Ce("div",{name:"MuiGrid",slot:"Root",overridesResolver:(r,e)=>{const{container:t,direction:n,item:i,lg:a,md:o,sm:s,spacing:c,wrap:g,xl:m,xs:h,zeroMinWidth:p}=r.ownerState;return[e.root,t&&e.container,i&&e.item,p&&e.zeroMinWidth,...yt(c,t,e),n!=="row"&&e[`direction-xs-${String(n)}`],g!=="wrap"&&e[`wrap-xs-${String(g)}`],h!==!1&&e[`grid-xs-${String(h)}`],s!==!1&&e[`grid-sm-${String(s)}`],o!==!1&&e[`grid-md-${String(o)}`],a!==!1&&e[`grid-lg-${String(a)}`],m!==!1&&e[`grid-xl-${String(m)}`]]}})(({ownerState:r})=>C({boxSizing:"border-box"},r.container&&{display:"flex",flexWrap:"wrap",width:"100%"},r.item&&{margin:0},r.zeroMinWidth&&{minWidth:0},r.wrap!=="wrap"&&{flexWrap:r.wrap}),hr,fr,mr,dr),pr=r=>{const{classes:e,container:t,direction:n,item:i,lg:a,md:o,sm:s,spacing:c,wrap:g,xl:m,xs:h,zeroMinWidth:p}=r,b={root:["root",t&&"container",i&&"item",p&&"zeroMinWidth",...yt(c,t),n!=="row"&&`direction-xs-${String(n)}`,g!=="wrap"&&`wrap-xs-${String(g)}`,h!==!1&&`grid-xs-${String(h)}`,s!==!1&&`grid-sm-${String(s)}`,o!==!1&&`grid-md-${String(o)}`,a!==!1&&`grid-lg-${String(a)}`,m!==!1&&`grid-xl-${String(m)}`]};return De(b,ar,e)},gr=I.exports.forwardRef(function(e,t){const n=Ae({props:e,name:"MuiGrid"}),i=It(n),{className:a,columns:o,columnSpacing:s,component:c="div",container:g=!1,direction:m="row",item:h=!1,lg:p=!1,md:b=!1,rowSpacing:_,sm:x=!1,spacing:S=0,wrap:R="wrap",xl:A=!1,xs:xe=!1,zeroMinWidth:ve=!1}=i,be=Be(i,cr),re=_||S,ye=s||S,M=I.exports.useContext(Ke),ze=g?o||12:M,We=C({},i,{columns:ze,container:g,direction:m,item:h,lg:p,md:b,sm:x,rowSpacing:re,columnSpacing:ye,wrap:R,xl:A,xs:xe,zeroMinWidth:ve}),Tt=pr(We);return l(Ke.Provider,{value:ze,children:l(_r,C({ownerState:We,className:Te(Tt.root,a),as:c,ref:t},be))})});var j=gr;function xr(r){return Ee("MuiLink",r)}const vr=ke("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var br=vr;const yr=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"],wr={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Fr=r=>wr[r]||r,Sr=r=>{const{classes:e,component:t,focusVisible:n,underline:i}=r,a={root:["root",`underline${dt(i)}`,t==="button"&&"button",n&&"focusVisible"]};return De(a,xr,e)},$r=Ce(z,{name:"MuiLink",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`underline${dt(t.underline)}`],t.component==="button"&&e.button]}})(({theme:r,ownerState:e})=>{const t=Lt(r,`palette.${Fr(e.color)}`)||e.color;return C({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&{textDecoration:"underline",textDecorationColor:t!=="inherit"?Gt(t,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${br.focusVisible}`]:{outline:"auto"}})}),Er=I.exports.forwardRef(function(e,t){const n=Ae({props:e,name:"MuiLink"}),{className:i,color:a="primary",component:o="a",onBlur:s,onFocus:c,TypographyClasses:g,underline:m="always",variant:h="inherit"}=n,p=Be(n,yr),{isFocusVisibleRef:b,onBlur:_,onFocus:x,ref:S}=zt(),[R,A]=I.exports.useState(!1),xe=Wt(t,S),ve=M=>{_(M),b.current===!1&&A(!1),s&&s(M)},be=M=>{x(M),b.current===!0&&A(!0),c&&c(M)},re=C({},n,{color:a,component:o,focusVisible:R,underline:m,variant:h}),ye=Sr(re);return l($r,C({className:Te(ye.root,i),classes:g,color:a,component:o,onBlur:ve,onFocus:be,ref:xe,ownerState:re,variant:h},p))});var Fe=Er;function kr(r){return Ee("MuiToolbar",r)}ke("MuiToolbar",["root","gutters","regular","dense"]);const Cr=["className","component","disableGutters","variant"],Ar=r=>{const{classes:e,disableGutters:t,variant:n}=r;return De({root:["root",!t&&"gutters",n]},kr,e)},Br=Ce("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disableGutters&&e.gutters,e[t.variant]]}})(({theme:r,ownerState:e})=>C({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:r,ownerState:e})=>e.variant==="regular"&&r.mixins.toolbar),Dr=I.exports.forwardRef(function(e,t){const n=Ae({props:e,name:"MuiToolbar"}),{className:i,component:a="div",disableGutters:o=!1,variant:s="regular"}=n,c=Be(n,Cr),g=C({},n,{component:a,disableGutters:o,variant:s}),m=Ar(g);return l(Br,C({as:a,className:Te(m.root,i),ref:t,ownerState:g},c))});var Tr=Dr,ee=Ot(l("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");class Mn{constructor(e){d(this,"styles");d(this,"notifications");this.styles={inline:{},group:{},struct:{},support:{},abstract:{}};for(let t of e)this.add_style(t);this.notifications={}}add_notificatioon(e,t){this.notifications[t]=e}remove_notificatioon(e){delete this.notifications[e]}add_style(e){this.styles[e.type][e.name]=e}get_style(e,t){return this.styles[e][t]}}class fe{constructor(e,t,n={},i={}){d(this,"type","inline");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makenode");d(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>Ut(e,t,i)}}class D{constructor(e,t,n={},i={}){d(this,"type","group");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makenode");d(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>ht(e,t,i)}}class Nr{constructor(e,t,n={},i={}){d(this,"type","struct");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makenode");d(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>Vt(e,t,i)}}class me{constructor(e,t,n={},i={}){d(this,"type","support");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makenode");d(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>Ht(e,t,i)}}class Pr{constructor(e,t,n={}){d(this,"type","abstract");d(this,"name");d(this,"parameter_prototype");d(this,"flags");d(this,"makehidden");d(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.parameter_labels=n,this.flags={},this.makehidden=()=>ht(e,t)}}class jn{constructor(e,t={}){d(this,"core");d(this,"default_vals");d(this,"styled_vals");this.core=e,this.default_vals=t,this.styled_vals={inline:{},group:{},struct:{},support:{}}}get(e,t=void 0){return t==null?this.default_vals[e]:this.styled_vals[e][t]||this.default_vals[e]}set(e,t,n=void 0){if(n==null){this.default_vals[t]=e;return}this.styled_vals[t][n]=e}}class Rr{constructor(e,t,n,i){d(this,"name");d(this,"target_style");d(this,"fixed_parameters");d(this,"default_parameters");this.name=e,this.target_style=t,this.fixed_parameters=n,this.default_parameters=i}get_proxy_parameters(e){let t={},n=(a,o)=>{if(typeof a!="object"||a.length!=null)return o;let s=f({},a);for(let c in o)o[c]!=null&&(o[c]=="object",s[c]=f(f({},s[c]),o[c]));return s},i=n(n(this.target_style.parameter_prototype,this.default_parameters),e);for(let a in i)this.fixed_parameters[a]==null&&(t[a]=n(t[a],i[a]));return t}get_real_parameters(e){let t={},n=this.target_style.parameter_prototype;for(let i in n)if(this.fixed_parameters[i]!=null){let a=this.fixed_parameters[i];if(a.type=="function"){let s=new Function(`return ${a.val}`)()(e);t[i]={val:s,type:typeof s}}else t[i]=a}else e[i]==null?this.default_parameters[i]==null?t[i]=n[i]:t[i]=this.default_parameters[i]:t[i]=e[i];return t}makenode(){let e=this.target_style.makenode();return e.proxy_info.proxy_name=this.name,e.proxy_info.proxy_params=this.get_proxy_parameters(e.parameters),e.parameters=this.get_real_parameters(e.proxy_info.proxy_params),e}makehidden(){let e=this.target_style.makehidden();return e.proxy_info.proxy_name=this.name,e.proxy_info.proxy_params=this.get_proxy_parameters(e.parameters),e.parameters=this.get_real_parameters(e.proxy_info.proxy_params),e}get_styletype(){return this.target_style.type}get_stylename(){return this.target_style.name}}let wt=r=>l(he,$(f({},r),{sx:r.element.relation=="chaining"?{marginTop:"0"}:{}}));function Ft({get_label:r=n=>u(n,"label"),appbar_extra:e=n=>l(y,{}),surrounder:t=n=>l(y,{children:n.children})}){return n=>{let i=n.element,a=n.editor,o=r(i);return l(wt,{element:i,children:v(E,{force_direction:"column",children:[l(L,{children:l(Tr,{sx:{overflow:"auto"},children:v(E,{children:[l(Pe,{children:o}),l(W,{editor:a,element:i}),l(ue,{editor:a,element:i}),l(Re,{editor:a,element:i}),l(Z,{editor:a,element:i}),l(O,{editor:a,element:i}),l(Me,{editor:a,element:i}),l(e,{editor:a,element:i})]})})}),l(ce,{}),l(de,{autogrow:!0,children:l(t,{editor:a,element:i,children:n.children})})]})})}}function U({get_label:r=n=>u(n,"label"),rightbar_extra:e=n=>l(y,{}),surrounder:t=n=>l(y,{children:n.children})}){return n=>{let i=n.element,a=n.editor,o=r(i),s=e;return l(wt,{element:i,children:v(ft,{force_direction:"row",children:[l(de,{autogrow:!0,children:l(t,{editor:a,element:i,children:n.children})}),l(L,{sx:{textAlign:"center"},children:v(E,{children:[l(s,{editor:a,element:i}),l(Pe,{variant:"overline",children:o}),v(Q,{close_on_otherclick:!0,button_class:Y,button_props:{size:"small",children:l(ee,{fontSize:"small"})},title:"\u5C55\u5F00",children:[l(W,{editor:a,element:i}),l(ue,{editor:a,element:i}),l(Re,{editor:a,element:i}),l(O,{editor:a,element:i}),l(Me,{editor:a,element:i}),l(Z,{editor:a,element:i})]})]})})]})})}}function _e({get_label:r=n=>u(n,"label"),surrounder:e=n=>l(w.Fragment,{children:n.children}),rightbar_extra:t=n=>l(y,{})}){return n=>{let i=n.element,a=n.editor,o=r(i),s=t;return l(he,{is_inline:!0,children:v(E,{force_direction:"row",children:[l(de,{children:l(e,{editor:a,element:i,children:n.children})}),l(L,{children:v(E,{force_direction:"row",children:[l(s,{editor:a,element:i}),v(Q,{close_on_otherclick:!0,button_class:Y,button_props:{sx:{height:"1rem",width:"1rem",margin:"0"},children:l(ee,{sx:{height:"1rem"}})},title:"\u5C55\u5F00"+(o?` / ${o}`:""),children:[l(z,{children:o}),l(W,{editor:a,element:i}),l(ue,{editor:a,element:i}),l(O,{editor:a,element:i})]})]})})]})})}}function Mr(r){let e=r.element,t=r.editor,[n,i]=w.useState(!1),[a,o]=w.useState(!1),s=l(_t,{sx:{height:"5px"},variant:"outlined"});return l(L,{children:l(mt,{children:v(Jt.Provider,{value:"row",children:[r.children,v(j,{container:!0,spacing:2,children:[l(j,{item:!0,xs:6,children:l(le,{onMouseOver:()=>i(!0),onMouseOut:()=>i(!1),children:(()=>n?l(Ue,{title:"\u5411\u4E0A\u6DFB\u52A0\u6BB5\u843D",children:l(Ve,{onClick:c=>{t.add_nodes_before(He(),e)},size:"small",variant:"outlined",fullWidth:!0,children:l(Xt,{fontSize:"small"})})}):s)()})}),l(j,{item:!0,xs:6,children:l(le,{onMouseOver:()=>o(!0),onMouseOut:()=>o(!1),children:(()=>a?l(Ue,{title:"\u5411\u4E0B\u6DFB\u52A0\u6BB5\u843D",children:l(Ve,{onClick:c=>{t.add_nodes_after(He(),e)},size:"small",variant:"outlined",fullWidth:!0,children:l(Kt,{fontSize:"small"})})}):s)()})})]})]})})})}function St({get_title:r=e=>u(e,"title")}){return e=>{let t=e.editor,n=e.element,i=r(n);return l(L,{children:l(mt,{children:v(ce,{children:[l(_t,{variant:"outlined",children:v(E,{force_direction:"row",children:[l(z,{children:i}),v(Q,{close_on_otherclick:!0,button_class:Y,button_props:{size:"small",children:l(ee,{fontSize:"small"})},title:"\u5C55\u5F00",children:[l(W,{editor:e.editor,element:e.element}),l(Z,{editor:t,element:n}),l(O,{editor:t,element:n})]})]})}),e.children]})})})}}function jr({get_label:r=n=>u(n,"label"),is_empty:e=n=>!!u(n,"url"),render_element:t=n=>l("img",{src:u(n.element,"url")})}){return n=>{let i=n.editor,a=n.element,o=r(a),s=t;return v(he,{is_inline:!0,children:[n.children,l(L,{children:v(E,{force_direction:"row",children:[e(a)?l(s,{element:a}):o,v(Q,{close_on_otherclick:!0,button_class:Y,button_props:{sx:{height:"1rem",width:"1rem",margin:"0"},children:l(ee,{sx:{height:"1rem"}})},title:"\u5C55\u5F00"+(o?` / ${o}`:""),children:[l(z,{children:o}),l(W,{editor:i,element:a}),l(Z,{editor:i,element:a}),l(O,{editor:i,element:a})]})]})})]})}}function Ir(r){return l(qt,{children:r.children})}let Lr=r=>l(he,$(f({},r),{sx:r.element.relation=="chaining"?{marginTop:"0"}:{}}));function Gr({get_label:r=i=>u(i,"label"),get_widths:e=(i,a)=>[],rightbar_extra:t=i=>l(y,{}),surrounder:n=i=>l(y,{children:i.children})}){return i=>{let a=i.element,o=i.editor,s=r(a),c=t,g=n,m=a.children,h=e(a.num_children,a);for(h=h.splice(0,m.length);h.length<m.length;)h.push(1);let p=h.reduce((x,S)=>x+S,0),[b,_]=w.useState(a.num_children);return w.useEffect(()=>{o.add_delay_operation(`${a.idx}-struct`,()=>{o.set_node(a,{num_children:b})})}),l(Lr,{element:a,children:v(E,{force_direction:"row",children:[l(j,{container:!0,columns:p,sx:{width:"100%"},children:h.map((x,S)=>l(j,{item:!0,xs:x,sx:{borderRight:S==m.length-1?"none":"1px solid"},children:l(de,{autogrow:!0,children:l(g,{editor:o,element:a,children:i.children[S]})})},S))}),l(L,{children:v(ft,{children:[l(Pe,{variant:"overline",children:s}),l(c,{editor:o,element:a}),v(Q,{close_on_otherclick:!0,button_class:Y,button_props:{size:"small",children:l(ee,{fontSize:"small"})},title:"\u5C55\u5F00",onClose:()=>{o.apply_delay_operations()},children:[l(W,{editor:o,element:a}),l(ue,{editor:o,element:a}),l(Re,{editor:o,element:a}),l(O,{editor:o,element:a}),l(Me,{editor:o,element:a,puretext:!0}),l(Z,{editor:o,element:a}),l(pt,{sx:{width:"5rem"},type:"number",label:"number of children",defaultValue:a.num_children,onChange:x=>{_(parseInt(x.target.value))}})]})]})})]})})}}class pe{constructor(e,t,n){d(this,"env_key");d(this,"context_key");d(this,"_default_val");this.env_key=e,this.context_key=t,this._default_val=n}enter_effect(e,t,n){return[t,{}]}exit_effect(e,t,n){return[t,n]}ensure_env(e){return e[this.env_key]==null&&(e[this.env_key]=this._default_val),e}get_env(e){return e=this.ensure_env(e),e[this.env_key]}set_env(e,t){return e=this.ensure_env(e),e[this.env_key]=t,e}check_context(e){return e[this.context_key]!=null}get_context(e){return e[this.context_key]}set_context(e,t){return e[this.context_key]=t,e}make_context(e){return{[this.context_key]:e}}fuse_result(e,t){let[n,i]=e,[a,o]=t;return[a,f(f({},i),o)]}enter_fuse(e,t,n){return this.fuse_result([t,n],this.enter_effect(e,t,n))}exit_fuse(e,t,n){return this.fuse_result([t,n],this.exit_effect(e,t,n))}}class ge extends pe{constructor(e,t,n=(i,a,o)=>!1){t==null&&(t=e);super(e,t,[0]);d(this,"clear_order");this.clear_order=n}enter_effect(e,t,n){t=this.ensure_env(t);let i=[...this.get_env(t)];this.clear_order(e,t)&&(i[i.length-1]=0),i[i.length-1]++;let a=[...i,0];return[this.set_env(t,a),this.make_context(i)]}exit_effect(e,t,n){let i=this.get_env(t);return i=i.slice(0,i.length-1),[this.set_env(t,i),n]}}class $t extends pe{constructor(e,t,n,i){super(e,t,{pre:[],suf:[]});d(this,"pre_inject");d(this,"suf_inject");this.pre_inject=n||(a=>l(y,{})),this.suf_inject=i||(a=>l(y,{}))}enter_effect(e,t,n){let i=this.pre_inject,a=this.suf_inject,o=this.get_env(t);return t=this.set_env(t,{pre:[...o.pre,l(i,{element:e,context:n})],suf:[...o.suf,l(a,{element:e,context:n})]}),[t,n]}exit_effect(e,t,n){return[t,n]}}class zr extends pe{constructor(e,t){super(e,t,{pre:[],suf:[]})}enter_effect(e,t,n){let i=this.get_env(t);return t=this.set_env(t,{pre:[],suf:[]}),[t,this.make_context(i)]}}class Le extends pe{constructor(e,t,n={}){t==null&&(t=e);super(e,t,[void 0,n]);d(this,"information");this.information=n}enter_effect(e,t,n){return n=this.set_context(n,this.get_env(t)),t=this.set_env(t,[void 0,{}]),[t,n]}exit_effect(e,t,n){return t=this.set_env(t,[e,this.information]),[t,n]}}function Et(r={}){return e=>{let t=e.element,n=!1;(t.type=="struct"||t.type=="group")&&(n=t.relation=="chaining");let i={marginTop:a=>gt(a.printer.margins.special,.5)};return r.small_margin&&(i={}),l(ae,$(f({sx:n?i:{}},r),{children:e.children}))}}function T({small_margin_enter:r=!1,small_margin_exit:e=!1,extra_effectors:t=[],inject_pre:n=s=>l(y,{}),inject_suf:i=s=>l(y,{}),outer:a=void 0,inner:o=s=>l(y,{children:s.children})}){let s=a||Et({small_margin:r}),c=o,g=new $t("global-injector","global-injector",n,i),m=new Le("global-brother","global-brother",{small_margin:e});return{render_func:h=>{let p=h.element;return l(s,{element:p,context:h.context,children:l(c,{element:p,context:h.context,children:h.children})})},enter_effect:(h,p)=>{let b=[p,{}];for(let _ of t)b=_(h).enter_fuse(h,b[0],b[1]);return b=g.enter_fuse(h,b[0],b[1]),b=m.enter_fuse(h,b[0],b[1]),b},exit_effect:(h,p,b)=>{let _=[p,b];for(let x of t)_=x(h).exit_fuse(h,_[0],_[1]);return _=g.exit_fuse(h,_[0],_[1]),_=m.exit_fuse(h,_[0],_[1]),_}}}function Wr({small_margin_enter:r=!1,small_margin_exit:e=!1,get_widths:t=c=>[],extra_effectors:n=[],inject_pre:i=c=>l(y,{}),inject_suf:a=c=>l(y,{}),outer:o=void 0,inner:s=c=>l(y,{children:c.children})}){let c=o||Et({small_margin:r}),g=s,m=new $t("global-injector","global-injector",i,a),h=new Le("global-brother","global-brother",{small_margin:e});return{render_func:p=>{let b=p.element,_=p.children,x=t(b);for(x=x.splice(0,_.length);x.length<_.length;)x.push(1);let S=x.reduce((R,A)=>R+A,0);return l(c,{element:b,context:p.context,children:l(j,{container:!0,columns:S,children:x.map((R,A)=>l(j,{item:!0,xs:R,sx:{align:"center"},children:l(g,{element:b,context:p.context,children:p.children[A]})},A))})})},enter_effect:(p,b)=>{let _=[b,{}];for(let x of n)_=x(p).enter_fuse(p,_[0],_[1]);return _=m.enter_fuse(p,_[0],_[1]),_=h.enter_fuse(p,_[0],_[1]),_},exit_effect:(p,b,_)=>{let x=[b,_];for(let S of n)x=S(p).exit_fuse(p,x[0],x[1]);return x=m.exit_fuse(p,x[0],x[1]),x=h.exit_fuse(p,x[0],x[1]),x}}}function Or(){let r=new zr("global-injector","global-injector"),e=new Le("global-brother","global-brother");return{render_func:t=>{let n=t.context;if(!(r.check_context(n)&&e.get_context(n)))return l(Se,{});let i=r.get_context(n),[a,o]=e.get_context(n)||[void 0,void 0],s=o&&o.small_margin,c=a!=null&&(a.type=="group"||a.type=="struct");return v(Se,{sx:c?{marginTop:s?m=>m.printer.margins.paragraph:m=>m.printer.margins.special}:{},children:[Object.keys(i.pre).map(m=>l(w.Fragment,{children:i.pre[m]},m)),t.children,Object.keys(i.suf).map(m=>l(w.Fragment,{children:i.suf[m]},m)),l("br",{})]})},enter_effect:(t,n)=>{let i=[n,{}];return i=r.enter_fuse(t,i[0],i[1]),i=e.enter_fuse(t,i[0],i[1]),i},exit_effect:(t,n,i)=>{let a=[n,i];return a=r.exit_fuse(t,a[0],a[1]),a=e.exit_fuse(t,a[0],a[1]),a}}}function te({extra_effectors:r=[],outer:e=t=>l("span",{children:t.children})}){let t=e;return{render_func:n=>{let i=n.element;return l(t,{element:i,context:n.context,children:n.children})},enter_effect:(n,i)=>{let a=[i,{}];for(let o of r)a=o(n).enter_fuse(n,a[0],a[1]);return a},exit_effect:(n,i,a)=>{let o=[i,a];for(let s of r)o=s(n).exit_fuse(n,o[0],o[1]);return o}}}function $e(r,e){return e==null&&(e=["\u3007","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D"]),`${r}`.split("").map(t=>e[Number(t)]).join("")}const Ur="modulepreload",qe={},Vr="/",Hr=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${Vr}${n}`,n in qe)return;qe[n]=!0;const i=n.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":Ur,i||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),i)return new Promise((s,c)=>{o.addEventListener("load",s),o.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())};let kt="_MATHJAX_INLINE_START",Ct="_MATHJAX_INLINE_END",At="_MATHJAX_BLOCK_START",Bt="_MATHJAX_BLOCK_END";var Jr=new Zt(()=>{let r=window.MathJax;r!=null&&r.typesetPromise!=null&&(r.typesetPromise(),r.texReset())},3e3);function Dt(){Jr.go()}function In(r){return w.useEffect(()=>{let e=oe(`
            
            <script defer>
                MathJax = {
                    

                    tex: {
                        packages: {"[+]": ["tagformat"]} , 
                        inlineMath: [["${kt}", "${Ct}"]] , 
                        displayMath: [["${At}", "${Bt}"]] , 
                        tags: "ams" , 
                        
                    },
                    svg: {
                        fontCache: "global" , 
                        scale: 0.9 , 
                    } , 
                    ignoreHtmlClass: "mathjax_ignore" , 
                    processHtmlClass: "mathjax_process" , 
                    preRemoveClass: "mathjax_preview" , 
                }
            <\/script>
        `);return Hr(()=>import("./tex-svg.89c94f6f.js"),[]),oe("head").append(e),()=>{e.remove()}},[]),l(w.Fragment,{children:r.children})}function Xr(r){return w.useEffect(()=>{Dt()},[r.children]),v("span",{className:"mathjax_process",children:[kt,r.children,Ct]})}function Kr(r){return w.useEffect(()=>{Dt()},[r.children]),v("div",{className:"mathjax_process",children:[At,r.children,Bt]})}function Ge(r,e){return e=="chinese"?$e(r):e=="arab"?`${r}`:e=="arab-circle"?r>0&&r<=20?["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246A","\u246B","\u246C","\u246D","\u246E","\u246F","\u2470","\u2471","\u2472","\u2473"][r-1]:`(${r})`:e=="chinese-bracket"?`\u3010${$e(r)}\u3011`:e=="number-bracket"?`[${r}]`:""}var qr=(()=>T({outer:e=>{let t=u(e.element,"title");return v(ae,{children:[l(ae,{subtitle_like:!0,children:t}),e.children]})}}))(),Zr=(()=>{let r=t=>new ge(`order/${u(t,"label")}`,`order/${u(t,"label")}`);return T({extra_effectors:[r],inject_pre:t=>{let n=r(t.element).get_context(t.context),i=n[n.length-1],a=u(t.element,"title"),o=u(t.element,"prefix"),s=Ge(i,u(t.element,"ordering")),c=`${a}`;return s&&(c=c+` ${s}`),o&&(c=c+` \uFF08${o}\uFF09`),l(k,{inline:!0,children:c})},outer:t=>l(ae,{subtitle_like:!0,children:t.children})})})(),Qr=(()=>{let r=e=>new ge(`order/${u(e,"label")}`,`order/${u(e,"label")}`);return T({extra_effectors:[r],inject_pre:e=>{let t=u(e.element,"prefix");return t?l(k,{inline:!0,children:t}):l(y,{})},inject_suf:e=>{let t=u(e.element,"suffix");return t?l(k,{inline:!0,leftmargin:!0,children:t}):l(y,{})},inner:e=>{let t=u(e.element,"title"),n=u(e.element,"close"),i=r(e.element).get_context(e.context),a=Ge(i,u(e.element,"ordering")),o=`${t}`;return a&&(o=o+` ${a}`),v(E,{force_direction:"column",children:[o?l(k,{children:o}):l(y,{}),l(Qt,{children:l(Yt,{children:e.children})}),n?l(k,{children:n}):l(y,{})]})}})})(),Yr=(()=>{let r=e=>new ge(`order/${u(e,"label")}`,`order/${u(e,"label")}`,t=>u(t,"clustering")&&t.relation=="separating");return T({small_margin_enter:!0,extra_effectors:[r],inject_pre:e=>{let t=u(e.element,"prefix");return t?l(k,{inline:!0,children:t}):l(y,{})},inject_suf:e=>{let t=u(e.element,"suffix");return t?l(k,{inline:!0,leftmargin:!0,children:t}):l(y,{})},inner:e=>{let t=u(e.element,"title"),n=u(e.element,"close"),i=r(e.element).get_context(e.context),a=Ge(i,u(e.element,"ordering")),o=`${t}`;return a&&(o=o+` ${a}`),l(w.Fragment,{children:v(E,{force_direction:"column",children:[v(E,{children:[v(er,{children:[" ",o?l(Se,{children:o}):l(y,{})]}),l(le,{children:e.children})]}),n?l(k,{children:n}):l(y,{})]})})}})})(),en=(()=>T({inner:r=>{let e=u(r.element,"title"),t=u(r.element,"close");return v(E,{force_direction:"column",children:[e?l(k,{children:e}):l(y,{}),l(xt,{align:"center",children:r.children}),t?l(k,{align:"right",children:t}):l(y,{})]})}}))(),tn=(()=>T({inner:r=>l("pre",{children:r.children})}))(),rn=(()=>T({inner:r=>l(E,{force_direction:"column",children:l(xt,{sx:{fontSize:e=>gt(e.printer.typography.structure.fontSize,2)},children:r.children})})}))(),nn=(()=>{let r=new ge("order/section","order/section");return{render_func:e=>{let t=r.get_context(e.context),n=e.element,i=u(n,"title"),o=u(n,"alone")?l(y,{}):v(k,{inline:!0,children:["\u7B2C",$e(t),"\u8282"]});return v(ce,{children:[o,i?l(k,{inline:!0,sx:{marginRight:0},children:i}):l(y,{})]})},enter_effect:(e,t)=>{let n=[t,{}];return n=r.enter_fuse(e,n[0],n[1]),n},exit_effect:(e,t,n)=>{let i=[t,n];return i=r.exit_fuse(e,i[0],i[1]),i}}})(),ln=(()=>tr(r=>l(ce,{})))(),an=(()=>te({outer:r=>l("strong",{children:r.children})}))(),on=(()=>Wr({small_margin_enter:!0,small_margin_exit:!0,get_widths:r=>u(r,"widths").split(",").map(e=>e==""?1:parseInt(e))}))(),sn=(()=>te({outer:r=>l("del",{children:r.children})}))(),un=(()=>te({outer:r=>l(le,{component:"span",sx:{paddingX:"0.1rem"},children:l(Xr,{children:vt.string(r.element)})})}))(),cn=(()=>T({inner:r=>{let e=vt.string(r.element),t=u(r.element,"suffix"),n=u(r.element,"close"),i=u(r.element,"environ"),a=i?`\\begin{${i}}`:"",o=i?`\\end{${i}}`:"";return e=`${a}${e}\\text{${t}}${o}`,v(w.Fragment,{children:[r.context.anchor,l(Kr,{children:e}),n]})}}))(),dn=(()=>te({outer:r=>{let e=u(r.element,"type"),t=u(r.element,"target"),[n,i]=w.useState("");w.useEffect(()=>{(async()=>{if(e=="internal"){let s=await je.get.resource_info(t);s.url?i(bt(s.url)):i("")}else i(t)})()},[r.element]);let a=u(r.element,"width"),o=u(r.element,"height");return l("img",{src:n||void 0,style:{width:a>0?`${a}rem`:"100%",height:o>0?`${o}rem`:"100%"}})}}))(),hn=(()=>te({outer:r=>{let e=u(r.element,"target"),t=u(r.element,"type"),n=u(r.element,"autotext");if(t=="index"){let i=Number(e);return l(rr.Consumer,{children:a=>{let o=a.root,s=nr(o,i),c=r.children;if(n){let g=Je(o,i);g&&Xe(g)&&u(g,"label")!=null&&(c=`\u6B64 ${u(g,"label")}`)}return l(Fe,{component:"button",onClick:g=>{a.printer_component.scroll_to(s)},children:l(z,{children:c})})}})}if(t=="http"){let i=r.children;return n&&(i="\u6B64 \u9875\u9762"),l(Fe,{href:e,children:i})}if(t=="outer-index"){let[i,a]=e.split(":"),[o,s]=[Number(i),Number(a)],[c,g]=w.useState(void 0);if(I.exports.useEffect(()=>{je.get.content(o).then(h=>{g(h)})},[]),c==null)return l(y,{});let m=r.children;if(n){let h=Je(c,s);h&&Xe(h)&&u(h,"label")!=null&&(m=`\u6B64 ${u(h,"label")}`)}return l(Fe,{href:ir.view.content(o,{linkto:s}),children:m})}}}))(),fn=Or(),mn=Ir,_n=Ft({}),pn=Ft({get_label:r=>`\u6B21\u8282\uFF1A${u(r,"title")}`}),gn=U({}),xn=U({}),vn=U({}),bn=U({}),yn=U({rightbar_extra:r=>{let e={variant:"standard",sx:{width:"2rem",marginBottom:"0.5rem",hright:"1rem"}},t=l(z,{sx:{fontSize:"0.7rem"},children:"extra"}),n=u(r.element,"suffix");return l(w.Fragment,{children:l(pt,$(f({},e),{label:t,defaultValue:n,onChange:i=>{let a=i.target.value,o=r.element;r.editor.auto_set_parameter(o,{suffix:{type:"string",val:a}})}}))})}});let wn=U({});var Fn=Mr,Sn=St({get_title:r=>u(r,"title")}),$n=St({get_title:()=>"\u7AE0\u8282"}),En=_e({}),kn=_e({surrounder:r=>l("del",{children:r.children})}),Cn=_e({surrounder:r=>l("u",{children:r.children})}),An=_e({surrounder:r=>l(y,{children:r.children})}),Bn=jr({get_label:()=>"\u56FE\u7247",is_empty:r=>!!u(r,"target"),render_element:r=>{let[e,t]=w.useState(""),n=u(r.element,"target"),i=u(r.element,"type");w.useEffect(()=>{(async()=>{if(i=="internal"){let s=await je.get.resource_info(n);s.url?t(bt(s.url)):t("")}else t(n)})()});let a=u(r.element,"width"),o=u(r.element,"height");return l("img",{src:e||void 0,style:{width:a>0?`${a}rem`:"100%",height:o>0?`${o}rem`:"100%"}})}}),Dn=Gr({get_label:r=>u(r,"label"),get_widths:(r,e)=>u(e,"widths").split(",").map(t=>t==""?1:parseInt(t))});let ne="string",Tn="choice";function F(r){return Object.keys(r).reduce((e,t)=>$(f({},e),{[t]:{type:typeof r[t],val:r[t]}}),{})}var V={label:"\u663E\u793A\u7684\u540D\u79F0"},N={prefix:{val:"",type:ne},suffix:{val:"",type:ne},title:{val:"",type:ne},close:{val:"",type:ne},ordering:{val:"chinese",type:Tn,choices:["chinese","arab","arab-circle","chinese-bracket","number-bracket","none"]}},P=$(f({},V),{prefix:"\u6587\u672C\u524D\u7F00",suffix:"\u6587\u672C\u540E\u7F00",title:"\u5165",close:"\u51FA",ordering:"\u7F16\u53F7\u683C\u5F0F"}),Ze=new D("\u662D\u8A00",f(f({},N),F({label:"\u662D\u8A00"})),f({},P)),Qe=new D("\u968F\u8A00",f(f({},N),F({label:"\u968F\u8A00"})),f({},P));let Ye=new D("\u5C5E\u8A00",f(f({},N),F({label:"\u5C5E\u8A00",clustering:!0})),$(f({},P),{clustering:"\u662F\u5426\u53EA\u5728\u8FDE\u7F00\u7684\u65F6\u5019\u8BBE\u7F6E\u7F16\u53F7"}));var et=new Nr("\u9F50\u8A00",f(f({},N),F({label:"\u9F50\u8A00",widths:"1"})),$(f({},P),{widths:"\uFF08\u76F8\u5BF9\uFF09\u5BBD\u5EA6\u5217\u8868\uFF0C\u7528\u9017\u53F7\u5206\u9694"})),tt=new Pr("\u7A46\u8A00",{},{}),rt=new D("\u6570\u5B66\u8A00",f(f({},N),F({label:"\u6570\u5B66",environ:"align"})),$(f({},P),{environ:"\u73AF\u5883"})),nt=new D("\u88F1\u793A",f(f({},N),F({label:"\u88F1\u793A"})),f({},P)),it=new D("\u5F70\u793A",f(f({},N),F({label:"\u5F70\u793A"})),f({},P)),lt=new D("\u683C\u793A",f(f({},N),F({label:"\u683C\u793A"})),f({},P)),at=new fe("\u5F3A\u8C03",F({label:"\u5F3A\u8C03"}),f({},V)),ot=new fe("\u520A\u8C03",F({label:"\u520A\u8C03"}),f({},V));let st=new fe("\u94FE\u8C03",$(f({},F({label:"\u94FE\u63A5",target:"",autotext:!1})),{type:{val:"index",type:"choice",choices:["index","outer-index","http"]}}),$(f({},V),{target:"\u5982\u4F55\u67E5\u627E\u76EE\u6807",type:"\u76EE\u6807\u683C\u5F0F\uFF08 index / outer-index / http \uFF09",autotext:"\u662F\u5426\u81EA\u52A8\u786E\u5B9A\u6587\u672C\u3002"}));var ut=new me("\u56FE\u8C03",$(f({},F({label:"\u56FE\u7247",target:"",width:10,height:-1})),{type:{val:"internal",type:"choice",choices:["internal","http"]}}),$(f({},V),{target:"\u5982\u4F55\u67E5\u627E\u76EE\u6807",type:"\u76EE\u6807\u683C\u5F0F\uFF08 internal / http \uFF09",width:"\u56FE\u7247\u5BBD\u5EA6\uFF08rem\uFF09",height:"\u56FE\u7247\u9AD8\u5EA6\uFF08rem\uFF09"}),{forceInline:!0}),ct=new fe("\u6570\u5B66\u8C03",F({label:"\u6570\u5B66"}),f({},V)),J=new me("\u65B0\u6BB5",F({})),X=new D("\u6B21\u8282",F({label:"\u6B21\u8282",title:""})),K=new me("\u5C0F\u8282\u7EBF",F({label:"\u5C0F\u8282",title:"",alone:!1})),q=new me("\u7AE0\u8282\u7EBF",F({label:"\u7AE0"})),B={[Ze.name]:[Ze,_n,Zr],[Qe.name]:[Qe,xn,Qr],[nt.name]:[nt,vn,en],[it.name]:[it,bn,rn],[tt.name]:[tt,void 0,void 0],[J.name]:[J,Fn,void 0],[K.name]:[K,Sn,nn],[q.name]:[q,$n,ln],[at.name]:[at,En,an],[et.name]:[et,Dn,on],[ut.name]:[ut,Bn,dn],[ot.name]:[ot,kn,sn],[st.name]:[st,Cn,hn],[Ye.name]:[Ye,wn,Yr],[ct.name]:[ct,An,un],[rt.name]:[rt,yn,cn],[lt.name]:[lt,gn,tn],[X.name]:[X,pn,qr]};function Ln(r){for(let e in B){let t=B[e][0];r.add_style(t)}return r}function Gn(r){for(let e in B){let t=B[e][0];if(t.type=="abstract")continue;let n=B[e][2];r.set(n,t.type,t.name)}return r.set(fn,"paragraph"),r}function zn(r){for(let e in B){let t=B[e][0];if(t.type=="abstract")continue;let n=B[e][1];r.set(n,t.type,t.name)}return r.set(mn,"paragraph"),r}function Wn(r){return r.support[J.name]=ie(J.name,J.name,{},{}),r.support[K.name]=ie(K.name,K.name,{},{}),r.support[q.name]=ie(q.name,q.name,{},{}),r.group[X.name]=ie(X.name,X.name,{},{}),r}function ie(r,e,t,n){let[i,a,o]=B[r];return new Rr(e,i,t,n)}function On(r,e){oe(document).ready(()=>{let t=oe(`#yconcept-${e}`);if(!t||t.length<=0)return;t[0].scrollIntoView({behavior:"smooth",block:"center"});let n=t.next();!n||n.css({border:"2px solid #ccbb44"})})}const Un={palette:{divider:"#00000077",primary:{main:"#111111"}},printer:{margins:{paragraph:"0.4rem",special:"1.0rem",colon:"1rem",level:"2rem"},typography:{body:{fontFamily:"STXihei"},title:{fontFamily:"SimHei"},structure:{fontFamily:"SimHei"},display:{fontFamily:"KaiTi"},weaken:{fontFamily:"FangSong"}}}};export{Mn as E,Fe as L,In as M,jn as S,zn as a,Gn as b,Wn as c,ie as d,q as e,On as l,Un as m,$e as n,K as s,Ln as w};
