var st=Object.defineProperty;var ct=(t,e,n)=>e in t?st(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>(ct(t,typeof e!="symbol"?e+"":e,n),n);import{r as h,j as i,u as _e,B as z,A as we,b as P,c as lt,a as R,T as ut,I as H,d as xe,e as ke,g as dt,s as Ye,P as pt,E as ft,f as ht,F as mt,h as gt,i as vt,S as xt,G as Ct,k as kt,R as Et}from"./titleword.80f09066.js";import{T as Ge,u as ze,g as Ee,P as Oe,o as Ze,r as bt,M as _t,p as wt,f as yt,a as St,d as Dt,e as Tt,b as At}from"./index.a5a03aa2.js";import{m as he,f as Ft,M as It}from"./theme.9845efad.js";import{c as J,S as ye}from"./createSvgIcon.7d4a579a.js";import{g as Pe,a as Be,s as U,_ as C,u as Ne,d as Lt,b as pe,c as Je,e as W,f as $e,r as Mt,h as be,B as Z,L as Rt,i as zt,j as Ot}from"./Link.5d48f27c.js";import{I as Se}from"./useFormControl.1e9c034b.js";import{d as Pt,C as Bt,T as He,P as Nt,B as $t}from"./TextField.7c96acb9.js";import{S as Vt}from"./Save.63c0a756.js";import{T as Ht,C as Wt}from"./overlayscrollbars.597285b7.js";import"./Divider.84bc2f41.js";function jt(t){return Pe("MuiCollapse",t)}Be("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const qt=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Ut=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return $e(r,jt,n)},Kt=U("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>C({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&C({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),Xt=U("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>C({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Yt=U("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>C({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Qe=h.exports.forwardRef(function(e,n){const r=Ne({props:e,name:"MuiCollapse"}),{addEndListener:o,children:a,className:s,collapsedSize:c="0px",component:d,easing:u,in:l,onEnter:m,onEntered:g,onEntering:y,onExit:T,onExited:E,onExiting:v,orientation:A="vertical",style:L,timeout:x=Lt.standard,TransitionComponent:S=Ge}=r,b=pe(r,qt),D=C({},r,{orientation:A,collapsedSize:c}),_=Ut(D),Q=ze(),M=h.exports.useRef(),w=h.exports.useRef(null),j=h.exports.useRef(),N=typeof c=="number"?`${c}px`:c,K=A==="horizontal",q=K?"width":"height";h.exports.useEffect(()=>()=>{clearTimeout(M.current)},[]);const ee=h.exports.useRef(null),ce=Je(n,ee),$=p=>F=>{if(p){const B=ee.current;F===void 0?p(B):p(B,F)}},f=()=>w.current?w.current[K?"clientWidth":"clientHeight"]:0,I=$((p,F)=>{w.current&&K&&(w.current.style.position="absolute"),p.style[q]=N,m&&m(p,F)}),oe=$((p,F)=>{const B=f();w.current&&K&&(w.current.style.position="");const{duration:X,easing:te}=Ee({style:L,timeout:x,easing:u},{mode:"enter"});if(x==="auto"){const Ve=Q.transitions.getAutoHeightDuration(B);p.style.transitionDuration=`${Ve}ms`,j.current=Ve}else p.style.transitionDuration=typeof X=="string"?X:`${X}ms`;p.style[q]=`${B}px`,p.style.transitionTimingFunction=te,y&&y(p,F)}),fe=$((p,F)=>{p.style[q]="auto",g&&g(p,F)}),Te=$(p=>{p.style[q]=`${f()}px`,T&&T(p)}),Ae=$(E),Fe=$(p=>{const F=f(),{duration:B,easing:X}=Ee({style:L,timeout:x,easing:u},{mode:"exit"});if(x==="auto"){const te=Q.transitions.getAutoHeightDuration(F);p.style.transitionDuration=`${te}ms`,j.current=te}else p.style.transitionDuration=typeof B=="string"?B:`${B}ms`;p.style[q]=N,p.style.transitionTimingFunction=X,v&&v(p)});return i(S,C({in:l,onEnter:I,onEntered:fe,onEntering:oe,onExit:Te,onExited:Ae,onExiting:Fe,addEndListener:p=>{x==="auto"&&(M.current=setTimeout(p,j.current||0)),o&&o(ee.current,p)},nodeRef:ee,timeout:x==="auto"?null:x},b,{children:(p,F)=>i(Kt,C({as:d,className:W(_.root,s,{entered:_.entered,exited:!l&&N==="0px"&&_.hidden}[p]),style:C({[K?"minWidth":"minHeight"]:N},L),ownerState:C({},D,{state:p}),ref:ce},F,{children:i(Xt,{ownerState:C({},D,{state:p}),className:_.wrapper,ref:w,children:i(Yt,{ownerState:C({},D,{state:p}),className:_.wrapperInner,children:a})})}))}))});Qe.muiSupportAuto=!0;var Gt=Qe;function Zt(t){return Pe("MuiCard",t)}Be("MuiCard",["root"]);const Jt=["className","raised"],Qt=t=>{const{classes:e}=t;return $e({root:["root"]},Zt,e)},en=U(Oe,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),tn=h.exports.forwardRef(function(e,n){const r=Ne({props:e,name:"MuiCard"}),{className:o,raised:a=!1}=r,s=pe(r,Jt),c=C({},r,{raised:a}),d=Qt(c);return i(en,C({className:W(d.root,o),elevation:a?8:void 0,ref:n,ownerState:c},s))});var nn=tn;const rn=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function on(t,e,n){const r=e.getBoundingClientRect(),o=n&&n.getBoundingClientRect(),a=Ze(e);let s;if(e.fakeTransform)s=e.fakeTransform;else{const u=a.getComputedStyle(e);s=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("transform")}let c=0,d=0;if(s&&s!=="none"&&typeof s=="string"){const u=s.split("(")[1].split(")")[0].split(",");c=parseInt(u[4],10),d=parseInt(u[5],10)}return t==="left"?o?`translateX(${o.right+c-r.left}px)`:`translateX(${a.innerWidth+c-r.left}px)`:t==="right"?o?`translateX(-${r.right-o.left-c}px)`:`translateX(-${r.left+r.width-c}px)`:t==="up"?o?`translateY(${o.bottom+d-r.top}px)`:`translateY(${a.innerHeight+d-r.top}px)`:o?`translateY(-${r.top-o.top+r.height-d}px)`:`translateY(-${r.top+r.height-d}px)`}function an(t){return typeof t=="function"?t():t}function me(t,e,n){const r=an(n),o=on(t,e,r);o&&(e.style.webkitTransform=o,e.style.transform=o)}const sn=h.exports.forwardRef(function(e,n){const r=ze(),o={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:c=!0,children:d,container:u,direction:l="down",easing:m=o,in:g,onEnter:y,onEntered:T,onEntering:E,onExit:v,onExited:A,onExiting:L,style:x,timeout:S=a,TransitionComponent:b=Ge}=e,D=pe(e,rn),_=h.exports.useRef(null),Q=Je(d.ref,_,n),M=f=>I=>{f&&(I===void 0?f(_.current):f(_.current,I))},w=M((f,I)=>{me(l,f,u),bt(f),y&&y(f,I)}),j=M((f,I)=>{const oe=Ee({timeout:S,style:x,easing:m},{mode:"enter"});f.style.webkitTransition=r.transitions.create("-webkit-transform",C({},oe)),f.style.transition=r.transitions.create("transform",C({},oe)),f.style.webkitTransform="none",f.style.transform="none",E&&E(f,I)}),N=M(T),K=M(L),q=M(f=>{const I=Ee({timeout:S,style:x,easing:m},{mode:"exit"});f.style.webkitTransition=r.transitions.create("-webkit-transform",I),f.style.transition=r.transitions.create("transform",I),me(l,f,u),v&&v(f)}),ee=M(f=>{f.style.webkitTransition="",f.style.transition="",A&&A(f)}),ce=f=>{s&&s(_.current,f)},$=h.exports.useCallback(()=>{_.current&&me(l,_.current,u)},[l,u]);return h.exports.useEffect(()=>{if(g||l==="down"||l==="right")return;const f=Pt(()=>{_.current&&me(l,_.current,u)}),I=Ze(_.current);return I.addEventListener("resize",f),()=>{f.clear(),I.removeEventListener("resize",f)}},[l,g,u]),h.exports.useEffect(()=>{g||$()},[g,$]),i(b,C({nodeRef:_,onEnter:w,onEntered:N,onEntering:j,onExit:q,onExited:ee,onExiting:K,addEndListener:ce,appear:c,in:g,timeout:S},D,{children:(f,I)=>h.exports.cloneElement(d,C({ref:Q,style:C({visibility:f==="exited"&&!g?"hidden":void 0},x,d.props.style)},I))}))});var et=sn;function cn(t){return Pe("MuiDrawer",t)}Be("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const ln=["BackdropProps"],un=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],tt=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},dn=t=>{const{classes:e,anchor:n,variant:r}=t,o={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${be(n)}`,r!=="temporary"&&`paperAnchorDocked${be(n)}`]};return $e(o,cn,e)},pn=U(_t,{name:"MuiDrawer",slot:"Root",overridesResolver:tt})(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer})),We=U("div",{shouldForwardProp:Mt,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:tt})({flex:"0 0 auto"}),fn=U(Oe,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${be(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${be(n.anchor)}`]]}})(({theme:t,ownerState:e})=>C({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},e.anchor==="left"&&{left:0},e.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="right"&&{right:0},e.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="left"&&e.variant!=="temporary"&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="top"&&e.variant!=="temporary"&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="right"&&e.variant!=="temporary"&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="bottom"&&e.variant!=="temporary"&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})),nt={left:"right",right:"left",top:"down",bottom:"up"};function hn(t){return["left","right"].indexOf(t)!==-1}function mn(t,e){return t.direction==="rtl"&&hn(e)?nt[e]:e}const gn=h.exports.forwardRef(function(e,n){const r=Ne({props:e,name:"MuiDrawer"}),o=ze(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:c,children:d,className:u,elevation:l=16,hideBackdrop:m=!1,ModalProps:{BackdropProps:g}={},onClose:y,open:T=!1,PaperProps:E={},SlideProps:v,TransitionComponent:A=et,transitionDuration:L=a,variant:x="temporary"}=r,S=pe(r.ModalProps,ln),b=pe(r,un),D=h.exports.useRef(!1);h.exports.useEffect(()=>{D.current=!0},[]);const _=mn(o,s),M=C({},r,{anchor:s,elevation:l,open:T,variant:x},b),w=dn(M),j=i(fn,C({elevation:x==="temporary"?l:0,square:!0},E,{className:W(w.paper,E.className),ownerState:M,children:d}));if(x==="permanent")return i(We,C({className:W(w.root,w.docked,u),ownerState:M,ref:n},b,{children:j}));const N=i(A,C({in:T,direction:nt[_],timeout:L,appear:D.current},v,{children:j}));return x==="persistent"?i(We,C({className:W(w.root,w.docked,u),ownerState:M,ref:n},b,{children:N})):i(pn,C({BackdropProps:C({},c,g,{transitionDuration:L}),className:W(w.root,w.modal,u),open:T,ownerState:M,onClose:y,hideBackdrop:m,ref:n},b,S,{children:N}))});var vn=gn,xn=J([i("circle",{cx:"17",cy:"4.54",r:"2"},"0"),i("path",{d:"M14 17h-2c0 1.65-1.35 3-3 3s-3-1.35-3-3 1.35-3 3-3v-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5zm3-3.5h-1.86l1.67-3.67C17.42 8.5 16.44 7 14.96 7h-5.2c-.81 0-1.54.47-1.87 1.2L7.22 10l1.92.53L9.79 9H12l-1.83 4.1c-.6 1.33.39 2.9 1.85 2.9H17v5h2v-5.5c0-1.1-.9-2-2-2z"},"1")],"AccessibleForward"),Cn=J(i("path",{d:"m22.25 14.29-.69 1.89L9.2 11.71l2.08-5.66 8.56 3.09c2.1.76 3.18 3.06 2.41 5.15zM1.5 12.14 8 14.48V19h8v-1.63L20.52 19l.69-1.89-19.02-6.86-.69 1.89zm5.8-1.94c1.49-.72 2.12-2.51 1.41-4C7.99 4.71 6.2 4.08 4.7 4.8c-1.49.71-2.12 2.5-1.4 4 .71 1.49 2.5 2.12 4 1.4z"}),"AirlineSeatFlatAngled"),kn=J(i("path",{d:"M6 6.5c.31 0 .7.15.9.56.24.5.02 1.1-.47 1.34-.14.06-.28.1-.43.1-.3 0-.7-.15-.89-.56-.17-.34-.1-.63-.05-.78.05-.14.18-.4.51-.56.14-.06.28-.1.43-.1m6.47 2.11 6.69 2.41c.52.19.93.56 1.15 1.05.22.48.25 1.03.06 1.53l-.01.02-8.59-3.11.7-1.9M10 15.19l4 1.44V17h-4v-1.81M6 4.5c-.44 0-.88.1-1.3.3-1.49.71-2.12 2.5-1.4 4 .51 1.07 1.58 1.7 2.7 1.7.44 0 .88-.1 1.3-.3 1.49-.72 2.12-2.51 1.41-4C8.19 5.13 7.12 4.5 6 4.5zm5.28 1.55L9.2 11.71l12.36 4.47.69-1.89c.77-2.09-.31-4.39-2.41-5.15l-8.56-3.09zm-9.09 4.2-.69 1.89L8 14.48V19h8v-1.63L20.52 19l.69-1.89-19.02-6.86z"}),"AirlineSeatFlatAngledOutlined"),En=J([i("circle",{cx:"12.5",cy:"4.5",r:"2"},"0"),i("path",{d:"m19.77 17.72-.64-6.37c-.07-.77-.72-1.35-1.49-1.35H16c-1.5-.02-2.86-.54-3.76-1.44l-2-1.98C10.08 6.42 9.62 6 8.83 6c-.51 0-1.02.2-1.41.59L4.08 9.91c-.53.68-.51 1.57-.21 2.13l1.43 2.8-3.15 4.05 1.57 1.24L7.4 15.4l-.17-1.36.77.71V20h2v-6.12l-2.12-2.12 2.36-2.36c.94.94 1.72 1.82 3.59 2.32L13 20h1.5l.41-3.5h3.18l.14 1.22c-.44.26-.73.74-.73 1.28 0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5c0-.54-.29-1.02-.73-1.28zM15.09 15l.41-3.5h2l.41 3.5h-2.82z"},"1")],"AssistWalker"),bn=J(i("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),_n=J(i("path",{d:"M18.41 5.8 17.2 4.59c-.78-.78-2.05-.78-2.83 0l-2.68 2.68L3 15.96V20h4.04l8.74-8.74 2.63-2.63c.79-.78.79-2.05 0-2.83zM6.21 18H5v-1.21l8.66-8.66 1.21 1.21L6.21 18zM11 20l4-4h6v4H11z"}),"DriveFileRenameOutline"),rt=J(i("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10zM8 13.01l1.41 1.41L11 12.84V17h2v-4.16l1.59 1.59L16 13.01 12.01 9 8 13.01z"}),"DriveFolderUpload"),wn=J(i("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"}),"FileCopy"),yn=J(i("path",{d:"M9.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5.75 8.9 3 23h2.1l1.75-8L9 17v6h2v-7.55L8.95 13.4l.6-3C10.85 12 12.8 13 15 13v-2c-1.85 0-3.45-1-4.35-2.45l-.95-1.6C9.35 6.35 8.7 6 8 6c-.25 0-.5.05-.75.15L2 8.3V13h2V9.65l1.75-.75M13 2v7h3.75v14h1.5V9H22V2h-9zm5.01 6V6.25H14.5v-1.5h3.51V3l2.49 2.5L18.01 8z"}),"FollowTheSigns");function De(t){let e=t.Icon;return i(Z,{sx:{marginLeft:"0.35rem",marginRight:"0.25rem",marginTop:"0.35rem"},children:i(we,{title:t.title,children:i(Rt,{underline:"hover",href:t.href,children:i(e,{fontSize:"small",color:"primary"})})})})}function Sn(t){return i(De,{title:"\u540E\u53F0\u9875\u9762",href:_e(`/admin/articlezone/node/${z.node_id}/change/`),Icon:yn})}function Dn(t){return i(De,{title:"\u7F16\u8F91\u5B50\u8282\u70B9\u7ED3\u6784",href:_e(`/edit/structure/${z.node_id}`),Icon:Cn})}function Tn(t){return i(De,{title:"\uFF08\u6D45\uFF09\u7F16\u8F91\u5B50\u8282\u70B9\u7ED3\u6784",href:_e(`/edit/shallow_structure/${z.node_id}`),Icon:kn})}function An(t){return i(De,{title:"\u9884\u89C8\u9875\u9762\uFF08\u6709\u4EC0\u4E48\u5FC5\u8981\u5417\uFF09",href:_e(`/view/content/${z.node_id}`),Icon:xn})}function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Fn(t,e,n){return e&&je(t.prototype,e),n&&je(t,n),t}function k(){return k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k.apply(this,arguments)}function In(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function re(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function qe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var ot=R.createContext(),Ln={mui:{root:{},anchorOriginTopCenter:{},anchorOriginBottomCenter:{},anchorOriginTopRight:{},anchorOriginBottomRight:{},anchorOriginTopLeft:{},anchorOriginBottomLeft:{}},container:{containerRoot:{},containerAnchorOriginTopCenter:{},containerAnchorOriginBottomCenter:{},containerAnchorOriginTopRight:{},containerAnchorOriginBottomRight:{},containerAnchorOriginTopLeft:{},containerAnchorOriginBottomLeft:{}}},Y={view:{default:20,dense:4},snackbar:{default:6,dense:2}},ae={maxSnack:3,dense:!1,hideIconVariant:!1,variant:"default",autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:et,transitionDuration:{enter:225,exit:195}},ue=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Mn=function(e){return""+ue(e.vertical)+ue(e.horizontal)},Rn=function(e){return Object.keys(e).filter(function(n){return!Ln.container[n]}).reduce(function(n,r){var o;return k({},n,(o={},o[r]=e[r],o))},{})},ne={TIMEOUT:"timeout",CLICKAWAY:"clickaway",MAXSNACK:"maxsnack",INSTRUCTED:"instructed"},Ce={toContainerAnchorOrigin:function(e){return"containerAnchorOrigin"+e},toAnchorOrigin:function(e){var n=e.vertical,r=e.horizontal;return"anchorOrigin"+ue(n)+ue(r)},toVariant:function(e){return"variant"+ue(e)}},ge=function(e){return!!e||e===0},Ue=function(e){return typeof e=="number"||e===null},zn=function(e,n,r){return function(o){return o==="autoHideDuration"?Ue(e.autoHideDuration)?e.autoHideDuration:Ue(n.autoHideDuration)?n.autoHideDuration:ae.autoHideDuration:e[o]||n[o]||r[o]}};function Ie(t,e,n){return t===void 0&&(t={}),e===void 0&&(e={}),n===void 0&&(n={}),k({},n,{},e,{},t)}var On="SnackbarContent",it={root:On+"-root"},Pn=U("div")(function(t){var e,n,r=t.theme;return n={},n["&."+it.root]=(e={display:"flex",flexWrap:"wrap",flexGrow:1},e[r.breakpoints.up("sm")]={flexGrow:"initial",minWidth:288},e),n}),Bn=h.exports.forwardRef(function(t,e){var n=t.className,r=re(t,["className"]);return i(Pn,{...Object.assign({ref:e,className:W(it.root,n)},r)})}),Ke={right:"left",left:"right",bottom:"up",top:"down"},Nn=function(e){return e.horizontal!=="center"?Ke[e.horizontal]:Ke[e.vertical]},$n=function(e){return i(ye,{...Object.assign({},e),children:i("path",{d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"})})},Vn=function(e){return i(ye,{...Object.assign({},e),children:i("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"})})},Hn=function(e){return i(ye,{...Object.assign({},e),children:i("path",{d:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2, 6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12, 13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"})})},Wn=function(e){return i(ye,{...Object.assign({},e),children:i("path",{d:"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12A10,10 0 0,0 12,2Z"})})},ve={fontSize:20,marginInlineEnd:8},jn={default:void 0,success:i($n,{style:ve}),warning:i(Vn,{style:ve}),error:i(Hn,{style:ve}),info:i(Wn,{style:ve})};function de(t,e){return t.reduce(function(n,r){return r==null?n:function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];var d=[].concat(s);e&&d.indexOf(e)===-1&&d.push(e),n.apply(this,d),r.apply(this,d)}},function(){})}var qn=typeof window!="undefined"?h.exports.useLayoutEffect:h.exports.useEffect;function Xe(t){var e=h.exports.useRef(t);return qn(function(){e.current=t}),h.exports.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var Un=h.exports.forwardRef(function(t,e){var n=t.children,r=t.autoHideDuration,o=t.ClickAwayListenerProps,a=t.disableWindowBlurListener,s=a===void 0?!1:a,c=t.onClose,d=t.onMouseEnter,u=t.onMouseLeave,l=t.open,m=t.resumeHideDuration,g=re(t,["children","autoHideDuration","ClickAwayListenerProps","disableWindowBlurListener","onClose","onMouseEnter","onMouseLeave","open","resumeHideDuration"]),y=h.exports.useRef(),T=Xe(function(){c&&c.apply(void 0,arguments)}),E=Xe(function(b){!c||b==null||(clearTimeout(y.current),y.current=setTimeout(function(){T(null,ne.TIMEOUT)},b))});h.exports.useEffect(function(){return l&&E(r),function(){clearTimeout(y.current)}},[l,r,E]);var v=function(){clearTimeout(y.current)},A=h.exports.useCallback(function(){r!=null&&E(m!=null?m:r*.5)},[r,m,E]),L=function(D){d&&d(D),v()},x=function(D){u&&u(D),A()},S=function(D){c&&c(D,ne.CLICKAWAY)};return h.exports.useEffect(function(){if(!s&&l)return window.addEventListener("focus",A),window.addEventListener("blur",v),function(){window.removeEventListener("focus",A),window.removeEventListener("blur",v)}},[s,A,l]),h.exports.createElement(Bt,k({onClickAway:S},o),h.exports.createElement("div",k({onMouseEnter:L,onMouseLeave:x,ref:e},g),n))}),G="SnackbarItem",O={contentRoot:G+"-contentRoot",lessPadding:G+"-lessPadding",variantSuccess:G+"-variantSuccess",variantError:G+"-variantError",variantInfo:G+"-variantInfo",variantWarning:G+"-variantWarning",message:G+"-message",action:G+"-action",wrappedRoot:G+"-wrappedRoot"},Kn=U(Un)(function(t){var e,n=t.theme,r=n.palette.mode||n.palette.type,o=zt(n.palette.background.default,r==="light"?.8:.98);return e={},e["&."+O.wrappedRoot]={position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0},e["."+O.contentRoot]=k({},n.typography.body2,{backgroundColor:o,color:n.palette.getContrastText(o),alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"}),e["."+O.lessPadding]={paddingLeft:8*2.5},e["."+O.variantSuccess]={backgroundColor:"#43a047",color:"#fff"},e["."+O.variantError]={backgroundColor:"#d32f2f",color:"#fff"},e["."+O.variantInfo]={backgroundColor:"#2196f3",color:"#fff"},e["."+O.variantWarning]={backgroundColor:"#ff9800",color:"#fff"},e["."+O.message]={display:"flex",alignItems:"center",padding:"8px 0"},e["."+O.action]={display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8},e}),Xn=function(e){var n=e.classes,r=re(e,["classes"]),o=h.exports.useRef(),a=h.exports.useState(!0),s=a[0],c=a[1];h.exports.useEffect(function(){return function(){o.current&&clearTimeout(o.current)}},[]);var d=de([r.snack.onClose,r.onClose],r.snack.key),u=function(){r.snack.requestClose&&d(null,ne.INSTRCUTED)},l=function(){o.current=setTimeout(function(){c(!s)},125)},m=r.style,g=r.ariaAttributes,y=r.className,T=r.hideIconVariant,E=r.iconVariant,v=r.snack,A=r.action,L=r.content,x=r.TransitionComponent,S=r.TransitionProps,b=r.transitionDuration,D=re(r,["style","dense","ariaAttributes","className","hideIconVariant","iconVariant","snack","action","content","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),_=v.key,Q=v.open,M=v.className,w=v.variant,j=v.content,N=v.action,K=v.ariaAttributes,q=v.anchorOrigin,ee=v.message,ce=v.TransitionComponent,$=v.TransitionProps,f=v.transitionDuration,I=re(v,["persist","key","open","entered","requestClose","className","variant","content","action","ariaAttributes","anchorOrigin","message","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),oe=k({},jn,{},E)[w],fe=k({"aria-describedby":"notistack-snackbar"},Ie(K,g)),Te=ce||x||ae.TransitionComponent,Ae=Ie(f,b,ae.transitionDuration),Fe=k({direction:Nn(q)},Ie($,S)),se=N||A;typeof se=="function"&&(se=se(_));var p=j||L;typeof p=="function"&&(p=p(_,v.message));var F=["onEnter","onEntering","onEntered","onExit","onExiting","onExited"].reduce(function(B,X){var te;return k({},B,(te={},te[X]=de([r.snack[X],r[X]],r.snack.key),te))},{});return i(Gt,{unmountOnExit:!0,timeout:175,in:s,onExited:F.onExited,children:i(Kn,{...Object.assign({},D,I,{open:Q,className:W(n.root,O.wrappedRoot,n[Ce.toAnchorOrigin(q)]),onClose:d}),children:i(Te,{...Object.assign({appear:!0,in:Q,timeout:Ae},Fe,{onExit:F.onExit,onExiting:F.onExiting,onExited:l,onEnter:F.onEnter,onEntering:F.onEntering,onEntered:de([F.onEntered,u])}),children:p||P(Bn,{...Object.assign({},fe,{role:"alert",style:m,className:W(O.contentRoot,O[Ce.toVariant(w)],n[Ce.toVariant(w)],y,M,!T&&oe&&O.lessPadding)}),children:[P("div",{id:fe["aria-describedby"],className:O.message,children:[T?null:oe,ee]}),se&&i("div",{className:O.action,children:se})]})})})})},Le={container:"& > .MuiCollapse-container, & > .MuiCollapse-root",wrapper:"& > .MuiCollapse-container > .MuiCollapse-wrapper, & > .MuiCollapse-root > .MuiCollapse-wrapper"},Me=16,ie="SnackbarContainer",V={root:ie+"-root",rootDense:ie+"-rootDense",top:ie+"-top",bottom:ie+"-bottom",left:ie+"-left",right:ie+"-right",center:ie+"-center"},Yn=U("div")(function(t){var e,n,r,o,a,s,c=t.theme;return s={},s["&."+V.root]=(e={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:c.zIndex.snackbar,height:"auto",width:"auto",transition:"top 300ms ease 0ms, right 300ms ease 0ms, bottom 300ms ease 0ms, left 300ms ease 0ms, margin 300ms ease 0ms, max-width 300ms ease 0ms",pointerEvents:"none"},e[Le.container]={pointerEvents:"all"},e[Le.wrapper]={padding:Y.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},e.maxWidth="calc(100% - "+Y.view.default*2+"px)",e[c.breakpoints.down("sm")]={width:"100%",maxWidth:"calc(100% - "+Me*2+"px)"},e),s["&."+V.rootDense]=(n={},n[Le.wrapper]={padding:Y.snackbar.dense+"px 0px"},n),s["&."+V.top]={top:Y.view.default-Y.snackbar.default,flexDirection:"column"},s["&."+V.bottom]={bottom:Y.view.default-Y.snackbar.default,flexDirection:"column-reverse"},s["&."+V.left]=(r={left:Y.view.default},r[c.breakpoints.up("sm")]={alignItems:"flex-start"},r[c.breakpoints.down("sm")]={left:Me+"px"},r),s["&."+V.right]=(o={right:Y.view.default},o[c.breakpoints.up("sm")]={alignItems:"flex-end"},o[c.breakpoints.down("sm")]={right:Me+"px"},o),s["&."+V.center]=(a={left:"50%",transform:"translateX(-50%)"},a[c.breakpoints.up("sm")]={alignItems:"center"},a),s}),Gn=function(e){var n=e.className,r=e.anchorOrigin,o=e.dense,a=re(e,["className","anchorOrigin","dense"]),s=W(V[r.vertical],V[r.horizontal],V.root,n,o&&V.rootDense);return i(Yn,{...Object.assign({className:s},a)})},Zn=R.memo(Gn),Jn=function(t){In(e,t);function e(r){var o;return o=t.call(this,r)||this,o.enqueueSnackbar=function(a,s){s===void 0&&(s={});var c=s,d=c.key,u=c.preventDuplicate,l=re(c,["key","preventDuplicate"]),m=ge(d),g=m?d:new Date().getTime()+Math.random(),y=zn(l,o.props,ae),T=k({key:g},l,{message:a,open:!0,entered:!1,requestClose:!1,variant:y("variant"),anchorOrigin:y("anchorOrigin"),autoHideDuration:y("autoHideDuration")});return l.persist&&(T.autoHideDuration=void 0),o.setState(function(E){if(u===void 0&&o.props.preventDuplicate||u){var v=function(S){return m?S.key===d:S.message===a},A=E.queue.findIndex(v)>-1,L=E.snacks.findIndex(v)>-1;if(A||L)return E}return o.handleDisplaySnack(k({},E,{queue:[].concat(E.queue,[T])}))}),g},o.handleDisplaySnack=function(a){var s=a.snacks;return s.length>=o.maxSnack?o.handleDismissOldest(a):o.processQueue(a)},o.processQueue=function(a){var s=a.queue,c=a.snacks;return s.length>0?k({},a,{snacks:[].concat(c,[s[0]]),queue:s.slice(1,s.length)}):a},o.handleDismissOldest=function(a){if(a.snacks.some(function(l){return!l.open||l.requestClose}))return a;var s=!1,c=!1,d=a.snacks.reduce(function(l,m){return l+(m.open&&m.persist?1:0)},0);d===o.maxSnack&&(c=!0);var u=a.snacks.map(function(l){return!s&&(!l.persist||c)?(s=!0,l.entered?(l.onClose&&l.onClose(null,ne.MAXSNACK,l.key),o.props.onClose&&o.props.onClose(null,ne.MAXSNACK,l.key),k({},l,{open:!1})):k({},l,{requestClose:!0})):k({},l)});return k({},a,{snacks:u})},o.handleEnteredSnack=function(a,s,c){if(!ge(c))throw new Error("handleEnteredSnack Cannot be called with undefined key");o.setState(function(d){var u=d.snacks;return{snacks:u.map(function(l){return l.key===c?k({},l,{entered:!0}):k({},l)})}})},o.handleCloseSnack=function(a,s,c){if(o.props.onClose&&o.props.onClose(a,s,c),s!==ne.CLICKAWAY){var d=c===void 0;o.setState(function(u){var l=u.snacks,m=u.queue;return{snacks:l.map(function(g){return!d&&g.key!==c?k({},g):g.entered?k({},g,{open:!1}):k({},g,{requestClose:!0})}),queue:m.filter(function(g){return g.key!==c})}})}},o.closeSnackbar=function(a){var s=o.state.snacks.find(function(c){return c.key===a});ge(a)&&s&&s.onClose&&s.onClose(null,ne.INSTRUCTED,a),o.handleCloseSnack(null,ne.INSTRUCTED,a)},o.handleExitedSnack=function(a,s,c){var d=s||c;if(!ge(d))throw new Error("handleExitedSnack Cannot be called with undefined key");o.setState(function(u){var l=o.processQueue(k({},u,{snacks:u.snacks.filter(function(m){return m.key!==d})}));return l.queue.length===0?l:o.handleDismissOldest(l)})},o.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:o.enqueueSnackbar.bind(qe(o)),closeSnackbar:o.closeSnackbar.bind(qe(o))}},o}var n=e.prototype;return n.render=function(){var o=this,a=this.state.contextValue,s=this.props,c=s.iconVariant,d=s.dense,u=d===void 0?ae.dense:d,l=s.hideIconVariant,m=l===void 0?ae.hideIconVariant:l,g=s.domRoot,y=s.children,T=s.classes,E=T===void 0?{}:T,v=re(s,["maxSnack","preventDuplicate","variant","anchorOrigin","iconVariant","dense","hideIconVariant","domRoot","children","classes"]),A=this.state.snacks.reduce(function(x,S){var b,D=Mn(S.anchorOrigin),_=x[D]||[];return k({},x,(b={},b[D]=[].concat(_,[S]),b))},{}),L=Object.keys(A).map(function(x){var S=A[x];return i(Zn,{dense:u,anchorOrigin:S[0].anchorOrigin,className:W(E.containerRoot,E[Ce.toContainerAnchorOrigin(x)]),children:S.map(function(b){return i(Xn,{...Object.assign({},v,{key:b.key,snack:b,dense:u,iconVariant:c,hideIconVariant:m,classes:Rn(E),onClose:o.handleCloseSnack,onExited:de([o.handleExitedSnack,o.props.onExited]),onEntered:de([o.handleEnteredSnack,o.props.onEntered])})})})},x)});return P(ot.Provider,{value:a,children:[y,g?lt.exports.createPortal(L,g):L]})},Fn(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||ae.maxSnack}}]),e}(h.exports.Component),at=function(){return h.exports.useContext(ot)};function Qn(){return i(Z,{sx:{marginX:"auto"},children:P("label",{children:[i("input",{type:"file",style:{display:"none"},onChange:t=>{if(t.target.files.length>0){var e=new FormData;e.append("file",t.target.files[0]),H.post.file(e,z.node_id)}}}),i(ke,{title:"\u4E0A\u4F20",icon:rt,component:"span",size:"small",icon_props:{sx:{marginLeft:"-0.1rem",color:"primary"}}})]})})}function er(t){let[e,n]=R.useState(void 0);const{enqueueSnackbar:r,closeSnackbar:o}=at();return P(R.Fragment,{children:[i(ke,{title:"\u5220\u9664\u8D44\u6E90",icon:bn,onClick:async a=>{n(a.currentTarget)}}),i(Nt,{anchorEl:e,open:!!e,onClose:a=>n(void 0),anchorOrigin:{vertical:"center",horizontal:"right"},children:i($t,{onClick:async a=>{let s=await H.post.delete_resource(t.resource_id);r(s?"\u5220\u9664\u6210\u529F":"\u5220\u9664\u5931\u8D25"),n(void 0),s&&t.onSuccess&&t.onSuccess()},children:"\u786E\u5B9A\uFF1F"})})]})}function tr(t){let[e,n,r]=[t.id,t.name,t.url],[o,a]=R.useState(n);const{enqueueSnackbar:s,closeSnackbar:c}=at();h.exports.useEffect(()=>{a(n)},[n]);let d=t.onSuccess||(()=>{});return i(Oe,{variant:"outlined",sx:{position:"relative",marginTop:"1rem",marginX:"1rem",marginBottom:"1rem",paddingY:"0.7rem"},children:P(xe,{force_direction:"row",children:[i(Z,{sx:{flex:1},children:P(xe,{children:[i(He,{variant:"standard",label:"name",value:o,fullWidth:!0,onChange:u=>{a(u.target.value)}}),i(He,{variant:"standard",label:"url",value:r,fullWidth:!0,sx:{marginTop:"1rem"},InputProps:{readOnly:!0}})]})}),i(Z,{children:P(xe,{children:[i(ke,{title:"\u66F4\u6539\u8D44\u6E90\u540D",icon:_n,onClick:async u=>{let l={name:o},m=await H.post.manage_recourse(!1,l,e);s(m?"\u4FEE\u6539\u6587\u4EF6\u540D\u6210\u529F":"\u4FEE\u6539\u6587\u4EF6\u540D\u5931\u8D25")}}),P("label",{children:[i("input",{type:"file",style:{display:"none"},onChange:async u=>{let l=!1;if(u.target.files.length<=0)l=!1;else{var m=new FormData;m.append("file",u.target.files[0]);let g=await H.post.manage_recourse(!0,m,e);l=g,g&&d()}s(l?"\u4E0A\u4F20\u6587\u4EF6\u6210\u529F":"\u4E0A\u4F20\u6587\u4EF6\u5931\u8D25")}}),i(ke,{title:"\u66FF\u6362\u6587\u4EF6",icon:rt,component:"span"})]}),i(er,{resource_id:e,onSuccess:d})]})})]})})}class nr extends R.Component{constructor(n){super(n);le(this,"contextType",ut);this.state={resources:[]}}async effect(){let n=await H.get.resources(z.node_id);this.setState({resources:n}),this.forceUpdate()}async componentDidMount(){this.effect()}render(){let n=this;return i(Z,{sx:n.context.printer.fonts.body,children:i(xe,{force_direction:"column",children:n.state.resources.map((r,o)=>{let[a,s,c]=r;return i(R.Fragment,{children:i(tr,{id:a,name:s,url:c,onSuccess:()=>{n.effect()}})},o)})})})}}function rr(t){let[e,n]=R.useState(!1);return P(R.Fragment,{children:[i(we,{title:"\u67E5\u770B/\u7BA1\u7406\u6587\u4EF6",children:i(Se,{size:"small",onClick:()=>{n(!0)},children:i(wn,{fontSize:"small",color:"primary"})})}),i(vn,{anchor:"left",open:e,onClose:()=>n(!1),ModalProps:{keepMounted:!1},SlideProps:{onExited:()=>{}},PaperProps:{sx:{width:"40%"}},children:i(nr,{})})]})}class or extends R.Component{constructor(e){super(e),this.state={snackbar_open:!1,status:!1}}render(){let e=this;return i(R.Fragment,{children:i(we,{title:"\u751F\u6210\u6458\u8981",children:i(Se,{size:"small",onClick:()=>{H.post.tldr(z.node_id).then(()=>{let n=e.props.onSuccess;n&&n()})},children:i(En,{fontSize:"small",color:"primary"})})})})}}class ir extends R.Component{constructor(e){super(e),this.state={snackbar_open:!1,status:!1}}render(){return i(R.Fragment,{children:i(we,{title:"\u4FDD\u5B58",children:i(Se,{size:"small",onClick:()=>this.props.save_func(),children:i(Vt,{fontSize:"small",color:"primary"})})})})}}function Re(t,e,n){return Ye(t,e)&&t.concept==n}function ar(t,e){const n=e.normalizeNode;return e.normalizeNode=r=>{let[o,a]=r;if(dt("initializing")){n(r);return}if(a.length==0){let s=o,c=s.children.length;if(c==0||!Re(s.children[0],"support","\u5C0F\u8282\u7EBF")){t.add_nodes(t.get_core().create_support("\u5C0F\u8282\u7EBF"),[0]);return}if(!Re(s.children[c-1],"support","\u7AE0\u8282\u7EBF")){t.add_nodes(t.get_core().create_support("\u7AE0\u8282\u7EBF"),[c]);return}}if(Re(o,"support","\u7AE0\u8282\u7EBF")&&(a.length!=1||a[0]!=e.children.length-1)){t.delete_node_by_path(a);return}n(r)},e}function sr(t,e){const n=e.normalizeNode;return e.normalizeNode=r=>{let[o,a]=r;Ye(o),n(r)},e}let cr=[ar,sr];function lr(t,e){for(let n of cr)e=n(t,e);return e}class ur extends R.Component{constructor(n){super(n);le(this,"editor_ref");le(this,"printer_ref");le(this,"snackerbar_ref");this.state={printer:void 0,editorcore:void 0,tree:void 0,cache:void 0,activate_idx:!0},this.editor_ref=R.createRef(),this.printer_ref=R.createRef(),this.snackerbar_ref=R.createRef()}update_title(n){var o,a;n||(n=this.state.tree),n&&(document.title=`\u7F16\u8F91\uFF1A${(a=(o=n.parameters)==null?void 0:o.title)==null?void 0:a.val}`)}open_snackerbar(n){this.snackerbar_ref&&this.snackerbar_ref.current&&this.snackerbar_ref.current.enqueueSnackbar(n)}async componentDidMount(){let n=this,r=await H.get.concept(z.node_id),o=wt(r),a=new pt(yt,o,St,Dt),s=new ft({renderers:Tt,default_renderers:At,printer:a}),c=await H.get.content(z.node_id);c||(c=s.create_abstract("root"),c.parameters={title:{val:`Article: ${z.node_id}`,type:"string"}}),n.update_title(c);let d=await H.get.cache(z.node_id);this.setState({printer:a,editorcore:s,tree:c,cache:d})}get_editor(){if(this.editor_ref&&this.editor_ref.current)return this.editor_ref.current.get_editor()}get_printer_comp(){if(this.printer_ref&&this.printer_ref.current)return this.printer_ref.current.get_component()}async save_content(n=void 0,r=void 0){n==null&&(n=this.state.tree),r==null&&(r=this.state.cache);let o=await H.post.content({content:n},z.node_id),a=await H.post.cache({cache:r},z.node_id);this.open_snackerbar(o&&a?"\u4FDD\u5B58\u6210\u529F":"\u4FDD\u5B58\u5931\u8D25")}scroll_to_selection(){let n=this.get_editor(),r=this.get_printer_comp();if(!(n&&r))return;let o=n.get_slate().selection;if(!(o&&o.focus&&o.focus.path))return;let a=o.focus.path;r.scroll_to(a)}update_tree(){let n=this.get_editor();if(!n)return;let r=n.get_root();return this.setState({tree:r}),this.update_title(),r}ShowIDButton(){let n=this,r=n.state.activate_idx?{backgroundColor:"rgb(20,20,20,0.8)",color:"rgb(200,170,220)"}:{};return i(Se,{sx:{marginLeft:"0.3rem"},onClick:o=>{n.setState({activate_idx:!n.state.activate_idx})},children:i(ht,{text:"\u77A7",sx:{...r}})})}render(){let n=this,{editorcore:r,printer:o,tree:a}=this.state;if(!(r&&o&&a))return i(mt,{});let[s,c]=(()=>{let{children:u,...l}=a;return[l,u]})(),d=n.ShowIDButton.bind(n);return i(Ht,{theme:Ot(he.mui),children:i(gt,{value:he,mui:!0,children:P(Z,{sx:u=>({position:"fixed",width:"100%",height:"100%",left:"0",right:"0",backgroundColor:u.palette.background.default,color:u.palette.text.primary}),children:[i(Wt,{}),i(Jn,{maxSnack:3,ref:n.snackerbar_ref,anchorOrigin:{horizontal:"right",vertical:"top"},variant:"info",children:P(Z,{sx:{position:"absolute",top:"2%",left:"1%",height:"96%",width:"98%"},children:[P(nn,{sx:{position:"absolute",left:"0",width:"auto",display:"flex",flexDirection:"column"},children:[i(ir,{save_func:n.save_content.bind(n)}),i(rr,{}),i(Qn,{}),i(Sn,{}),i(Dn,{}),i(Tn,{}),i(An,{}),i(or,{onSuccess:()=>{n.open_snackerbar("\u751F\u6210\u6458\u8981\u5B8C\u6210\uFF01")}})]}),P(Z,{sx:{position:"absolute",left:"3%",width:"96%",height:"100%"},children:[i(Z,{sx:{position:"absolute",width:"49%",left:"0%",top:"0",height:"100%"},children:i(vt,{ref:n.editor_ref,editorcore:r,init_rootproperty:s,init_rootchildren:c,onSave:()=>{let u=n.update_tree();setTimeout(()=>{Ft.go(),n.save_content(u),n.scroll_to_selection()},50)},theme:he,plugin:lr,extra_buttons:i(d,{})})}),i(xt,{sx:{position:"absolute",width:"49%",left:"51%",top:"0",height:"100%",overflow:"auto",paddingRight:"1%"},className:"mathjax_process",children:i(It,{children:i(Ct,{value:{BackendData:z,cache:n.state.cache,activate_idx:n.state.activate_idx},children:i(kt,{printer:o,theme:he,onUpdateCache:u=>{u&&JSON.stringify(u)!=JSON.stringify(n.state.cache)?(setTimeout(()=>n.setState({cache:u}),200),n.open_snackerbar("\u751F\u6210\u7F13\u5B58\u6570\u636E\u5B8C\u6210\uFF01")):n.open_snackerbar("\u7F13\u5B58\u6570\u636E\u6CA1\u6709\u53D8\u5316\u3002")},ref:n.printer_ref,root:a,onDidMount:u=>{z.linkto&&setTimeout(()=>{let l=parseInt(z.linkto);u.scroll_to_idx(l);let m=u.get_ref_from_idx(l);m&&(m.style.border="2px solid")},300)}})})})})]})]})})]})})})}}Et.render(i(ur,{}),document.getElementById("root"));
