var lt=Object.defineProperty;var ut=(t,e,n)=>e in t?lt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>(ut(t,typeof e!="symbol"?e+"":e,n),n);import{r as p,j as i,u as we,B as z,A as _e,b as P,c as dt,a as M,T as pt,I as H,d as xe,e as ke,g as ft,s as Je,P as ht,E as mt,f as vt,F as gt,h as xt,i as Et,S as kt,G as Ct,k as bt,R as wt}from"./titleword.81953787.js";import{T as Qe,u as Oe,g as Ce,P as Pe,o as Fe,a as et,r as _t,M as yt,p as St,f as Dt,b as Tt,d as At,e as Lt,c as Ft,h as Rt,m as he,C as It}from"./overlayscrollbars.16381ff6.js";import{f as Mt,M as zt}from"./math.1dc33ed7.js";import{c as J,S as ye,I as Se}from"./useFormControl.5a99a6ea.js";import{g as Be,a as Ne,s as U,_ as C,u as $e,d as Ot,b as pe,c as Ve,e as W,f as He,h as Pt,r as Bt,i as be,B as Z,L as Nt,j as $t,k as Vt}from"./Link.fac41cb5.js";import{d as Ht,T as je,P as Wt,B as jt}from"./TextField.f780b113.js";import{S as qt}from"./Save.0e6f720b.js";function Ut(t){return Be("MuiCollapse",t)}Ne("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Xt=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Kt=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return He(r,Ut,n)},Yt=U("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>C({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&C({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),Gt=U("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>C({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Zt=U("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>C({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),tt=p.exports.forwardRef(function(e,n){const r=$e({props:e,name:"MuiCollapse"}),{addEndListener:o,children:a,className:s,collapsedSize:c="0px",component:d,easing:u,in:l,onEnter:f,onEntered:x,onEntering:w,onExit:E,onExited:v,onExiting:h,orientation:y="vertical",style:R,timeout:k=Ot.standard,TransitionComponent:T=Qe}=r,_=pe(r,Xt),A=C({},r,{orientation:y,collapsedSize:c}),S=Kt(A),Q=Oe(),I=p.exports.useRef(),D=p.exports.useRef(null),j=p.exports.useRef(),N=typeof c=="number"?`${c}px`:c,X=y==="horizontal",q=X?"width":"height";p.exports.useEffect(()=>()=>{clearTimeout(I.current)},[]);const ee=p.exports.useRef(null),ce=Ve(n,ee),$=m=>L=>{if(m){const B=ee.current;L===void 0?m(B):m(B,L)}},g=()=>D.current?D.current[X?"clientWidth":"clientHeight"]:0,F=$((m,L)=>{D.current&&X&&(D.current.style.position="absolute"),m.style[q]=N,f&&f(m,L)}),oe=$((m,L)=>{const B=g();D.current&&X&&(D.current.style.position="");const{duration:K,easing:te}=Ce({style:R,timeout:k,easing:u},{mode:"enter"});if(k==="auto"){const We=Q.transitions.getAutoHeightDuration(B);m.style.transitionDuration=`${We}ms`,j.current=We}else m.style.transitionDuration=typeof K=="string"?K:`${K}ms`;m.style[q]=`${B}px`,m.style.transitionTimingFunction=te,w&&w(m,L)}),fe=$((m,L)=>{m.style[q]="auto",x&&x(m,L)}),Te=$(m=>{m.style[q]=`${g()}px`,E&&E(m)}),Ae=$(v),Le=$(m=>{const L=g(),{duration:B,easing:K}=Ce({style:R,timeout:k,easing:u},{mode:"exit"});if(k==="auto"){const te=Q.transitions.getAutoHeightDuration(L);m.style.transitionDuration=`${te}ms`,j.current=te}else m.style.transitionDuration=typeof B=="string"?B:`${B}ms`;m.style[q]=N,m.style.transitionTimingFunction=K,h&&h(m)});return i(T,C({in:l,onEnter:F,onEntered:fe,onEntering:oe,onExit:Te,onExited:Ae,onExiting:Le,addEndListener:m=>{k==="auto"&&(I.current=setTimeout(m,j.current||0)),o&&o(ee.current,m)},nodeRef:ee,timeout:k==="auto"?null:k},_,{children:(m,L)=>i(Yt,C({as:d,className:W(S.root,s,{entered:S.entered,exited:!l&&N==="0px"&&S.hidden}[m]),style:C({[X?"minWidth":"minHeight"]:N},R),ownerState:C({},A,{state:m}),ref:ce},L,{children:i(Gt,{ownerState:C({},A,{state:m}),className:S.wrapper,ref:D,children:i(Zt,{ownerState:C({},A,{state:m}),className:S.wrapperInner,children:a})})}))}))});tt.muiSupportAuto=!0;var Jt=tt;function Qt(t){return Be("MuiCard",t)}Ne("MuiCard",["root"]);const en=["className","raised"],tn=t=>{const{classes:e}=t;return He({root:["root"]},Qt,e)},nn=U(Pe,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),rn=p.exports.forwardRef(function(e,n){const r=$e({props:e,name:"MuiCard"}),{className:o,raised:a=!1}=r,s=pe(r,en),c=C({},r,{raised:a}),d=tn(c);return i(nn,C({className:W(d.root,o),elevation:a?8:void 0,ref:n,ownerState:c},s))});var on=rn;function qe(t){return t.substring(2).toLowerCase()}function an(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function sn(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:o,touchEvent:a="onTouchEnd"}=t,s=p.exports.useRef(!1),c=p.exports.useRef(null),d=p.exports.useRef(!1),u=p.exports.useRef(!1);p.exports.useEffect(()=>(setTimeout(()=>{d.current=!0},0),()=>{d.current=!1}),[]);const l=Ve(e.ref,c),f=Pt(E=>{const v=u.current;u.current=!1;const h=Fe(c.current);if(!d.current||!c.current||"clientX"in E&&an(E,h))return;if(s.current){s.current=!1;return}let y;E.composedPath?y=E.composedPath().indexOf(c.current)>-1:y=!h.documentElement.contains(E.target)||c.current.contains(E.target),!y&&(n||!v)&&o(E)}),x=E=>v=>{u.current=!0;const h=e.props[E];h&&h(v)},w={ref:l};return a!==!1&&(w[a]=x(a)),p.exports.useEffect(()=>{if(a!==!1){const E=qe(a),v=Fe(c.current),h=()=>{s.current=!0};return v.addEventListener(E,f),v.addEventListener("touchmove",h),()=>{v.removeEventListener(E,f),v.removeEventListener("touchmove",h)}}},[f,a]),r!==!1&&(w[r]=x(r)),p.exports.useEffect(()=>{if(r!==!1){const E=qe(r),v=Fe(c.current);return v.addEventListener(E,f),()=>{v.removeEventListener(E,f)}}},[f,r]),i(p.exports.Fragment,{children:p.exports.cloneElement(e,w)})}const cn=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function ln(t,e,n){const r=e.getBoundingClientRect(),o=n&&n.getBoundingClientRect(),a=et(e);let s;if(e.fakeTransform)s=e.fakeTransform;else{const u=a.getComputedStyle(e);s=u.getPropertyValue("-webkit-transform")||u.getPropertyValue("transform")}let c=0,d=0;if(s&&s!=="none"&&typeof s=="string"){const u=s.split("(")[1].split(")")[0].split(",");c=parseInt(u[4],10),d=parseInt(u[5],10)}return t==="left"?o?`translateX(${o.right+c-r.left}px)`:`translateX(${a.innerWidth+c-r.left}px)`:t==="right"?o?`translateX(-${r.right-o.left-c}px)`:`translateX(-${r.left+r.width-c}px)`:t==="up"?o?`translateY(${o.bottom+d-r.top}px)`:`translateY(${a.innerHeight+d-r.top}px)`:o?`translateY(-${r.top-o.top+r.height-d}px)`:`translateY(-${r.top+r.height-d}px)`}function un(t){return typeof t=="function"?t():t}function me(t,e,n){const r=un(n),o=ln(t,e,r);o&&(e.style.webkitTransform=o,e.style.transform=o)}const dn=p.exports.forwardRef(function(e,n){const r=Oe(),o={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:c=!0,children:d,container:u,direction:l="down",easing:f=o,in:x,onEnter:w,onEntered:E,onEntering:v,onExit:h,onExited:y,onExiting:R,style:k,timeout:T=a,TransitionComponent:_=Qe}=e,A=pe(e,cn),S=p.exports.useRef(null),Q=Ve(d.ref,S,n),I=g=>F=>{g&&(F===void 0?g(S.current):g(S.current,F))},D=I((g,F)=>{me(l,g,u),_t(g),w&&w(g,F)}),j=I((g,F)=>{const oe=Ce({timeout:T,style:k,easing:f},{mode:"enter"});g.style.webkitTransition=r.transitions.create("-webkit-transform",C({},oe)),g.style.transition=r.transitions.create("transform",C({},oe)),g.style.webkitTransform="none",g.style.transform="none",v&&v(g,F)}),N=I(E),X=I(R),q=I(g=>{const F=Ce({timeout:T,style:k,easing:f},{mode:"exit"});g.style.webkitTransition=r.transitions.create("-webkit-transform",F),g.style.transition=r.transitions.create("transform",F),me(l,g,u),h&&h(g)}),ee=I(g=>{g.style.webkitTransition="",g.style.transition="",y&&y(g)}),ce=g=>{s&&s(S.current,g)},$=p.exports.useCallback(()=>{S.current&&me(l,S.current,u)},[l,u]);return p.exports.useEffect(()=>{if(x||l==="down"||l==="right")return;const g=Ht(()=>{S.current&&me(l,S.current,u)}),F=et(S.current);return F.addEventListener("resize",g),()=>{g.clear(),F.removeEventListener("resize",g)}},[l,x,u]),p.exports.useEffect(()=>{x||$()},[x,$]),i(_,C({nodeRef:S,onEnter:D,onEntered:N,onEntering:j,onExit:q,onExited:ee,onExiting:X,addEndListener:ce,appear:c,in:x,timeout:T},A,{children:(g,F)=>p.exports.cloneElement(d,C({ref:Q,style:C({visibility:g==="exited"&&!x?"hidden":void 0},k,d.props.style)},F))}))});var nt=dn;function pn(t){return Be("MuiDrawer",t)}Ne("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const fn=["BackdropProps"],hn=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],rt=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},mn=t=>{const{classes:e,anchor:n,variant:r}=t,o={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${be(n)}`,r!=="temporary"&&`paperAnchorDocked${be(n)}`]};return He(o,pn,e)},vn=U(yt,{name:"MuiDrawer",slot:"Root",overridesResolver:rt})(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer})),Ue=U("div",{shouldForwardProp:Bt,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:rt})({flex:"0 0 auto"}),gn=U(Pe,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${be(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${be(n.anchor)}`]]}})(({theme:t,ownerState:e})=>C({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},e.anchor==="left"&&{left:0},e.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="right"&&{right:0},e.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="left"&&e.variant!=="temporary"&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="top"&&e.variant!=="temporary"&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="right"&&e.variant!=="temporary"&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="bottom"&&e.variant!=="temporary"&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})),ot={left:"right",right:"left",top:"down",bottom:"up"};function xn(t){return["left","right"].indexOf(t)!==-1}function En(t,e){return t.direction==="rtl"&&xn(e)?ot[e]:e}const kn=p.exports.forwardRef(function(e,n){const r=$e({props:e,name:"MuiDrawer"}),o=Oe(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:c,children:d,className:u,elevation:l=16,hideBackdrop:f=!1,ModalProps:{BackdropProps:x}={},onClose:w,open:E=!1,PaperProps:v={},SlideProps:h,TransitionComponent:y=nt,transitionDuration:R=a,variant:k="temporary"}=r,T=pe(r.ModalProps,fn),_=pe(r,hn),A=p.exports.useRef(!1);p.exports.useEffect(()=>{A.current=!0},[]);const S=En(o,s),I=C({},r,{anchor:s,elevation:l,open:E,variant:k},_),D=mn(I),j=i(gn,C({elevation:k==="temporary"?l:0,square:!0},v,{className:W(D.paper,v.className),ownerState:I,children:d}));if(k==="permanent")return i(Ue,C({className:W(D.root,D.docked,u),ownerState:I,ref:n},_,{children:j}));const N=i(y,C({in:E,direction:ot[S],timeout:R,appear:A.current},h,{children:j}));return k==="persistent"?i(Ue,C({className:W(D.root,D.docked,u),ownerState:I,ref:n},_,{children:N})):i(vn,C({BackdropProps:C({},c,x,{transitionDuration:R}),className:W(D.root,D.modal,u),open:E,ownerState:I,onClose:w,hideBackdrop:f,ref:n},_,T,{children:N}))});var Cn=kn,bn=J([i("circle",{cx:"17",cy:"4.54",r:"2"},"0"),i("path",{d:"M14 17h-2c0 1.65-1.35 3-3 3s-3-1.35-3-3 1.35-3 3-3v-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5zm3-3.5h-1.86l1.67-3.67C17.42 8.5 16.44 7 14.96 7h-5.2c-.81 0-1.54.47-1.87 1.2L7.22 10l1.92.53L9.79 9H12l-1.83 4.1c-.6 1.33.39 2.9 1.85 2.9H17v5h2v-5.5c0-1.1-.9-2-2-2z"},"1")],"AccessibleForward"),wn=J(i("path",{d:"m22.25 14.29-.69 1.89L9.2 11.71l2.08-5.66 8.56 3.09c2.1.76 3.18 3.06 2.41 5.15zM1.5 12.14 8 14.48V19h8v-1.63L20.52 19l.69-1.89-19.02-6.86-.69 1.89zm5.8-1.94c1.49-.72 2.12-2.51 1.41-4C7.99 4.71 6.2 4.08 4.7 4.8c-1.49.71-2.12 2.5-1.4 4 .71 1.49 2.5 2.12 4 1.4z"}),"AirlineSeatFlatAngled"),_n=J(i("path",{d:"M6 6.5c.31 0 .7.15.9.56.24.5.02 1.1-.47 1.34-.14.06-.28.1-.43.1-.3 0-.7-.15-.89-.56-.17-.34-.1-.63-.05-.78.05-.14.18-.4.51-.56.14-.06.28-.1.43-.1m6.47 2.11 6.69 2.41c.52.19.93.56 1.15 1.05.22.48.25 1.03.06 1.53l-.01.02-8.59-3.11.7-1.9M10 15.19l4 1.44V17h-4v-1.81M6 4.5c-.44 0-.88.1-1.3.3-1.49.71-2.12 2.5-1.4 4 .51 1.07 1.58 1.7 2.7 1.7.44 0 .88-.1 1.3-.3 1.49-.72 2.12-2.51 1.41-4C8.19 5.13 7.12 4.5 6 4.5zm5.28 1.55L9.2 11.71l12.36 4.47.69-1.89c.77-2.09-.31-4.39-2.41-5.15l-8.56-3.09zm-9.09 4.2-.69 1.89L8 14.48V19h8v-1.63L20.52 19l.69-1.89-19.02-6.86z"}),"AirlineSeatFlatAngledOutlined"),yn=J([i("circle",{cx:"12.5",cy:"4.5",r:"2"},"0"),i("path",{d:"m19.77 17.72-.64-6.37c-.07-.77-.72-1.35-1.49-1.35H16c-1.5-.02-2.86-.54-3.76-1.44l-2-1.98C10.08 6.42 9.62 6 8.83 6c-.51 0-1.02.2-1.41.59L4.08 9.91c-.53.68-.51 1.57-.21 2.13l1.43 2.8-3.15 4.05 1.57 1.24L7.4 15.4l-.17-1.36.77.71V20h2v-6.12l-2.12-2.12 2.36-2.36c.94.94 1.72 1.82 3.59 2.32L13 20h1.5l.41-3.5h3.18l.14 1.22c-.44.26-.73.74-.73 1.28 0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5c0-.54-.29-1.02-.73-1.28zM15.09 15l.41-3.5h2l.41 3.5h-2.82z"},"1")],"AssistWalker"),Sn=J(i("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),Dn=J(i("path",{d:"M18.41 5.8 17.2 4.59c-.78-.78-2.05-.78-2.83 0l-2.68 2.68L3 15.96V20h4.04l8.74-8.74 2.63-2.63c.79-.78.79-2.05 0-2.83zM6.21 18H5v-1.21l8.66-8.66 1.21 1.21L6.21 18zM11 20l4-4h6v4H11z"}),"DriveFileRenameOutline"),it=J(i("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10zM8 13.01l1.41 1.41L11 12.84V17h2v-4.16l1.59 1.59L16 13.01 12.01 9 8 13.01z"}),"DriveFolderUpload"),Tn=J(i("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"}),"FileCopy"),An=J(i("path",{d:"M9.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5.75 8.9 3 23h2.1l1.75-8L9 17v6h2v-7.55L8.95 13.4l.6-3C10.85 12 12.8 13 15 13v-2c-1.85 0-3.45-1-4.35-2.45l-.95-1.6C9.35 6.35 8.7 6 8 6c-.25 0-.5.05-.75.15L2 8.3V13h2V9.65l1.75-.75M13 2v7h3.75v14h1.5V9H22V2h-9zm5.01 6V6.25H14.5v-1.5h3.51V3l2.49 2.5L18.01 8z"}),"FollowTheSigns");function De(t){let e=t.Icon;return i(Z,{sx:{marginLeft:"0.35rem",marginRight:"0.25rem",marginTop:"0.35rem"},children:i(_e,{title:t.title,children:i(Nt,{underline:"hover",href:t.href,children:i(e,{fontSize:"small",color:"primary"})})})})}function Ln(t){return i(De,{title:"\u540E\u53F0\u9875\u9762",href:we(`/admin/articlezone/node/${z.node_id}/change/`),Icon:An})}function Fn(t){return i(De,{title:"\u7F16\u8F91\u5B50\u8282\u70B9\u7ED3\u6784",href:we(`/edit/structure/${z.node_id}`),Icon:wn})}function Rn(t){return i(De,{title:"\uFF08\u6D45\uFF09\u7F16\u8F91\u5B50\u8282\u70B9\u7ED3\u6784",href:we(`/edit/shallow_structure/${z.node_id}`),Icon:_n})}function In(t){return i(De,{title:"\u9884\u89C8\u9875\u9762\uFF08\u6709\u4EC0\u4E48\u5FC5\u8981\u5417\uFF09",href:we(`/view/content/${z.node_id}`),Icon:bn})}function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Mn(t,e,n){return e&&Xe(t.prototype,e),n&&Xe(t,n),t}function b(){return b=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},b.apply(this,arguments)}function zn(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function re(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Ke(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var at=M.createContext(),On={mui:{root:{},anchorOriginTopCenter:{},anchorOriginBottomCenter:{},anchorOriginTopRight:{},anchorOriginBottomRight:{},anchorOriginTopLeft:{},anchorOriginBottomLeft:{}},container:{containerRoot:{},containerAnchorOriginTopCenter:{},containerAnchorOriginBottomCenter:{},containerAnchorOriginTopRight:{},containerAnchorOriginBottomRight:{},containerAnchorOriginTopLeft:{},containerAnchorOriginBottomLeft:{}}},Y={view:{default:20,dense:4},snackbar:{default:6,dense:2}},ae={maxSnack:3,dense:!1,hideIconVariant:!1,variant:"default",autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:nt,transitionDuration:{enter:225,exit:195}},ue=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},Pn=function(e){return""+ue(e.vertical)+ue(e.horizontal)},Bn=function(e){return Object.keys(e).filter(function(n){return!On.container[n]}).reduce(function(n,r){var o;return b({},n,(o={},o[r]=e[r],o))},{})},ne={TIMEOUT:"timeout",CLICKAWAY:"clickaway",MAXSNACK:"maxsnack",INSTRUCTED:"instructed"},Ee={toContainerAnchorOrigin:function(e){return"containerAnchorOrigin"+e},toAnchorOrigin:function(e){var n=e.vertical,r=e.horizontal;return"anchorOrigin"+ue(n)+ue(r)},toVariant:function(e){return"variant"+ue(e)}},ve=function(e){return!!e||e===0},Ye=function(e){return typeof e=="number"||e===null},Nn=function(e,n,r){return function(o){return o==="autoHideDuration"?Ye(e.autoHideDuration)?e.autoHideDuration:Ye(n.autoHideDuration)?n.autoHideDuration:ae.autoHideDuration:e[o]||n[o]||r[o]}};function Re(t,e,n){return t===void 0&&(t={}),e===void 0&&(e={}),n===void 0&&(n={}),b({},n,{},e,{},t)}var $n="SnackbarContent",st={root:$n+"-root"},Vn=U("div")(function(t){var e,n,r=t.theme;return n={},n["&."+st.root]=(e={display:"flex",flexWrap:"wrap",flexGrow:1},e[r.breakpoints.up("sm")]={flexGrow:"initial",minWidth:288},e),n}),Hn=p.exports.forwardRef(function(t,e){var n=t.className,r=re(t,["className"]);return i(Vn,{...Object.assign({ref:e,className:W(st.root,n)},r)})}),Ge={right:"left",left:"right",bottom:"up",top:"down"},Wn=function(e){return e.horizontal!=="center"?Ge[e.horizontal]:Ge[e.vertical]},jn=function(e){return i(ye,{...Object.assign({},e),children:i("path",{d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"})})},qn=function(e){return i(ye,{...Object.assign({},e),children:i("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"})})},Un=function(e){return i(ye,{...Object.assign({},e),children:i("path",{d:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2, 6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12, 13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"})})},Xn=function(e){return i(ye,{...Object.assign({},e),children:i("path",{d:"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12A10,10 0 0,0 12,2Z"})})},ge={fontSize:20,marginInlineEnd:8},Kn={default:void 0,success:i(jn,{style:ge}),warning:i(qn,{style:ge}),error:i(Un,{style:ge}),info:i(Xn,{style:ge})};function de(t,e){return t.reduce(function(n,r){return r==null?n:function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];var d=[].concat(s);e&&d.indexOf(e)===-1&&d.push(e),n.apply(this,d),r.apply(this,d)}},function(){})}var Yn=typeof window!="undefined"?p.exports.useLayoutEffect:p.exports.useEffect;function Ze(t){var e=p.exports.useRef(t);return Yn(function(){e.current=t}),p.exports.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var Gn=p.exports.forwardRef(function(t,e){var n=t.children,r=t.autoHideDuration,o=t.ClickAwayListenerProps,a=t.disableWindowBlurListener,s=a===void 0?!1:a,c=t.onClose,d=t.onMouseEnter,u=t.onMouseLeave,l=t.open,f=t.resumeHideDuration,x=re(t,["children","autoHideDuration","ClickAwayListenerProps","disableWindowBlurListener","onClose","onMouseEnter","onMouseLeave","open","resumeHideDuration"]),w=p.exports.useRef(),E=Ze(function(){c&&c.apply(void 0,arguments)}),v=Ze(function(_){!c||_==null||(clearTimeout(w.current),w.current=setTimeout(function(){E(null,ne.TIMEOUT)},_))});p.exports.useEffect(function(){return l&&v(r),function(){clearTimeout(w.current)}},[l,r,v]);var h=function(){clearTimeout(w.current)},y=p.exports.useCallback(function(){r!=null&&v(f!=null?f:r*.5)},[r,f,v]),R=function(A){d&&d(A),h()},k=function(A){u&&u(A),y()},T=function(A){c&&c(A,ne.CLICKAWAY)};return p.exports.useEffect(function(){if(!s&&l)return window.addEventListener("focus",y),window.addEventListener("blur",h),function(){window.removeEventListener("focus",y),window.removeEventListener("blur",h)}},[s,y,l]),p.exports.createElement(sn,b({onClickAway:T},o),p.exports.createElement("div",b({onMouseEnter:R,onMouseLeave:k,ref:e},x),n))}),G="SnackbarItem",O={contentRoot:G+"-contentRoot",lessPadding:G+"-lessPadding",variantSuccess:G+"-variantSuccess",variantError:G+"-variantError",variantInfo:G+"-variantInfo",variantWarning:G+"-variantWarning",message:G+"-message",action:G+"-action",wrappedRoot:G+"-wrappedRoot"},Zn=U(Gn)(function(t){var e,n=t.theme,r=n.palette.mode||n.palette.type,o=$t(n.palette.background.default,r==="light"?.8:.98);return e={},e["&."+O.wrappedRoot]={position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0},e["."+O.contentRoot]=b({},n.typography.body2,{backgroundColor:o,color:n.palette.getContrastText(o),alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"}),e["."+O.lessPadding]={paddingLeft:8*2.5},e["."+O.variantSuccess]={backgroundColor:"#43a047",color:"#fff"},e["."+O.variantError]={backgroundColor:"#d32f2f",color:"#fff"},e["."+O.variantInfo]={backgroundColor:"#2196f3",color:"#fff"},e["."+O.variantWarning]={backgroundColor:"#ff9800",color:"#fff"},e["."+O.message]={display:"flex",alignItems:"center",padding:"8px 0"},e["."+O.action]={display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8},e}),Jn=function(e){var n=e.classes,r=re(e,["classes"]),o=p.exports.useRef(),a=p.exports.useState(!0),s=a[0],c=a[1];p.exports.useEffect(function(){return function(){o.current&&clearTimeout(o.current)}},[]);var d=de([r.snack.onClose,r.onClose],r.snack.key),u=function(){r.snack.requestClose&&d(null,ne.INSTRCUTED)},l=function(){o.current=setTimeout(function(){c(!s)},125)},f=r.style,x=r.ariaAttributes,w=r.className,E=r.hideIconVariant,v=r.iconVariant,h=r.snack,y=r.action,R=r.content,k=r.TransitionComponent,T=r.TransitionProps,_=r.transitionDuration,A=re(r,["style","dense","ariaAttributes","className","hideIconVariant","iconVariant","snack","action","content","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),S=h.key,Q=h.open,I=h.className,D=h.variant,j=h.content,N=h.action,X=h.ariaAttributes,q=h.anchorOrigin,ee=h.message,ce=h.TransitionComponent,$=h.TransitionProps,g=h.transitionDuration,F=re(h,["persist","key","open","entered","requestClose","className","variant","content","action","ariaAttributes","anchorOrigin","message","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),oe=b({},Kn,{},v)[D],fe=b({"aria-describedby":"notistack-snackbar"},Re(X,x)),Te=ce||k||ae.TransitionComponent,Ae=Re(g,_,ae.transitionDuration),Le=b({direction:Wn(q)},Re($,T)),se=N||y;typeof se=="function"&&(se=se(S));var m=j||R;typeof m=="function"&&(m=m(S,h.message));var L=["onEnter","onEntering","onEntered","onExit","onExiting","onExited"].reduce(function(B,K){var te;return b({},B,(te={},te[K]=de([r.snack[K],r[K]],r.snack.key),te))},{});return i(Jt,{unmountOnExit:!0,timeout:175,in:s,onExited:L.onExited,children:i(Zn,{...Object.assign({},A,F,{open:Q,className:W(n.root,O.wrappedRoot,n[Ee.toAnchorOrigin(q)]),onClose:d}),children:i(Te,{...Object.assign({appear:!0,in:Q,timeout:Ae},Le,{onExit:L.onExit,onExiting:L.onExiting,onExited:l,onEnter:L.onEnter,onEntering:L.onEntering,onEntered:de([L.onEntered,u])}),children:m||P(Hn,{...Object.assign({},fe,{role:"alert",style:f,className:W(O.contentRoot,O[Ee.toVariant(D)],n[Ee.toVariant(D)],w,I,!E&&oe&&O.lessPadding)}),children:[P("div",{id:fe["aria-describedby"],className:O.message,children:[E?null:oe,ee]}),se&&i("div",{className:O.action,children:se})]})})})})},Ie={container:"& > .MuiCollapse-container, & > .MuiCollapse-root",wrapper:"& > .MuiCollapse-container > .MuiCollapse-wrapper, & > .MuiCollapse-root > .MuiCollapse-wrapper"},Me=16,ie="SnackbarContainer",V={root:ie+"-root",rootDense:ie+"-rootDense",top:ie+"-top",bottom:ie+"-bottom",left:ie+"-left",right:ie+"-right",center:ie+"-center"},Qn=U("div")(function(t){var e,n,r,o,a,s,c=t.theme;return s={},s["&."+V.root]=(e={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:c.zIndex.snackbar,height:"auto",width:"auto",transition:"top 300ms ease 0ms, right 300ms ease 0ms, bottom 300ms ease 0ms, left 300ms ease 0ms, margin 300ms ease 0ms, max-width 300ms ease 0ms",pointerEvents:"none"},e[Ie.container]={pointerEvents:"all"},e[Ie.wrapper]={padding:Y.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},e.maxWidth="calc(100% - "+Y.view.default*2+"px)",e[c.breakpoints.down("sm")]={width:"100%",maxWidth:"calc(100% - "+Me*2+"px)"},e),s["&."+V.rootDense]=(n={},n[Ie.wrapper]={padding:Y.snackbar.dense+"px 0px"},n),s["&."+V.top]={top:Y.view.default-Y.snackbar.default,flexDirection:"column"},s["&."+V.bottom]={bottom:Y.view.default-Y.snackbar.default,flexDirection:"column-reverse"},s["&."+V.left]=(r={left:Y.view.default},r[c.breakpoints.up("sm")]={alignItems:"flex-start"},r[c.breakpoints.down("sm")]={left:Me+"px"},r),s["&."+V.right]=(o={right:Y.view.default},o[c.breakpoints.up("sm")]={alignItems:"flex-end"},o[c.breakpoints.down("sm")]={right:Me+"px"},o),s["&."+V.center]=(a={left:"50%",transform:"translateX(-50%)"},a[c.breakpoints.up("sm")]={alignItems:"center"},a),s}),er=function(e){var n=e.className,r=e.anchorOrigin,o=e.dense,a=re(e,["className","anchorOrigin","dense"]),s=W(V[r.vertical],V[r.horizontal],V.root,n,o&&V.rootDense);return i(Qn,{...Object.assign({className:s},a)})},tr=M.memo(er),nr=function(t){zn(e,t);function e(r){var o;return o=t.call(this,r)||this,o.enqueueSnackbar=function(a,s){s===void 0&&(s={});var c=s,d=c.key,u=c.preventDuplicate,l=re(c,["key","preventDuplicate"]),f=ve(d),x=f?d:new Date().getTime()+Math.random(),w=Nn(l,o.props,ae),E=b({key:x},l,{message:a,open:!0,entered:!1,requestClose:!1,variant:w("variant"),anchorOrigin:w("anchorOrigin"),autoHideDuration:w("autoHideDuration")});return l.persist&&(E.autoHideDuration=void 0),o.setState(function(v){if(u===void 0&&o.props.preventDuplicate||u){var h=function(T){return f?T.key===d:T.message===a},y=v.queue.findIndex(h)>-1,R=v.snacks.findIndex(h)>-1;if(y||R)return v}return o.handleDisplaySnack(b({},v,{queue:[].concat(v.queue,[E])}))}),x},o.handleDisplaySnack=function(a){var s=a.snacks;return s.length>=o.maxSnack?o.handleDismissOldest(a):o.processQueue(a)},o.processQueue=function(a){var s=a.queue,c=a.snacks;return s.length>0?b({},a,{snacks:[].concat(c,[s[0]]),queue:s.slice(1,s.length)}):a},o.handleDismissOldest=function(a){if(a.snacks.some(function(l){return!l.open||l.requestClose}))return a;var s=!1,c=!1,d=a.snacks.reduce(function(l,f){return l+(f.open&&f.persist?1:0)},0);d===o.maxSnack&&(c=!0);var u=a.snacks.map(function(l){return!s&&(!l.persist||c)?(s=!0,l.entered?(l.onClose&&l.onClose(null,ne.MAXSNACK,l.key),o.props.onClose&&o.props.onClose(null,ne.MAXSNACK,l.key),b({},l,{open:!1})):b({},l,{requestClose:!0})):b({},l)});return b({},a,{snacks:u})},o.handleEnteredSnack=function(a,s,c){if(!ve(c))throw new Error("handleEnteredSnack Cannot be called with undefined key");o.setState(function(d){var u=d.snacks;return{snacks:u.map(function(l){return l.key===c?b({},l,{entered:!0}):b({},l)})}})},o.handleCloseSnack=function(a,s,c){if(o.props.onClose&&o.props.onClose(a,s,c),s!==ne.CLICKAWAY){var d=c===void 0;o.setState(function(u){var l=u.snacks,f=u.queue;return{snacks:l.map(function(x){return!d&&x.key!==c?b({},x):x.entered?b({},x,{open:!1}):b({},x,{requestClose:!0})}),queue:f.filter(function(x){return x.key!==c})}})}},o.closeSnackbar=function(a){var s=o.state.snacks.find(function(c){return c.key===a});ve(a)&&s&&s.onClose&&s.onClose(null,ne.INSTRUCTED,a),o.handleCloseSnack(null,ne.INSTRUCTED,a)},o.handleExitedSnack=function(a,s,c){var d=s||c;if(!ve(d))throw new Error("handleExitedSnack Cannot be called with undefined key");o.setState(function(u){var l=o.processQueue(b({},u,{snacks:u.snacks.filter(function(f){return f.key!==d})}));return l.queue.length===0?l:o.handleDismissOldest(l)})},o.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:o.enqueueSnackbar.bind(Ke(o)),closeSnackbar:o.closeSnackbar.bind(Ke(o))}},o}var n=e.prototype;return n.render=function(){var o=this,a=this.state.contextValue,s=this.props,c=s.iconVariant,d=s.dense,u=d===void 0?ae.dense:d,l=s.hideIconVariant,f=l===void 0?ae.hideIconVariant:l,x=s.domRoot,w=s.children,E=s.classes,v=E===void 0?{}:E,h=re(s,["maxSnack","preventDuplicate","variant","anchorOrigin","iconVariant","dense","hideIconVariant","domRoot","children","classes"]),y=this.state.snacks.reduce(function(k,T){var _,A=Pn(T.anchorOrigin),S=k[A]||[];return b({},k,(_={},_[A]=[].concat(S,[T]),_))},{}),R=Object.keys(y).map(function(k){var T=y[k];return i(tr,{dense:u,anchorOrigin:T[0].anchorOrigin,className:W(v.containerRoot,v[Ee.toContainerAnchorOrigin(k)]),children:T.map(function(_){return i(Jn,{...Object.assign({},h,{key:_.key,snack:_,dense:u,iconVariant:c,hideIconVariant:f,classes:Bn(v),onClose:o.handleCloseSnack,onExited:de([o.handleExitedSnack,o.props.onExited]),onEntered:de([o.handleEnteredSnack,o.props.onEntered])})})})},k)});return P(at.Provider,{value:a,children:[w,x?dt.exports.createPortal(R,x):R]})},Mn(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||ae.maxSnack}}]),e}(p.exports.Component),ct=function(){return p.exports.useContext(at)};function rr(){return i(Z,{sx:{marginX:"auto"},children:P("label",{children:[i("input",{type:"file",style:{display:"none"},onChange:t=>{if(t.target.files.length>0){var e=new FormData;e.append("file",t.target.files[0]),H.post.file(e,z.node_id)}}}),i(ke,{title:"\u4E0A\u4F20",icon:it,component:"span",size:"small",icon_props:{sx:{marginLeft:"-0.1rem",color:"primary"}}})]})})}function or(t){let[e,n]=M.useState(void 0);const{enqueueSnackbar:r,closeSnackbar:o}=ct();return P(M.Fragment,{children:[i(ke,{title:"\u5220\u9664\u8D44\u6E90",icon:Sn,onClick:async a=>{n(a.currentTarget)}}),i(Wt,{anchorEl:e,open:!!e,onClose:a=>n(void 0),anchorOrigin:{vertical:"center",horizontal:"right"},children:i(jt,{onClick:async a=>{let s=await H.post.delete_resource(t.resource_id);r(s?"\u5220\u9664\u6210\u529F":"\u5220\u9664\u5931\u8D25"),n(void 0),s&&t.onSuccess&&t.onSuccess()},children:"\u786E\u5B9A\uFF1F"})})]})}function ir(t){let[e,n,r]=[t.id,t.name,t.url],[o,a]=M.useState(n);const{enqueueSnackbar:s,closeSnackbar:c}=ct();p.exports.useEffect(()=>{a(n)},[n]);let d=t.onSuccess||(()=>{});return i(Pe,{variant:"outlined",sx:{position:"relative",marginTop:"1rem",marginX:"1rem",marginBottom:"1rem",paddingY:"0.7rem"},children:P(xe,{force_direction:"row",children:[i(Z,{sx:{flex:1},children:P(xe,{children:[i(je,{variant:"standard",label:"name",value:o,fullWidth:!0,onChange:u=>{a(u.target.value)}}),i(je,{variant:"standard",label:"url",value:r,fullWidth:!0,sx:{marginTop:"1rem"},InputProps:{readOnly:!0}})]})}),i(Z,{children:P(xe,{children:[i(ke,{title:"\u66F4\u6539\u8D44\u6E90\u540D",icon:Dn,onClick:async u=>{let l={name:o},f=await H.post.manage_recourse(!1,l,e);s(f?"\u4FEE\u6539\u6587\u4EF6\u540D\u6210\u529F":"\u4FEE\u6539\u6587\u4EF6\u540D\u5931\u8D25")}}),P("label",{children:[i("input",{type:"file",style:{display:"none"},onChange:async u=>{let l=!1;if(u.target.files.length<=0)l=!1;else{var f=new FormData;f.append("file",u.target.files[0]);let x=await H.post.manage_recourse(!0,f,e);l=x,x&&d()}s(l?"\u4E0A\u4F20\u6587\u4EF6\u6210\u529F":"\u4E0A\u4F20\u6587\u4EF6\u5931\u8D25")}}),i(ke,{title:"\u66FF\u6362\u6587\u4EF6",icon:it,component:"span"})]}),i(or,{resource_id:e,onSuccess:d})]})})]})})}class ar extends M.Component{constructor(n){super(n);le(this,"contextType",pt);this.state={resources:[]}}async effect(){let n=await H.get.resources(z.node_id);this.setState({resources:n}),this.forceUpdate()}async componentDidMount(){this.effect()}render(){let n=this;return i(Z,{sx:n.context.printer.fonts.body,children:i(xe,{force_direction:"column",children:n.state.resources.map((r,o)=>{let[a,s,c]=r;return i(M.Fragment,{children:i(ir,{id:a,name:s,url:c,onSuccess:()=>{n.effect()}})},o)})})})}}function sr(t){let[e,n]=M.useState(!1);return P(M.Fragment,{children:[i(_e,{title:"\u67E5\u770B/\u7BA1\u7406\u6587\u4EF6",children:i(Se,{size:"small",onClick:()=>{n(!0)},children:i(Tn,{fontSize:"small",color:"primary"})})}),i(Cn,{anchor:"left",open:e,onClose:()=>n(!1),ModalProps:{keepMounted:!1},SlideProps:{onExited:()=>{}},PaperProps:{sx:{width:"40%"}},children:i(ar,{})})]})}class cr extends M.Component{constructor(e){super(e),this.state={snackbar_open:!1,status:!1}}render(){let e=this;return i(M.Fragment,{children:i(_e,{title:"\u751F\u6210\u6458\u8981",children:i(Se,{size:"small",onClick:()=>{H.post.tldr(z.node_id).then(()=>{let n=e.props.onSuccess;n&&n()})},children:i(yn,{fontSize:"small",color:"primary"})})})})}}class lr extends M.Component{constructor(e){super(e),this.state={snackbar_open:!1,status:!1}}render(){return i(M.Fragment,{children:i(_e,{title:"\u4FDD\u5B58",children:i(Se,{size:"small",onClick:()=>this.props.save_func(),children:i(qt,{fontSize:"small",color:"primary"})})})})}}function ze(t,e,n){return Je(t,e)&&t.concept==n}function ur(t,e){const n=e.normalizeNode;return e.normalizeNode=r=>{let[o,a]=r;if(ft("initializing")){n(r);return}if(a.length==0){let s=o,c=s.children.length;if(c==0||!ze(s.children[0],"support","\u5C0F\u8282\u7EBF")){t.add_nodes(t.get_core().create_support("\u5C0F\u8282\u7EBF"),[0]);return}if(!ze(s.children[c-1],"support","\u7AE0\u8282\u7EBF")){t.add_nodes(t.get_core().create_support("\u7AE0\u8282\u7EBF"),[c]);return}}if(ze(o,"support","\u7AE0\u8282\u7EBF")&&(a.length!=1||a[0]!=e.children.length-1)){t.delete_node_by_path(a);return}n(r)},e}function dr(t,e){const n=e.normalizeNode;return e.normalizeNode=r=>{let[o,a]=r;Je(o),n(r)},e}let pr=[ur,dr];function fr(t,e){for(let n of pr)e=n(t,e);return e}class hr extends M.Component{constructor(n){super(n);le(this,"editor_ref");le(this,"printer_ref");le(this,"snackerbar_ref");this.state={printer:void 0,editorcore:void 0,tree:void 0,cache:void 0,activate_idx:!0},this.editor_ref=M.createRef(),this.printer_ref=M.createRef(),this.snackerbar_ref=M.createRef()}update_title(n){var o,a;n||(n=this.state.tree),n&&(document.title=`\u7F16\u8F91\uFF1A${(a=(o=n.parameters)==null?void 0:o.title)==null?void 0:a.val}`)}open_snackerbar(n){this.snackerbar_ref&&this.snackerbar_ref.current&&this.snackerbar_ref.current.enqueueSnackbar(n)}async componentDidMount(){let n=this,r=await H.get.concept(z.node_id),o=St(r),a=new ht(Dt,o,Tt,At),s=new mt({renderers:Lt,default_renderers:Ft,printer:a}),c=await H.get.content(z.node_id);c||(c=s.create_abstract("root"),c.parameters={title:{val:`Article: ${z.node_id}`,type:"string"}}),n.update_title(c);let d=await H.get.cache(z.node_id);this.setState({printer:a,editorcore:s,tree:c,cache:d})}get_editor(){if(this.editor_ref&&this.editor_ref.current)return this.editor_ref.current.get_editor()}get_printer_comp(){if(this.printer_ref&&this.printer_ref.current)return this.printer_ref.current.get_component()}async save_content(n=void 0,r=void 0){n==null&&(n=this.state.tree),r==null&&(r=this.state.cache);let o=await H.post.content({content:n},z.node_id),a=await H.post.cache({cache:r},z.node_id);this.open_snackerbar(o&&a?"\u4FDD\u5B58\u6210\u529F":"\u4FDD\u5B58\u5931\u8D25")}scroll_to_selection(){let n=this.get_editor(),r=this.get_printer_comp();if(!(n&&r))return;let o=n.get_slate().selection;if(!(o&&o.focus&&o.focus.path))return;let a=o.focus.path;r.scroll_to(a)}update_tree(){let n=this.get_editor();if(!n)return;let r=n.get_root();return this.setState({tree:r}),this.update_title(),r}ShowIDButton(){let n=this,r=n.state.activate_idx?{backgroundColor:"rgb(20,20,20,0.8)",color:"rgb(200,170,220)"}:{};return i(Se,{sx:{marginLeft:"0.3rem"},onClick:o=>{n.setState({activate_idx:!n.state.activate_idx})},children:i(vt,{text:"\u77A7",sx:{...r}})})}render(){let n=this,{editorcore:r,printer:o,tree:a}=this.state;if(!(r&&o&&a))return i(gt,{});let[s,c]=(()=>{let{children:u,...l}=a;return[l,u]})(),d=n.ShowIDButton.bind(n);return i(Rt,{theme:Vt(he.mui),children:i(xt,{value:he,mui:!0,children:P(Z,{sx:u=>({position:"fixed",width:"100%",height:"100%",left:"0",right:"0",backgroundColor:u.palette.background.default,color:u.palette.text.primary}),children:[i(It,{}),i(nr,{maxSnack:3,ref:n.snackerbar_ref,anchorOrigin:{horizontal:"right",vertical:"top"},variant:"info",children:P(Z,{sx:{position:"absolute",top:"2%",left:"1%",height:"96%",width:"98%"},children:[P(on,{sx:{position:"absolute",left:"0",width:"auto",display:"flex",flexDirection:"column"},children:[i(lr,{save_func:n.save_content.bind(n)}),i(sr,{}),i(rr,{}),i(Ln,{}),i(Fn,{}),i(Rn,{}),i(In,{}),i(cr,{onSuccess:()=>{n.open_snackerbar("\u751F\u6210\u6458\u8981\u5B8C\u6210\uFF01")}})]}),P(Z,{sx:{position:"absolute",left:"3%",width:"96%",height:"100%"},children:[i(Z,{sx:{position:"absolute",width:"49%",left:"0%",top:"0",height:"100%"},children:i(Et,{ref:n.editor_ref,editorcore:r,init_rootproperty:s,init_rootchildren:c,onSave:()=>{let u=n.update_tree();setTimeout(()=>{Mt.go(),n.save_content(u),n.scroll_to_selection()},50)},theme:he,plugin:fr,extra_buttons:i(d,{})})}),i(kt,{sx:{position:"absolute",width:"49%",left:"51%",top:"0",height:"100%",overflow:"auto",paddingRight:"1%"},className:"mathjax_process",children:i(zt,{children:i(Ct,{value:{BackendData:z,cache:n.state.cache,activate_idx:n.state.activate_idx},children:i(bt,{printer:o,theme:he,onUpdateCache:u=>{u&&JSON.stringify(u)!=JSON.stringify(n.state.cache)?(setTimeout(()=>n.setState({cache:u}),200),n.open_snackerbar("\u751F\u6210\u7F13\u5B58\u6570\u636E\u5B8C\u6210\uFF01")):n.open_snackerbar("\u7F13\u5B58\u6570\u636E\u6CA1\u6709\u53D8\u5316\u3002")},ref:n.printer_ref,root:a,onDidMount:u=>{z.linkto&&setTimeout(()=>{let l=parseInt(z.linkto);u.scroll_to_idx(l);let f=u.get_ref_from_idx(l);f&&(f.style.border="2px solid")},300)}})})})})]})]})})]})})})}}wt.render(i(hr,{}),document.getElementById("root"));
