var Zr=Object.defineProperty;var en=(t,e,r)=>e in t?Zr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Ae=(t,e,r)=>(en(t,typeof e!="symbol"?e+"":e,r),r);import{r as f,am as tn,m as Be,j as S,c as rn,g as nn,s as on,an as sn,ao as an,Z as tr,_ as je,Y as cn,u as ln,e as un,i as dn,k as Xe,R as Fe,a4 as _e,a as Ge,a8 as vt,a6 as yt,a3 as k,a9 as Dt,a5 as Ye,a1 as fn,b as pe,ac as rr,B as He,I as nt,o as Ie,ap as pn,Q as hn,W as gn,n as mn,F as vn,V as Mt,aq as yn,w as Dn}from"./titleword.d4448fc4.js";import{_ as Sn,T as nr,s as xe,u as St,d as bn,a as or,b as We}from"./TransitionGroupContext.ce269ab8.js";import{L as xn}from"./Link.16ee6ed9.js";import{S as Tn}from"./Save.92fb3407.js";let kt=0;function Cn(t){const[e,r]=f.exports.useState(t),o=t||e;return f.exports.useEffect(()=>{e==null&&(kt+=1,r(`mui-${kt}`))},[e]),o}const Lt=tn["useId"];function En(t){if(Lt!==void 0){const e=Lt();return t!=null?t:e}return Cn(t)}function $t({controlled:t,default:e,name:r,state:o="value"}){const{current:n}=f.exports.useRef(t!==void 0),[i,s]=f.exports.useState(e),c=n?t:i,u=f.exports.useCallback(d=>{n||s(d)},[]);return[c,u]}var In=Be(S("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),On=Be(S("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),wn=Be(S("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Nn(t){return nn("MuiCheckbox",t)}const _n=rn("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);var ot=_n;const Pn=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Rn=t=>{const{classes:e,indeterminate:r,color:o}=t,n={root:["root",r&&"indeterminate",`color${tr(o)}`]},i=Xe(n,Nn,e);return je({},e,i)},Mn=on(sn,{shouldForwardProp:t=>an(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.indeterminate&&e.indeterminate,r.color!=="default"&&e[`color${tr(r.color)}`]]}})(({theme:t,ownerState:e})=>je({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:cn(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${ot.checked}, &.${ot.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${ot.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),kn=S(On,{}),Ln=S(In,{}),$n=S(wn,{}),An=f.exports.forwardRef(function(e,r){var o,n;const i=ln({props:e,name:"MuiCheckbox"}),{checkedIcon:s=kn,color:c="primary",icon:u=Ln,indeterminate:d=!1,indeterminateIcon:g=$n,inputProps:D,size:y="medium",className:p}=i,E=un(i,Pn),m=d?g:u,v=d?g:s,w=je({},i,{color:c,indeterminate:d,size:y}),M=Rn(w);return S(Mn,je({type:"checkbox",inputProps:je({"data-indeterminate":d},D),icon:f.exports.cloneElement(m,{fontSize:(o=m.props.fontSize)!=null?o:y}),checkedIcon:f.exports.cloneElement(v,{fontSize:(n=v.props.fontSize)!=null?n:y}),ownerState:w,ref:r,className:dn(M.root,p)},E,{classes:M}))});var Hn=An,Fn=Be(S("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),Un=Be(S("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore");function jn(t){function e(r,o){o[r.my_id]=r;for(let n of r.sons)e(n,o);return o}return e(t,{})}function zn(t,e=-1){if(t.sort((o,n)=>o[2]<n[2]?1:0),e>0){let o=t.filter(n=>n[0]==e)[0];o[1]=-1}let r=o=>Object.values(t.filter(n=>n[1]==o)).map(n=>({my_id:n[0],father_id:o,sons:r(n[0]),secret:n[3]}));return{my_id:-1,father_id:-1,sons:r(-1),secret:!0}}function Bn(t){let e=(r,o)=>{let n=[[r.my_id,r.father_id,o,r.secret]];r.my_id<0&&(n=[]);for(let i in r.sons){let s=parseInt(i);n=[...n,...e(r.sons[s],s)]}return n};return e(t,-1)}class bt{constructor(e,r){Ae(this,"root_id");Ae(this,"nodetree");Ae(this,"_id2node");e!=null&&this.update_rawinfo(e,r)}deepcopy(){return new bt(this.get_raw(),this.root_id)}update_nodetree(e){return this.nodetree=e,this._id2node=jn(e),this}update_rawinfo(e,r){this.root_id=r;let o=zn(e,r);return this.update_nodetree(o),this}id2node(e){return this._id2node[e]}get_raw(){return Bn(this.nodetree)}get_root(){return this.nodetree}is_son(e,r){for(;r=this.id2node(r).father_id,r!=-1;)if(r==e)return!0;return!1}}var At={disabled:!1},Vn=function(e){return e.scrollTop},Ue="unmounted",De="exited",Se="entering",Ne="entered",dt="exiting",ie=function(t){Sn(e,t);function e(o,n){var i;i=t.call(this,o,n)||this;var s=n,c=s&&!s.isMounting?o.enter:o.appear,u;return i.appearStatus=null,o.in?c?(u=De,i.appearStatus=Se):u=Ne:o.unmountOnExit||o.mountOnEnter?u=Ue:u=De,i.state={status:u},i.nextCallback=null,i}e.getDerivedStateFromProps=function(n,i){var s=n.in;return s&&i.status===Ue?{status:De}:null};var r=e.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(n){var i=null;if(n!==this.props){var s=this.state.status;this.props.in?s!==Se&&s!==Ne&&(i=Se):(s===Se||s===Ne)&&(i=dt)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var n=this.props.timeout,i,s,c;return i=s=c=n,n!=null&&typeof n!="number"&&(i=n.exit,s=n.enter,c=n.appear!==void 0?n.appear:s),{exit:i,enter:s,appear:c}},r.updateStatus=function(n,i){if(n===void 0&&(n=!1),i!==null)if(this.cancelNextCallback(),i===Se){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:Fe.findDOMNode(this);s&&Vn(s)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===De&&this.setState({status:Ue})},r.performEnter=function(n){var i=this,s=this.props.enter,c=this.context?this.context.isMounting:n,u=this.props.nodeRef?[c]:[Fe.findDOMNode(this),c],d=u[0],g=u[1],D=this.getTimeouts(),y=c?D.appear:D.enter;if(!n&&!s||At.disabled){this.safeSetState({status:Ne},function(){i.props.onEntered(d)});return}this.props.onEnter(d,g),this.safeSetState({status:Se},function(){i.props.onEntering(d,g),i.onTransitionEnd(y,function(){i.safeSetState({status:Ne},function(){i.props.onEntered(d,g)})})})},r.performExit=function(){var n=this,i=this.props.exit,s=this.getTimeouts(),c=this.props.nodeRef?void 0:Fe.findDOMNode(this);if(!i||At.disabled){this.safeSetState({status:De},function(){n.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:dt},function(){n.props.onExiting(c),n.onTransitionEnd(s.exit,function(){n.safeSetState({status:De},function(){n.props.onExited(c)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(n,i){i=this.setNextCallback(i),this.setState(n,i)},r.setNextCallback=function(n){var i=this,s=!0;return this.nextCallback=function(c){s&&(s=!1,i.nextCallback=null,n(c))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},r.onTransitionEnd=function(n,i){this.setNextCallback(i);var s=this.props.nodeRef?this.props.nodeRef.current:Fe.findDOMNode(this),c=n==null&&!this.props.addEndListener;if(!s||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],d=u[0],g=u[1];this.props.addEndListener(d,g)}n!=null&&setTimeout(this.nextCallback,n)},r.render=function(){var n=this.state.status;if(n===Ue)return null;var i=this.props,s=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var c=_e(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Ge.createElement(nr.Provider,{value:null},typeof s=="function"?s(n,c):Ge.cloneElement(Ge.Children.only(s),c))},e}(Ge.Component);ie.contextType=nr;ie.propTypes={};function Oe(){}ie.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:Oe,onEntering:Oe,onEntered:Oe,onExit:Oe,onExiting:Oe,onExited:Oe};ie.UNMOUNTED=Ue;ie.EXITED=De;ie.ENTERING=Se;ie.ENTERED=Ne;ie.EXITING=dt;var Gn=ie;function Ht(t,e){var r,o;const{timeout:n,easing:i,style:s={}}=t;return{duration:(r=s.transitionDuration)!=null?r:typeof n=="number"?n:n[e.mode]||0,easing:(o=s.transitionTimingFunction)!=null?o:typeof i=="object"?i[e.mode]:i,delay:s.transitionDelay}}function Wn(t){return vt("MuiCollapse",t)}yt("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const qn=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],Kn=t=>{const{orientation:e,classes:r}=t,o={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return Xe(o,Wn,r)},Xn=xe("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,e[r.orientation],r.state==="entered"&&e.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>k({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&k({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),Yn=xe("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>k({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),Qn=xe("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>k({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),ir=f.exports.forwardRef(function(e,r){const o=St({props:e,name:"MuiCollapse"}),{addEndListener:n,children:i,className:s,collapsedSize:c="0px",component:u,easing:d,in:g,onEnter:D,onEntered:y,onEntering:p,onExit:E,onExited:m,onExiting:v,orientation:w="vertical",style:M,timeout:b=bn.standard,TransitionComponent:j=Gn}=o,L=_e(o,qn),F=k({},o,{orientation:w,collapsedSize:c}),A=Kn(F),he=or(),Te=f.exports.useRef(),W=f.exports.useRef(null),se=f.exports.useRef(),ae=typeof c=="number"?`${c}px`:c,X=w==="horizontal",q=X?"width":"height";f.exports.useEffect(()=>()=>{clearTimeout(Te.current)},[]);const te=f.exports.useRef(null),O=Dt(r,te),z=C=>P=>{if(C){const V=te.current;P===void 0?C(V):C(V,P)}},N=()=>W.current?W.current[X?"clientWidth":"clientHeight"]:0,re=z((C,P)=>{W.current&&X&&(W.current.style.position="absolute"),C.style[q]=ae,D&&D(C,P)}),Z=z((C,P)=>{const V=N();W.current&&X&&(W.current.style.position="");const{duration:G,easing:$}=Ht({style:M,timeout:b,easing:d},{mode:"enter"});if(b==="auto"){const ee=he.transitions.getAutoHeightDuration(V);C.style.transitionDuration=`${ee}ms`,se.current=ee}else C.style.transitionDuration=typeof G=="string"?G:`${G}ms`;C.style[q]=`${V}px`,C.style.transitionTimingFunction=$,p&&p(C,P)}),ge=z((C,P)=>{C.style[q]="auto",y&&y(C,P)}),U=z(C=>{C.style[q]=`${N()}px`,E&&E(C)}),ce=z(m),B=z(C=>{const P=N(),{duration:V,easing:G}=Ht({style:M,timeout:b,easing:d},{mode:"exit"});if(b==="auto"){const $=he.transitions.getAutoHeightDuration(P);C.style.transitionDuration=`${$}ms`,se.current=$}else C.style.transitionDuration=typeof V=="string"?V:`${V}ms`;C.style[q]=ae,C.style.transitionTimingFunction=G,v&&v(C)});return S(j,k({in:g,onEnter:re,onEntered:ge,onEntering:Z,onExit:U,onExited:ce,onExiting:B,addEndListener:C=>{b==="auto"&&(Te.current=setTimeout(C,se.current||0)),n&&n(te.current,C)},nodeRef:te,timeout:b==="auto"?null:b},L,{children:(C,P)=>S(Xn,k({as:u,className:Ye(A.root,s,{entered:A.entered,exited:!g&&ae==="0px"&&A.hidden}[C]),style:k({[X?"minWidth":"minHeight"]:ae},M),ownerState:k({},F,{state:C}),ref:O},P,{children:S(Yn,{ownerState:k({},F,{state:C}),className:A.wrapper,ref:W,children:S(Qn,{ownerState:k({},F,{state:C}),className:A.wrapperInner,children:i})})}))}))});ir.muiSupportAuto=!0;var sr=ir;const Jn=f.exports.createContext({});var xt=Jn;const Zn=["element"];function eo(t,e){for(let r=0;r<t.length;r+=1)if(e(t[r]))return r;return-1}function to(t,e){let r=0,o=t.length-1;for(;r<=o;){const n=Math.floor((r+o)/2);if(t[n].element===e)return n;t[n].element.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING?o=n-1:r=n+1}return r}const ar=f.exports.createContext({});function ro(t){const e=f.exports.useRef(null);return f.exports.useEffect(()=>{e.current=t},[t]),e.current}const Ft=()=>{};function no(t){const[,e]=f.exports.useState(),{registerDescendant:r=Ft,unregisterDescendant:o=Ft,descendants:n=[],parentId:i=null}=f.exports.useContext(ar),s=eo(n,d=>d.element===t.element),c=ro(n),u=n.some((d,g)=>c&&c[g]&&c[g].element!==d.element);return fn(()=>{if(t.element)return r(k({},t,{index:s})),()=>{o(t.element)};e({})},[r,o,s,u,t]),{parentId:i,index:s}}function cr(t){const{children:e,id:r}=t,[o,n]=f.exports.useState([]),i=f.exports.useCallback(u=>{let{element:d}=u,g=_e(u,Zn);n(D=>{let y;if(D.length===0)return[k({},g,{element:d,index:0})];const p=to(D,d);if(D[p]&&D[p].element===d)y=D;else{const E=k({},g,{element:d,index:p});y=D.slice(),y.splice(p,0,E)}return y.forEach((E,m)=>{E.index=m}),y})},[]),s=f.exports.useCallback(u=>{n(d=>d.filter(g=>u!==g.element))},[]),c=f.exports.useMemo(()=>({descendants:o,registerDescendant:i,unregisterDescendant:s,parentId:r}),[o,i,s,r]);return S(ar.Provider,{value:c,children:e})}function oo(t){const{focus:e,isExpanded:r,isExpandable:o,isFocused:n,isDisabled:i,isSelected:s,multiSelect:c,selectNode:u,selectRange:d,toggleExpansion:g}=f.exports.useContext(xt),D=o?o(t):!1,y=r?r(t):!1,p=n?n(t):!1,E=i?i(t):!1,m=s?s(t):!1;return{disabled:E,expanded:y,selected:m,focused:p,handleExpansion:b=>{if(!E){p||e(b,t);const j=c&&(b.shiftKey||b.ctrlKey||b.metaKey);D&&!(j&&r(t))&&g(b,t)}},handleSelection:b=>{E||(p||e(b,t),c&&(b.shiftKey||b.ctrlKey||b.metaKey)?b.shiftKey?d(b,{end:t}):u(b,t,!0):u(b,t))},preventSelection:b=>{(b.shiftKey||b.ctrlKey||b.metaKey||E)&&b.preventDefault()}}}const io=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"],so=f.exports.forwardRef(function(e,r){const{classes:o,className:n,displayIcon:i,expansionIcon:s,icon:c,label:u,nodeId:d,onClick:g,onMouseDown:D}=e,y=_e(e,io),{disabled:p,expanded:E,selected:m,focused:v,handleExpansion:w,handleSelection:M,preventSelection:b}=oo(d),j=c||s||i,L=A=>{b(A),D&&D(A)},F=A=>{w(A),M(A),g&&g(A)};return pe("div",k({className:Ye(n,o.root,E&&o.expanded,m&&o.selected,v&&o.focused,p&&o.disabled),onClick:F,onMouseDown:L,ref:r},y,{children:[S("div",{className:o.iconContainer,children:j}),S("div",{className:o.label,children:u})]}))});var lr=so;function ao(t){return vt("MuiTreeItem",t)}const co=yt("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]);var fe=co;const lo=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],uo=t=>{const{classes:e}=t;return Xe({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},ao,e)},fo=xe("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(t,e)=>e.root})({listStyle:"none",margin:0,padding:0,outline:0}),po=xe(lr,{name:"MuiTreeItem",slot:"Content",overridesResolver:(t,e)=>[e.content,e.iconContainer&&{[`& .${fe.iconContainer}`]:e.iconContainer},e.label&&{[`& .${fe.label}`]:e.label}]})(({theme:t})=>({padding:"0 8px",width:"100%",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${fe.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${fe.focused}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${fe.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:We(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:We(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:We(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${fe.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:We(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`& .${fe.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${fe.label}`]:k({width:"100%",minWidth:0,paddingLeft:4,position:"relative"},t.typography.body1)})),ho=xe(sr,{name:"MuiTreeItem",slot:"Group",overridesResolver:(t,e)=>e.group})({margin:0,padding:0,marginLeft:17}),go=f.exports.forwardRef(function(e,r){const o=St({props:e,name:"MuiTreeItem"}),{children:n,className:i,collapseIcon:s,ContentComponent:c=lr,ContentProps:u,endIcon:d,expandIcon:g,disabled:D,icon:y,id:p,label:E,nodeId:m,onClick:v,onMouseDown:w,TransitionComponent:M=sr,TransitionProps:b}=o,j=_e(o,lo),{icons:L={},focus:F,isExpanded:A,isFocused:he,isSelected:Te,isDisabled:W,multiSelect:se,disabledItemsFocusable:ae,mapFirstChar:X,unMapFirstChar:q,registerNode:te,unregisterNode:O,treeId:z}=f.exports.useContext(xt);let N=null;p!=null?N=p:z&&m&&(N=`${z}-${m}`);const[re,Z]=f.exports.useState(null),ge=f.exports.useRef(null),U=Dt(Z,r),ce=f.exports.useMemo(()=>({element:re,id:m}),[m,re]),{index:B,parentId:le}=no(ce),C=Boolean(Array.isArray(n)?n.length:n),P=A?A(m):!1,V=he?he(m):!1,G=Te?Te(m):!1,$=W?W(m):!1,ee=k({},o,{expanded:P,focused:V,selected:G,disabled:$}),K=uo(ee);let me,ve;C&&(P?ve=s||L.defaultCollapseIcon:ve=g||L.defaultExpandIcon),C?me=L.defaultParentIcon:me=d||L.defaultEndIcon,f.exports.useEffect(()=>{if(te&&O&&B!==-1)return te({id:m,idAttribute:N,index:B,parentId:le,expandable:C,disabled:D}),()=>{O(m)}},[te,O,le,B,m,C,D,N]),f.exports.useEffect(()=>{if(X&&q&&E)return X(m,ge.current.textContent.substring(0,1).toLowerCase()),()=>{q(m)}},[X,q,m,E]);let Re;se?Re=G:G&&(Re=!0);function rt(ue){ue.target===ue.currentTarget&&rr(ue.target).getElementById(z).focus({preventScroll:!0});const ne=!ae&&$;!V&&ue.currentTarget===ue.target&&!ne&&F(ue,m)}return pe(fo,k({className:Ye(K.root,i),role:"treeitem","aria-expanded":C?P:null,"aria-selected":Re,"aria-disabled":$||null,ref:U,id:N,tabIndex:-1},j,{ownerState:ee,onFocus:rt,children:[S(po,k({as:c,ref:ge,classes:{root:K.content,expanded:K.expanded,selected:K.selected,focused:K.focused,disabled:K.disabled,iconContainer:K.iconContainer,label:K.label},label:E,nodeId:m,onClick:v,onMouseDown:w,icon:y,expansionIcon:ve,displayIcon:me,ownerState:ee},u)),n&&S(cr,{id:m,children:S(ho,k({as:M,unmountOnExit:!0,className:K.group,in:P,component:"ul",role:"group"},b,{children:n}))})]}))});var mo=go;function vo(t){return vt("MuiTreeView",t)}yt("MuiTreeView",["root"]);const yo=["children","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disabledItemsFocusable","disableSelection","expanded","id","multiSelect","onBlur","onFocus","onKeyDown","onNodeFocus","onNodeSelect","onNodeToggle","selected"],Do=t=>{const{classes:e}=t;return Xe({root:["root"]},vo,e)},So=xe("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:0,margin:0,listStyle:"none",outline:0});function bo(t){return t&&t.length===1&&t.match(/\S/)}function Ut(t,e,r){for(let o=e;o<t.length;o+=1)if(r===t[o])return o;return-1}function jt(){return!1}const xo=[],To=[],Co=f.exports.forwardRef(function(e,r){const o=St({props:e,name:"MuiTreeView"}),{children:n,className:i,defaultCollapseIcon:s,defaultEndIcon:c,defaultExpanded:u=xo,defaultExpandIcon:d,defaultParentIcon:g,defaultSelected:D=To,disabledItemsFocusable:y=!1,disableSelection:p=!1,expanded:E,id:m,multiSelect:v=!1,onBlur:w,onFocus:M,onKeyDown:b,onNodeFocus:j,onNodeSelect:L,onNodeToggle:F,selected:A}=o,he=_e(o,yo),W=or().direction==="rtl",se=k({},o,{defaultExpanded:u,defaultSelected:D,disabledItemsFocusable:y,disableSelection:p,multiSelect:v}),ae=Do(se),X=En(m),q=f.exports.useRef(null),te=Dt(q,r),[O,z]=f.exports.useState(null),N=f.exports.useRef({}),re=f.exports.useRef({}),[Z,ge]=$t({controlled:E,default:u,name:"TreeView",state:"expanded"}),[U,ce]=$t({controlled:A,default:D,name:"TreeView",state:"selected"}),B=f.exports.useCallback(a=>Array.isArray(Z)?Z.indexOf(a)!==-1:!1,[Z]),le=f.exports.useCallback(a=>N.current[a]&&N.current[a].expandable,[]),C=f.exports.useCallback(a=>Array.isArray(U)?U.indexOf(a)!==-1:U===a,[U]),P=f.exports.useCallback(a=>{let l=N.current[a];if(!l)return!1;if(l.disabled)return!0;for(;l.parentId!=null;)if(l=N.current[l.parentId],l.disabled)return!0;return!1},[]),V=a=>O===a,G=a=>Object.keys(N.current).map(l=>N.current[l]).filter(l=>l.parentId===a).sort((l,h)=>l.index-h.index).map(l=>l.id),$=a=>{let l=G(a);return y||(l=l.filter(h=>!P(h))),l},ee=a=>{if(B(a)&&$(a).length>0)return $(a)[0];let l=N.current[a];for(;l!=null;){const h=$(l.parentId),T=h[h.indexOf(l.id)+1];if(T)return T;l=N.current[l.parentId]}return null},K=a=>{const l=N.current[a],h=$(l.parentId),T=h.indexOf(a);if(T===0)return l.parentId;let I=h[T-1];for(;B(I)&&$(I).length>0;)I=$(I).pop();return I},me=()=>{let a=$(null).pop();for(;B(a);)a=$(a).pop();return a},ve=()=>$(null)[0],Re=a=>N.current[a].parentId,rt=(a,l)=>{if(a===l)return[a,l];const h=N.current[a],T=N.current[l];if(h.parentId===T.id||T.parentId===h.id)return T.parentId===h.id?[h.id,T.id]:[T.id,h.id];const I=[h.id],_=[T.id];let R=h.parentId,H=T.parentId,Y=_.indexOf(R)!==-1,ke=I.indexOf(H)!==-1,Ee=!0,Le=!0;for(;!ke&&!Y;)Ee&&(I.push(R),Y=_.indexOf(R)!==-1,Ee=R!==null,!Y&&Ee&&(R=N.current[R].parentId)),Le&&!Y&&(_.push(H),ke=I.indexOf(H)!==-1,Le=H!==null,!ke&&Le&&(H=N.current[H].parentId));const $e=Y?R:H,Rt=G($e),Qr=I[I.indexOf($e)-1],Jr=_[_.indexOf($e)-1];return Rt.indexOf(Qr)<Rt.indexOf(Jr)?[a,l]:[l,a]},ue=(a,l)=>{const[h,T]=rt(a,l),I=[h];let _=h;for(;_!==T;)_=ee(_),I.push(_);return I},ne=(a,l)=>{l&&(z(l),j&&j(a,l))},Nt=(a,l)=>ne(a,ee(l)),Nr=(a,l)=>ne(a,K(l)),_r=a=>ne(a,ve()),Pr=a=>ne(a,me()),Rr=(a,l,h)=>{let T,I;const _=h.toLowerCase(),R=[],H=[];Object.keys(re.current).forEach(Y=>{const ke=re.current[Y],Ee=N.current[Y],Le=Ee.parentId?B(Ee.parentId):!0,$e=y?!1:P(Y);Le&&!$e&&(R.push(Y),H.push(ke))}),T=R.indexOf(l)+1,T>=R.length&&(T=0),I=Ut(H,T,_),I===-1&&(I=Ut(H,0,_)),I>-1&&ne(a,R[I])},Ve=(a,l=O)=>{let h;Z.indexOf(l)!==-1?h=Z.filter(T=>T!==l):h=[l].concat(Z),F&&F(a,h),ge(h)},Mr=(a,l)=>{const h=N.current[l],I=G(h.parentId).filter(R=>le(R)&&!B(R)),_=Z.concat(I);I.length>0&&(ge(_),F&&F(a,_))},de=f.exports.useRef(null),Ce=f.exports.useRef(!1),oe=f.exports.useRef([]),kr=(a,l)=>{let h=U.slice();const{start:T,next:I,current:_}=l;!I||!_||(oe.current.indexOf(_)===-1&&(oe.current=[]),Ce.current?oe.current.indexOf(I)!==-1?(h=h.filter(R=>R===T||R!==_),oe.current=oe.current.filter(R=>R===T||R!==_)):(h.push(I),oe.current.push(I)):(h.push(I),oe.current.push(_,I)),L&&L(a,h),ce(h))},Lr=(a,l)=>{let h=U.slice();const{start:T,end:I}=l;Ce.current&&(h=h.filter(H=>oe.current.indexOf(H)===-1));let _=ue(T,I);_=_.filter(H=>!P(H)),oe.current=_;let R=h.concat(_);R=R.filter((H,Y)=>R.indexOf(H)===Y),L&&L(a,R),ce(R)},$r=(a,l)=>{let h;U.indexOf(l)!==-1?h=U.filter(T=>T!==l):h=[l].concat(U),L&&L(a,h),ce(h)},Ar=(a,l)=>{const h=v?[l]:l;L&&L(a,h),ce(h)},Me=(a,l,h=!1)=>l?(h?$r(a,l):Ar(a,l),de.current=l,Ce.current=!1,oe.current=[],!0):!1,ye=(a,l,h=!1)=>{const{start:T=de.current,end:I,current:_}=l;h?kr(a,{start:T,next:I,current:_}):T!=null&&I!=null&&Lr(a,{start:T,end:I}),Ce.current=!0},Hr=(a,l)=>{de.current||(de.current=l);const h=Ce.current?de.current:l;ye(a,{start:h,end:ve()})},Fr=(a,l)=>{de.current||(de.current=l);const h=Ce.current?de.current:l;ye(a,{start:h,end:me()})},Ur=(a,l)=>{P(ee(l))||ye(a,{end:ee(l),current:l},!0)},jr=(a,l)=>{P(K(l))||ye(a,{end:K(l),current:l},!0)},zr=a=>{ye(a,{start:ve(),end:me()})},Br=f.exports.useCallback(a=>{const{id:l,index:h,parentId:T,expandable:I,idAttribute:_,disabled:R}=a;N.current[l]={id:l,index:h,parentId:T,expandable:I,idAttribute:_,disabled:R}},[]),Vr=f.exports.useCallback(a=>{const l=k({},N.current);delete l[a],N.current=l,z(h=>h===a&&q.current===rr(q.current).activeElement?G(null)[0]:h)},[]),Gr=f.exports.useCallback((a,l)=>{re.current[a]=l},[]),Wr=f.exports.useCallback(a=>{const l=k({},re.current);delete l[a],re.current=l},[]),_t=a=>(le(O)&&(B(O)?Nt(a,O):P(O)||Ve(a)),!0),Pt=a=>{if(B(O)&&!P(O))return Ve(a,O),!0;const l=Re(O);return l?(ne(a,l),!0):!1},qr=a=>{let l=!1;const h=a.key;if(a.altKey||a.currentTarget!==a.target||!O)return;const T=a.ctrlKey||a.metaKey;switch(h){case" ":!p&&!P(O)&&(v&&a.shiftKey?(ye(a,{end:O}),l=!0):v?l=Me(a,O,!0):l=Me(a,O)),a.stopPropagation();break;case"Enter":P(O)||(le(O)?(Ve(a),l=!0):v?l=Me(a,O,!0):l=Me(a,O)),a.stopPropagation();break;case"ArrowDown":v&&a.shiftKey&&!p&&Ur(a,O),Nt(a,O),l=!0;break;case"ArrowUp":v&&a.shiftKey&&!p&&jr(a,O),Nr(a,O),l=!0;break;case"ArrowRight":W?l=Pt(a):l=_t(a);break;case"ArrowLeft":W?l=_t(a):l=Pt(a);break;case"Home":v&&T&&a.shiftKey&&!p&&!P(O)&&Hr(a,O),_r(a),l=!0;break;case"End":v&&T&&a.shiftKey&&!p&&!P(O)&&Fr(a,O),Pr(a),l=!0;break;default:h==="*"?(Mr(a,O),l=!0):v&&T&&h.toLowerCase()==="a"&&!p?(zr(a),l=!0):!T&&!a.shiftKey&&bo(h)&&(Rr(a,O,h),l=!0)}l&&(a.preventDefault(),a.stopPropagation()),b&&b(a)},Kr=a=>{if(a.target===a.currentTarget){const l=Array.isArray(U)?U[0]:U;ne(a,l||$(null)[0])}M&&M(a)},Xr=a=>{z(null),w&&w(a)},Yr=N.current[O]?N.current[O].idAttribute:null;return S(xt.Provider,{value:{icons:{defaultCollapseIcon:s,defaultExpandIcon:d,defaultParentIcon:g,defaultEndIcon:c},focus:ne,toggleExpansion:Ve,isExpanded:B,isExpandable:le,isFocused:V,isSelected:C,isDisabled:P,selectNode:p?jt:Me,selectRange:p?jt:ye,multiSelect:v,disabledItemsFocusable:y,mapFirstChar:Gr,unMapFirstChar:Wr,registerNode:Br,unregisterNode:Vr,treeId:X},children:S(cr,{children:S(So,k({role:"tree",id:X,"aria-activedescendant":Yr,"aria-multiselectable":v,className:Ye(ae.root,i),ref:te,tabIndex:0,onKeyDown:qr,onFocus:Kr,onBlur:Xr,ownerState:se},he,{children:n}))})})});var Eo=Co;const ur=f.exports.createContext({dragDropManager:void 0});function Q(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var zt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),it=function(){return Math.random().toString(36).substring(7).split("").join(".")},Bt={INIT:"@@redux/INIT"+it(),REPLACE:"@@redux/REPLACE"+it(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+it()}};function Io(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function dr(t,e,r){var o;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(Q(0));if(typeof e=="function"&&typeof r=="undefined"&&(r=e,e=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(Q(1));return r(dr)(t,e)}if(typeof t!="function")throw new Error(Q(2));var n=t,i=e,s=[],c=s,u=!1;function d(){c===s&&(c=s.slice())}function g(){if(u)throw new Error(Q(3));return i}function D(m){if(typeof m!="function")throw new Error(Q(4));if(u)throw new Error(Q(5));var v=!0;return d(),c.push(m),function(){if(!!v){if(u)throw new Error(Q(6));v=!1,d();var M=c.indexOf(m);c.splice(M,1),s=null}}}function y(m){if(!Io(m))throw new Error(Q(7));if(typeof m.type=="undefined")throw new Error(Q(8));if(u)throw new Error(Q(9));try{u=!0,i=n(i,m)}finally{u=!1}for(var v=s=c,w=0;w<v.length;w++){var M=v[w];M()}return m}function p(m){if(typeof m!="function")throw new Error(Q(10));n=m,y({type:Bt.REPLACE})}function E(){var m,v=D;return m={subscribe:function(M){if(typeof M!="object"||M===null)throw new Error(Q(11));function b(){M.next&&M.next(g())}b();var j=v(b);return{unsubscribe:j}}},m[zt]=function(){return this},m}return y({type:Bt.INIT}),o={dispatch:y,subscribe:D,getState:g,replaceReducer:p},o[zt]=E,o}function x(t,e,...r){if(Oo()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let o;if(e===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;o=new Error(e.replace(/%s/g,function(){return r[n++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}}function Oo(){return typeof process!="undefined"&&process.env.NODE_ENV==="production"}function wo(t,e,r){return e.split(".").reduce((o,n)=>o&&o[n]?o[n]:r||null,t)}function No(t,e){return t.filter(r=>r!==e)}function fr(t){return typeof t=="object"}function _o(t,e){const r=new Map,o=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};t.forEach(o),e.forEach(o);const n=[];return r.forEach((i,s)=>{i===1&&n.push(s)}),n}function Po(t,e){return t.filter(r=>e.indexOf(r)>-1)}const Tt="dnd-core/INIT_COORDS",Qe="dnd-core/BEGIN_DRAG",Ct="dnd-core/PUBLISH_DRAG_SOURCE",Je="dnd-core/HOVER",Ze="dnd-core/DROP",et="dnd-core/END_DRAG";function Vt(t,e){return{type:Tt,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const Ro={type:Tt,payload:{clientOffset:null,sourceClientOffset:null}};function Mo(t){return function(r=[],o={publishSource:!0}){const{publishSource:n=!0,clientOffset:i,getSourceClientOffset:s}=o,c=t.getMonitor(),u=t.getRegistry();t.dispatch(Vt(i)),ko(r,c,u);const d=Ao(r,c);if(d==null){t.dispatch(Ro);return}let g=null;if(i){if(!s)throw new Error("getSourceClientOffset must be defined");Lo(s),g=s(d)}t.dispatch(Vt(i,g));const y=u.getSource(d).beginDrag(c,d);if(y==null)return;$o(y),u.pinSource(d);const p=u.getSourceType(d);return{type:Qe,payload:{itemType:p,item:y,sourceId:d,clientOffset:i||null,sourceClientOffset:g||null,isSourcePublic:!!n}}}}function ko(t,e,r){x(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(o){x(r.getSource(o),"Expected sourceIds to be registered.")})}function Lo(t){x(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function $o(t){x(fr(t),"Item must be an object.")}function Ao(t,e){let r=null;for(let o=t.length-1;o>=0;o--)if(e.canDragSource(t[o])){r=t[o];break}return r}function Ho(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Fo(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){Ho(t,n,r[n])})}return t}function Uo(t){return function(r={}){const o=t.getMonitor(),n=t.getRegistry();jo(o),Vo(o).forEach((s,c)=>{const u=zo(s,c,n,o),d={type:Ze,payload:{dropResult:Fo({},r,u)}};t.dispatch(d)})}}function jo(t){x(t.isDragging(),"Cannot call drop while not dragging."),x(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function zo(t,e,r,o){const n=r.getTarget(t);let i=n?n.drop(o,t):void 0;return Bo(i),typeof i=="undefined"&&(i=e===0?{}:o.getDropResult()),i}function Bo(t){x(typeof t=="undefined"||fr(t),"Drop result must either be an object or undefined.")}function Vo(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function Go(t){return function(){const r=t.getMonitor(),o=t.getRegistry();Wo(r);const n=r.getSourceId();return n!=null&&(o.getSource(n,!0).endDrag(r,n),o.unpinSource()),{type:et}}}function Wo(t){x(t.isDragging(),"Cannot call endDrag while not dragging.")}function ft(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function qo(t){return function(r,{clientOffset:o}={}){Ko(r);const n=r.slice(0),i=t.getMonitor(),s=t.getRegistry(),c=i.getItemType();return Yo(n,s,c),Xo(n,i,s),Qo(n,i,s),{type:Je,payload:{targetIds:n,clientOffset:o||null}}}}function Ko(t){x(Array.isArray(t),"Expected targetIds to be an array.")}function Xo(t,e,r){x(e.isDragging(),"Cannot call hover while not dragging."),x(!e.didDrop(),"Cannot call hover after drop.");for(let o=0;o<t.length;o++){const n=t[o];x(t.lastIndexOf(n)===o,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(n);x(i,"Expected targetIds to be registered.")}}function Yo(t,e,r){for(let o=t.length-1;o>=0;o--){const n=t[o],i=e.getTargetType(n);ft(i,r)||t.splice(o,1)}}function Qo(t,e,r){t.forEach(function(o){r.getTarget(o).hover(e,o)})}function Jo(t){return function(){if(t.getMonitor().isDragging())return{type:Ct}}}function Zo(t){return{beginDrag:Mo(t),publishDragSource:Jo(t),hover:qo(t),drop:Uo(t),endDrag:Go(t)}}class ei{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function o(i){return(...s)=>{const c=i.apply(e,s);typeof c!="undefined"&&r(c)}}const n=Zo(this);return Object.keys(n).reduce((i,s)=>{const c=n[s];return i[s]=o(c),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const o=this.store.getState().refCount>0;this.backend&&(o&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!o&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function ti(t,e){return{x:t.x+e.x,y:t.y+e.y}}function pr(t,e){return{x:t.x-e.x,y:t.y-e.y}}function ri(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:o}=t;return!e||!r||!o?null:pr(ti(e,o),r)}function ni(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:pr(e,r)}const ze=[],Et=[];ze.__IS_NONE__=!0;Et.__IS_ALL__=!0;function oi(t,e){return t===ze?!1:t===Et||typeof e=="undefined"?!0:Po(e,t).length>0}class ii{subscribeToStateChange(e,r={}){const{handlerIds:o}=r;x(typeof e=="function","listener must be a function."),x(typeof o=="undefined"||Array.isArray(o),"handlerIds, when specified, must be an array of strings.");let n=this.store.getState().stateId;const i=()=>{const s=this.store.getState(),c=s.stateId;try{c===n||c===n+1&&!oi(s.dirtyHandlerIds,o)||e()}finally{n=c}};return this.store.subscribe(i)}subscribeToOffsetChange(e){x(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const o=()=>{const n=this.store.getState().dragOffset;n!==r&&(r=n,e())};return this.store.subscribe(o)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return x(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(x(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const o=this.registry.getTargetType(e),n=this.getItemType();return ft(o,n)&&r.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(x(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const o=this.registry.getSourceType(e),n=this.getItemType();return o!==n?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:o}=r;if(!this.isDragging())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();if(i&&!ft(n,i))return!1;const s=this.getTargetIds();if(!s.length)return!1;const c=s.indexOf(e);return o?c===s.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return ri(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return ni(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const Gt=typeof global!="undefined"?global:self,hr=Gt.MutationObserver||Gt.WebKitMutationObserver;function gr(t){return function(){const r=setTimeout(n,0),o=setInterval(n,50);function n(){clearTimeout(r),clearInterval(o),t()}}}function si(t){let e=1;const r=new hr(t),o=document.createTextNode("");return r.observe(o,{characterData:!0}),function(){e=-e,o.data=e}}const ai=typeof hr=="function"?si:gr;class ci{enqueueTask(e){const{queue:r,requestFlush:o}=this;r.length||(o(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let o=0,n=e.length-this.index;o<n;o++)e[o]=e[o+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=ai(this.flush),this.requestErrorThrow=gr(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class li{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class ui{create(e){const r=this.freeTasks,o=r.length?r.pop():new li(this.onError,n=>r[r.length]=n);return o.task=e,o}constructor(e){this.onError=e,this.freeTasks=[]}}const mr=new ci,di=new ui(mr.registerPendingError);function fi(t){mr.enqueueTask(di.create(t))}const It="dnd-core/ADD_SOURCE",Ot="dnd-core/ADD_TARGET",wt="dnd-core/REMOVE_SOURCE",tt="dnd-core/REMOVE_TARGET";function pi(t){return{type:It,payload:{sourceId:t}}}function hi(t){return{type:Ot,payload:{targetId:t}}}function gi(t){return{type:wt,payload:{sourceId:t}}}function mi(t){return{type:tt,payload:{targetId:t}}}function vi(t){x(typeof t.canDrag=="function","Expected canDrag to be a function."),x(typeof t.beginDrag=="function","Expected beginDrag to be a function."),x(typeof t.endDrag=="function","Expected endDrag to be a function.")}function yi(t){x(typeof t.canDrop=="function","Expected canDrop to be a function."),x(typeof t.hover=="function","Expected hover to be a function."),x(typeof t.drop=="function","Expected beginDrag to be a function.")}function pt(t,e){if(e&&Array.isArray(t)){t.forEach(r=>pt(r,!1));return}x(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var J;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(J||(J={}));let Di=0;function Si(){return Di++}function bi(t){const e=Si().toString();switch(t){case J.SOURCE:return`S${e}`;case J.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function Wt(t){switch(t[0]){case"S":return J.SOURCE;case"T":return J.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function qt(t,e){const r=t.entries();let o=!1;do{const{done:n,value:[,i]}=r.next();if(i===e)return!0;o=!!n}while(!o);return!1}class xi{addSource(e,r){pt(e),vi(r);const o=this.addHandler(J.SOURCE,e,r);return this.store.dispatch(pi(o)),o}addTarget(e,r){pt(e,!0),yi(r);const o=this.addHandler(J.TARGET,e,r);return this.store.dispatch(hi(o)),o}containsHandler(e){return qt(this.dragSources,e)||qt(this.dropTargets,e)}getSource(e,r=!1){return x(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return x(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return x(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return x(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Wt(e)===J.SOURCE}isTargetId(e){return Wt(e)===J.TARGET}removeSource(e){x(this.getSource(e),"Expected an existing source."),this.store.dispatch(gi(e)),fi(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){x(this.getTarget(e),"Expected an existing target."),this.store.dispatch(mi(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);x(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){x(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,o){const n=bi(e);return this.types.set(n,r),e===J.SOURCE?this.dragSources.set(n,o):e===J.TARGET&&this.dropTargets.set(n,o),n}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Ti=(t,e)=>t===e;function Ci(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function Ei(t,e,r=Ti){if(t.length!==e.length)return!1;for(let o=0;o<t.length;++o)if(!r(t[o],e[o]))return!1;return!0}function Ii(t=ze,e){switch(e.type){case Je:break;case It:case Ot:case tt:case wt:return ze;case Qe:case Ct:case et:case Ze:default:return Et}const{targetIds:r=[],prevTargetIds:o=[]}=e.payload,n=_o(r,o);if(!(n.length>0||!Ei(r,o)))return ze;const s=o[o.length-1],c=r[r.length-1];return s!==c&&(s&&n.push(s),c&&n.push(c)),n}function Oi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function wi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){Oi(t,n,r[n])})}return t}const Kt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Ni(t=Kt,e){const{payload:r}=e;switch(e.type){case Tt:case Qe:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Je:return Ci(t.clientOffset,r.clientOffset)?t:wi({},t,{clientOffset:r.clientOffset});case et:case Ze:return Kt;default:return t}}function _i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function we(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){_i(t,n,r[n])})}return t}const Pi={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Ri(t=Pi,e){const{payload:r}=e;switch(e.type){case Qe:return we({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Ct:return we({},t,{isSourcePublic:!0});case Je:return we({},t,{targetIds:r.targetIds});case tt:return t.targetIds.indexOf(r.targetId)===-1?t:we({},t,{targetIds:No(t.targetIds,r.targetId)});case Ze:return we({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case et:return we({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function Mi(t=0,e){switch(e.type){case It:case Ot:return t+1;case wt:case tt:return t-1;default:return t}}function ki(t=0){return t+1}function Li(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function $i(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){Li(t,n,r[n])})}return t}function Ai(t={},e){return{dirtyHandlerIds:Ii(t.dirtyHandlerIds,{type:e.type,payload:$i({},e.payload,{prevTargetIds:wo(t,"dragOperation.targetIds",[])})}),dragOffset:Ni(t.dragOffset,e),refCount:Mi(t.refCount,e),dragOperation:Ri(t.dragOperation,e),stateId:ki(t.stateId)}}function Hi(t,e=void 0,r={},o=!1){const n=Fi(o),i=new ii(n,new xi(n)),s=new ei(n,i),c=t(s,e,r);return s.receiveBackend(c),s}function Fi(t){const e=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return dr(Ai,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Ui(t,e){if(t==null)return{};var r=ji(t,e),o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)o=i[n],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(r[o]=t[o]))}return r}function ji(t,e){if(t==null)return{};var r={},o=Object.keys(t),n,i;for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}let Xt=0;const Ke=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var zi=f.exports.memo(function(e){var{children:r}=e,o=Ui(e,["children"]);const[n,i]=Bi(o);return f.exports.useEffect(()=>{if(i){const s=vr();return++Xt,()=>{--Xt===0&&(s[Ke]=null)}}},[]),S(ur.Provider,{value:n,children:r})});function Bi(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Vi(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function Vi(t,e=vr(),r,o){const n=e;return n[Ke]||(n[Ke]={dragDropManager:Hi(t,e,r,o)}),n[Ke]}function vr(){return typeof global!="undefined"?global:window}var Gi=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var o,n,i;if(Array.isArray(e)){if(o=e.length,o!=r.length)return!1;for(n=o;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),o=i.length,o!==Object.keys(r).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=o;n--!==0;){var s=i[n];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r};const be=typeof window!="undefined"?f.exports.useLayoutEffect:f.exports.useEffect;function Wi(t,e,r){const[o,n]=f.exports.useState(()=>e(t)),i=f.exports.useCallback(()=>{const s=e(t);Gi(o,s)||(n(s),r&&r())},[o,t,r]);return be(i),[o,i]}function qi(t,e,r){const[o,n]=Wi(t,e,r);return be(function(){const s=t.getHandlerId();if(s!=null)return t.subscribeToStateChange(n,{handlerIds:[s]})},[t,n]),o}function yr(t,e,r){return qi(e,t||(()=>({})),()=>r.reconnect())}function Dr(t,e){const r=[...e||[]];return e==null&&typeof t!="function"&&r.push(t),f.exports.useMemo(()=>typeof t=="function"?t():t,r)}function Ki(t){return f.exports.useMemo(()=>t.hooks.dragSource(),[t])}function Xi(t){return f.exports.useMemo(()=>t.hooks.dragPreview(),[t])}let st=!1,at=!1;class Yi{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){x(!st,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return st=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{st=!1}}isDragging(){if(!this.sourceId)return!1;x(!at,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return at=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{at=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let ct=!1;class Qi{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;x(!ct,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return ct=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{ct=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function Ji(t,e,r){const o=r.getRegistry(),n=o.addTarget(t,e);return[n,()=>o.removeTarget(n)]}function Zi(t,e,r){const o=r.getRegistry(),n=o.addSource(t,e);return[n,()=>o.removeSource(n)]}function ht(t,e,r,o){let n=r?r.call(o,t,e):void 0;if(n!==void 0)return!!n;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;const c=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<i.length;u++){const d=i[u];if(!c(d))return!1;const g=t[d],D=e[d];if(n=r?r.call(o,g,D,d):void 0,n===!1||n===void 0&&g!==D)return!1}return!0}function gt(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function es(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function ts(t){return(e=null,r=null)=>{if(!f.exports.isValidElement(e)){const i=e;return t(i,r),i}const o=e;return es(o),rs(o,r?i=>t(i,r):t)}}function Sr(t){const e={};return Object.keys(t).forEach(r=>{const o=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const n=ts(o);e[r]=()=>n}}),e}function Yt(t,e){typeof t=="function"?t(e):t.current=e}function rs(t,e){const r=t.ref;return x(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?f.exports.cloneElement(t,{ref:o=>{Yt(r,o),Yt(e,o)}}):f.exports.cloneElement(t,{ref:e})}class ns{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,o=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(o&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ht(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ht(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Sr({dragSource:(r,o)=>{this.clearDragSource(),this.dragSourceOptions=o||null,gt(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,o)=>{this.clearDragPreview(),this.dragPreviewOptions=o||null,gt(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class os{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(!!this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ht(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Sr({dropTarget:(r,o)=>{this.clearDropTarget(),this.dropTargetOptions=o,gt(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Pe(){const{dragDropManager:t}=f.exports.useContext(ur);return x(t!=null,"Expected drag drop context"),t}function is(t,e){const r=Pe(),o=f.exports.useMemo(()=>new ns(r.getBackend()),[r]);return be(()=>(o.dragSourceOptions=t||null,o.reconnect(),()=>o.disconnectDragSource()),[o,t]),be(()=>(o.dragPreviewOptions=e||null,o.reconnect(),()=>o.disconnectDragPreview()),[o,e]),o}function ss(){const t=Pe();return f.exports.useMemo(()=>new Yi(t),[t])}class as{beginDrag(){const e=this.spec,r=this.monitor;let o=null;return typeof e.item=="object"?o=e.item:typeof e.item=="function"?o=e.item(r):o={},o!=null?o:null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const o=this.spec,n=this.monitor,{isDragging:i}=o;return i?i(n):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,o=this.connector,{end:n}=e;n&&n(r.getItem(),r),o.reconnect()}constructor(e,r,o){this.spec=e,this.monitor=r,this.connector=o}}function cs(t,e,r){const o=f.exports.useMemo(()=>new as(t,e,r),[e,r]);return f.exports.useEffect(()=>{o.spec=t},[t]),o}function ls(t){return f.exports.useMemo(()=>{const e=t.type;return x(e!=null,"spec.type must be defined"),e},[t])}function us(t,e,r){const o=Pe(),n=cs(t,e,r),i=ls(t);be(function(){if(i!=null){const[c,u]=Zi(i,n,o);return e.receiveHandlerId(c),r.receiveHandlerId(c),u}},[o,e,r,n,i])}function ds(t,e){const r=Dr(t,e);x(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const o=ss(),n=is(r.options,r.previewOptions);return us(r,o,n),[yr(r.collect,o,n),Ki(n),Xi(n)]}function fs(t){return f.exports.useMemo(()=>t.hooks.dropTarget(),[t])}function ps(t){const e=Pe(),r=f.exports.useMemo(()=>new os(e.getBackend()),[e]);return be(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function hs(){const t=Pe();return f.exports.useMemo(()=>new Qi(t),[t])}function gs(t){const{accept:e}=t;return f.exports.useMemo(()=>(x(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class ms{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function vs(t,e){const r=f.exports.useMemo(()=>new ms(t,e),[e]);return f.exports.useEffect(()=>{r.spec=t},[t]),r}function ys(t,e,r){const o=Pe(),n=vs(t,e),i=gs(t);be(function(){const[c,u]=Ji(i,n,o);return e.receiveHandlerId(c),r.receiveHandlerId(c),u},[o,e,n,r,i.map(s=>s.toString()).join("|")])}function Qt(t,e){const r=Dr(t,e),o=hs(),n=ps(r.options);return ys(r,o,n),[yr(r.collect,o,n),fs(n)]}function br(t){let e=null;return()=>(e==null&&(e=t()),e)}function Ds(t,e){return t.filter(r=>r!==e)}function Ss(t,e){const r=new Set,o=i=>r.add(i);t.forEach(o),e.forEach(o);const n=[];return r.forEach(i=>n.push(i)),n}class bs{enter(e){const r=this.entered.length,o=n=>this.isNodeInDocument(n)&&(!n.contains||n.contains(e));return this.entered=Ss(this.entered.filter(o),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=Ds(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class xs{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(o=>{const n=this.config.exposeProperties[o];n!=null&&(r[o]={value:n(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const xr="__NATIVE_FILE__",Tr="__NATIVE_URL__",Cr="__NATIVE_TEXT__",Er="__NATIVE_HTML__";var Jt=Object.freeze(Object.defineProperty({__proto__:null,FILE:xr,URL:Tr,TEXT:Cr,HTML:Er},Symbol.toStringTag,{value:"Module"}));function lt(t,e,r){const o=e.reduce((n,i)=>n||t.getData(i),"");return o!=null?o:r}const mt={[xr]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[Er]:{exposeProperties:{html:(t,e)=>lt(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[Tr]:{exposeProperties:{urls:(t,e)=>lt(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Cr]:{exposeProperties:{text:(t,e)=>lt(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Ts(t,e){const r=mt[t];if(!r)throw new Error(`native type ${t} has no configuration`);const o=new xs(r);return o.loadDataTransfer(e),o}function ut(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(mt).filter(r=>{const o=mt[r];return o!=null&&o.matchesTypes?o.matchesTypes.some(n=>e.indexOf(n)>-1):!1})[0]||null}const Cs=br(()=>/firefox/i.test(navigator.userAgent)),Ir=br(()=>Boolean(window.safari));class Zt{interpolate(e){const{xs:r,ys:o,c1s:n,c2s:i,c3s:s}=this;let c=r.length-1;if(e===r[c])return o[c];let u=0,d=s.length-1,g;for(;u<=d;){g=Math.floor(.5*(u+d));const p=r[g];if(p<e)u=g+1;else if(p>e)d=g-1;else return o[g]}c=Math.max(0,d);const D=e-r[c],y=D*D;return o[c]+n[c]*D+i[c]*y+s[c]*D*y}constructor(e,r){const{length:o}=e,n=[];for(let p=0;p<o;p++)n.push(p);n.sort((p,E)=>e[p]<e[E]?-1:1);const i=[],s=[];let c,u;for(let p=0;p<o-1;p++)c=e[p+1]-e[p],u=r[p+1]-r[p],i.push(c),s.push(u/c);const d=[s[0]];for(let p=0;p<i.length-1;p++){const E=s[p],m=s[p+1];if(E*m<=0)d.push(0);else{c=i[p];const v=i[p+1],w=c+v;d.push(3*w/((w+v)/E+(w+c)/m))}}d.push(s[s.length-1]);const g=[],D=[];let y;for(let p=0;p<d.length-1;p++){y=s[p];const E=d[p],m=1/i[p],v=E+d[p+1]-y-y;g.push((y-E-v)*m),D.push(v*m*m)}this.xs=e,this.ys=r,this.c1s=d,this.c2s=g,this.c3s=D}}const Es=1;function Or(t){const e=t.nodeType===Es?t:t.parentElement;if(!e)return null;const{top:r,left:o}=e.getBoundingClientRect();return{x:o,y:r}}function qe(t){return{x:t.clientX,y:t.clientY}}function Is(t){var e;return t.nodeName==="IMG"&&(Cs()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function Os(t,e,r,o){let n=t?e.width:r,i=t?e.height:o;return Ir()&&t&&(i/=window.devicePixelRatio,n/=window.devicePixelRatio),{dragPreviewWidth:n,dragPreviewHeight:i}}function ws(t,e,r,o,n){const i=Is(e),c=Or(i?t:e),u={x:r.x-c.x,y:r.y-c.y},{offsetWidth:d,offsetHeight:g}=t,{anchorX:D,anchorY:y}=o,{dragPreviewWidth:p,dragPreviewHeight:E}=Os(i,e,d,g),m=()=>{let F=new Zt([0,.5,1],[u.y,u.y/g*E,u.y+E-g]).interpolate(y);return Ir()&&i&&(F+=(window.devicePixelRatio-1)*E),F},v=()=>new Zt([0,.5,1],[u.x,u.x/d*p,u.x+p-d]).interpolate(D),{offsetX:w,offsetY:M}=n,b=w===0||w,j=M===0||M;return{x:b?w:v(),y:j?M:m()}}class Ns{get window(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function _s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function er(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){_s(t,n,r[n])})}return t}class Ps{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,o){return this.sourcePreviewNodeOptions.set(e,o),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,o){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,o);const n=s=>this.handleDragStart(s,e),i=s=>this.handleSelectStart(s);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",n),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",n),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const o=s=>this.handleDragEnter(s,e),n=s=>this.handleDragOver(s,e),i=s=>this.handleDrop(s,e);return r.addEventListener("dragenter",o),r.addEventListener("dragover",n),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",o),r.removeEventListener("dragover",n),r.removeEventListener("drop",i)}}addEventListeners(e){!e.addEventListener||(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){!e.removeEventListener||(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return er({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return er({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(Jt).some(r=>Jt[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Ts(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var o;return(o=this.rootElement)===null||o===void 0?void 0:o.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,o){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=n=>{const i=this.sourceNodes.get(n);return i&&Or(i)||null},this.endDragNativeItem=()=>{!this.isDraggingNativeItem()||(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=n=>Boolean(n&&this.document&&this.document.body&&this.document.body.contains(n)),this.endDragIfSourceWasRemovedFromDOM=()=>{const n=this.currentDragSourceNode;n==null||this.isNodeInDocument(n)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=n=>{this.hoverRafId===null&&typeof requestAnimationFrame!="undefined"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(n||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame!="undefined"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=n=>{if(n.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const s=qe(n);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});const{dataTransfer:c}=n,u=ut(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){const g=this.monitor.getSourceId(),D=this.sourceNodes.get(g),y=this.sourcePreviewNodes.get(g)||D;if(y){const{anchorX:p,anchorY:E,offsetX:m,offsetY:v}=this.getCurrentSourcePreviewNodeOptions(),b=ws(D,y,s,{anchorX:p,anchorY:E},{offsetX:m,offsetY:v});c.setDragImage(y,b.x,b.y)}}try{c==null||c.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(n.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(c&&!c.types&&(n.target&&!n.target.hasAttribute||!n.target.hasAttribute("draggable")))return;n.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=n=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}if(!this.enterLeaveCounter.enter(n.target)||this.monitor.isDragging())return;const{dataTransfer:c}=n,u=ut(c);u&&this.beginDragNativeItem(u,c)},this.handleTopDragEnter=n=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=n.altKey,i.length>0&&this.actions.hover(i,{clientOffset:qe(n)}),i.some(c=>this.monitor.canDropOnTarget(c))&&(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=n=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}},this.handleTopDragOver=n=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none");return}this.altKeyPressed=n.altKey,this.lastClientOffset=qe(n),this.scheduleHover(i),(i||[]).some(c=>this.monitor.canDropOnTarget(c))?(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?n.preventDefault():(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=n=>{this.isDraggingNativeItem()&&n.preventDefault(),this.enterLeaveCounter.leave(n.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=n=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;n.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}else ut(n.dataTransfer)&&n.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=n=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:qe(n)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=n=>{const i=n.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(n.preventDefault(),i.dragDrop()))},this.options=new Ns(r,o),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new bs(this.isNodeInDocument)}}const Rs=function(e,r,o){return new Ps(e,r,o)};class Ms extends f.exports.Component{constructor(e){super(e),this.state={snackbar_open:!1,status:!1}}render(){return S(f.exports.Fragment,{children:S(yn,{title:"\u4FDD\u5B58",children:S(Dn,{size:"small",onClick:()=>this.props.save_func(),children:S(Tn,{fontSize:"small",color:"primary"})})})})}}function wr(t,e){return e.secret?!0:e.father_id>0?wr(t,t.id2node(e.father_id)):!1}class ks extends f.exports.Component{constructor(r){super(r);Ae(this,"raw_nodetree");this.state={nodetree:new bt([]),expanded:[]}}async componentDidMount(){let r=[];He.shallow?r=await nt.get.shallowtree(He.node_id):r=await nt.get.nodetree(He.node_id),this.setState({nodetree:this.state.nodetree.update_rawinfo(r,He.node_id),expanded:Object.values(r).map(o=>o[1])}),this.raw_nodetree=r}move_node(r,o,n){let i=this.state.nodetree.deepcopy(),s=r.idx_in_father,c=i.id2node(r.father_id);o=i.id2node(o.my_id),r=i.id2node(r.my_id),c.my_id==o.my_id&&s<n&&n--;let u=c.sons;c.sons=[...u.slice(0,s),...u.slice(s+1,u.length)];let d=o.sons;o.sons=[...d.slice(0,n),r,...d.slice(n,d.length)],r.father_id=o.my_id,this.setState({nodetree:i})}DroppableSpace(r){let o=this,n=r.node,i=r.expect_idx,s=this.state.nodetree;const[{is_over_can_drop:c},u]=Qt(()=>({accept:"treeitem",drop:(d,g)=>{!g.isOver({shallow:!0})||o.move_node(d,n,i)},collect:d=>({is_over_can_drop:d.isOver({shallow:!0})&&d.canDrop()}),canDrop:d=>n.my_id!=d.my_id&&!s.is_son(d.my_id,n.my_id)}));return S(Ie,{ref:u,sx:{border:c?"1px dashed grey":"0",height:"6px"}})}DragableTreeItem(r){let o=this,n=r.node,i=n.my_id,s=n.father_id,c=r.idx_in_father,u=this.state.nodetree,d=this.DroppableSpace.bind(this),g=wr(this.state.nodetree,n);const[{is_dragging:D},y]=ds(()=>({type:"treeitem",item:{...n,idx_in_father:c},collect:v=>({is_dragging:v.isDragging()})})),[{is_over:p,can_drop:E},m]=Qt(()=>({accept:"treeitem",drop:(v,w)=>{!w.isOver({shallow:!0})||v.my_id!=n.my_id&&o.move_node(v,n,n.sons.length)},collect:v=>({is_over:v.isOver({shallow:!0}),can_drop:v.canDrop()}),canDrop:v=>n.my_id==v.my_id||!u.is_son(v.my_id,n.my_id)}));return pe(Ie,{ref:m,sx:{border:p&&E?"1px dashed grey":"0"},children:[S(d,{node:u.id2node(s),expect_idx:c}),pe(mo,{label:S(Ie,{color:g?"text.secondary":"text.primary",children:pe(pn,{force_direction:"row",children:[pe(hn,{sx:{marginY:"auto"},children:["[",i,"] ",S(gn,{node_id:i})]}),S(Hn,{onClick:v=>{v.stopPropagation()},defaultChecked:n.secret,onChange:v=>{let w=this.state.nodetree.deepcopy();w.id2node(i).secret=v.target.checked,this.setState({nodetree:w})}}),S(xn,{href:mn(`/edit/content/${i}`),children:"\u7F16\u8F91"})]})}),nodeId:`${i}`,ref:y,onFocusCapture:v=>v.stopPropagation(),sx:{cursor:"move",opacity:D?.5:1},children:[r.children,S(d,{node:n,expect_idx:n.sons.length})]})]})}get_subtree(r){let o=this,n=this.DragableTreeItem.bind(this);return S(vn,{children:Object.values(r.sons).map((i,s)=>S(n,{node:i,idx_in_father:s,children:o.get_subtree(i)},`${s}`))})}async save_nodetree(){let o=this.raw_nodetree.reduce((u,d)=>{let[g,D,y,p]=d;return u[g]=[D,y,p],u},{}),n=this.state.nodetree.get_raw(),i=[];for(let[u,d,g,D]of n){let y=[d,g,D];JSON.stringify(y)!=JSON.stringify(o[u])&&i.push([u,d,g,D])}console.log(i.length);let s=!0,c=50;for(let u=0;u<i.length;u+=c)s=s&&await nt.post.nodetree({nodetree:i.slice(u,u+c)},He.node_id),console.log(`${u} / ${i.length}`),console.log(s);return s}render(){let r=this,o=this.state.nodetree;return pe(Ie,{sx:{position:"absolute",top:"2%",left:"2%",height:"96%",width:"96%",display:"flex"},children:[S(Ie,{sx:{marginRight:"1%"},children:S(Ms,{save_func:r.save_nodetree.bind(r)})}),pe(Ie,{sx:{position:"relative",width:"100%",flex:1},children:[S(Mt,{}),S(zi,{backend:Rs,children:S(Eo,{expanded:Object.values(r.state.expanded).map(n=>`${n}`),onNodeToggle:(n,i)=>{r.setState({expanded:i})},defaultCollapseIcon:S(Un,{}),defaultExpandIcon:S(Fn,{}),children:r.get_subtree(o.get_root())})}),S(Mt,{})]})]})}}Fe.render(S(ks,{}),document.getElementById("root"));
