var Nt=Object.defineProperty,Pt=Object.defineProperties;var Rt=Object.getOwnPropertyDescriptors;var We=Object.getOwnPropertySymbols;var Mt=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable;var ye=(r,e,t)=>e in r?Nt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,h=(r,e)=>{for(var t in e||(e={}))Mt.call(e,t)&&ye(r,t,e[t]);if(We)for(var t of We(e))jt.call(e,t)&&ye(r,t,e[t]);return r},$=(r,e)=>Pt(r,Rt(e));var c=(r,e,t)=>(ye(r,typeof e!="symbol"?e+"":e,t),t);import{g as $e,a as Ee,s as ke,_ as k,u as Ae,K as It,b as Ce,d as Be,e as De,L as oe,M as Te,T as W,f as dt,N as Lt,O as Gt,Q as zt,R as Wt,h as Ot,S as Ut,J as ht,U as Vt,V as Ht,A as E,W as L,X as Ne,Y as O,Z as se,$ as Pe,a0 as Q,a1 as U,a2 as Re,a3 as ue,a4 as ce,a5 as ft,a6 as Y,p as ee,a7 as de,a8 as u,a9 as mt,P as _t,aa as Jt,B as le,o as Oe,q as Ue,v as Ve,ab as Xt,ac as Kt,ad as qt,l as pt,ae as Z,af as gt,ag as Se,ah as Zt,ai as ae,aj as B,ak as Qt,al as Yt,am as xt,an as vt,ao as er,ap as tr,I as Me,aq as bt,ar as rr,as as nr,at as He,k as Je,au as ir}from"./snackbar.c1b12451.js";import{r as I,j as l,b,F as y,a as w}from"./jsx-runtime.71fbd6ab.js";const lr=I.exports.createContext();var Xe=lr;function ar(r){return $e("MuiGrid",r)}const or=[0,1,2,3,4,5,6,7,8,9,10],sr=["column-reverse","column","row-reverse","row"],ur=["nowrap","wrap-reverse","wrap"],H=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],je=Ee("MuiGrid",["root","container","item","zeroMinWidth",...or.map(r=>`spacing-xs-${r}`),...sr.map(r=>`direction-xs-${r}`),...ur.map(r=>`wrap-xs-${r}`),...H.map(r=>`grid-xs-${r}`),...H.map(r=>`grid-sm-${r}`),...H.map(r=>`grid-md-${r}`),...H.map(r=>`grid-lg-${r}`),...H.map(r=>`grid-xl-${r}`)]),cr=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function z(r){const e=parseFloat(r);return`${e}${String(r).replace(String(e),"")||"px"}`}function dr({theme:r,ownerState:e}){let t;return r.breakpoints.keys.reduce((n,i)=>{let a={};if(e[i]&&(t=e[i]),!t)return n;if(t===!0)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=oe({values:e.columns,breakpoints:r.breakpoints.values}),s=typeof o=="object"?o[i]:o;if(s==null)return n;const d=`${Math.round(t/s*1e8)/1e6}%`;let g={};if(e.container&&e.item&&e.columnSpacing!==0){const m=r.spacing(e.columnSpacing);if(m!=="0px"){const f=`calc(${d} + ${z(m)})`;g={flexBasis:f,maxWidth:f}}}a=k({flexBasis:d,flexGrow:0,maxWidth:d},g)}return r.breakpoints.values[i]===0?Object.assign(n,a):n[r.breakpoints.up(i)]=a,n},{})}function hr({theme:r,ownerState:e}){const t=oe({values:e.direction,breakpoints:r.breakpoints.values});return Te({theme:r},t,n=>{const i={flexDirection:n};return n.indexOf("column")===0&&(i[`& > .${je.item}`]={maxWidth:"none"}),i})}function fr({theme:r,ownerState:e}){const{container:t,rowSpacing:n}=e;let i={};if(t&&n!==0){const a=oe({values:n,breakpoints:r.breakpoints.values});i=Te({theme:r},a,o=>{const s=r.spacing(o);return s!=="0px"?{marginTop:`-${z(s)}`,[`& > .${je.item}`]:{paddingTop:z(s)}}:{}})}return i}function mr({theme:r,ownerState:e}){const{container:t,columnSpacing:n}=e;let i={};if(t&&n!==0){const a=oe({values:n,breakpoints:r.breakpoints.values});i=Te({theme:r},a,o=>{const s=r.spacing(o);return s!=="0px"?{width:`calc(100% + ${z(s)})`,marginLeft:`-${z(s)}`,[`& > .${je.item}`]:{paddingLeft:z(s)}}:{}})}return i}function yt(r,e,t={}){if(!e||!r||r<=0)return[];if(typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number")return[t[`spacing-xs-${String(r)}`]||`spacing-xs-${String(r)}`];const{xs:n,sm:i,md:a,lg:o,xl:s}=r;return[Number(n)>0&&(t[`spacing-xs-${String(n)}`]||`spacing-xs-${String(n)}`),Number(i)>0&&(t[`spacing-sm-${String(i)}`]||`spacing-sm-${String(i)}`),Number(a)>0&&(t[`spacing-md-${String(a)}`]||`spacing-md-${String(a)}`),Number(o)>0&&(t[`spacing-lg-${String(o)}`]||`spacing-lg-${String(o)}`),Number(s)>0&&(t[`spacing-xl-${String(s)}`]||`spacing-xl-${String(s)}`)]}const _r=ke("div",{name:"MuiGrid",slot:"Root",overridesResolver:(r,e)=>{const{container:t,direction:n,item:i,lg:a,md:o,sm:s,spacing:d,wrap:g,xl:m,xs:f,zeroMinWidth:p}=r.ownerState;return[e.root,t&&e.container,i&&e.item,p&&e.zeroMinWidth,...yt(d,t,e),n!=="row"&&e[`direction-xs-${String(n)}`],g!=="wrap"&&e[`wrap-xs-${String(g)}`],f!==!1&&e[`grid-xs-${String(f)}`],s!==!1&&e[`grid-sm-${String(s)}`],o!==!1&&e[`grid-md-${String(o)}`],a!==!1&&e[`grid-lg-${String(a)}`],m!==!1&&e[`grid-xl-${String(m)}`]]}})(({ownerState:r})=>k({boxSizing:"border-box"},r.container&&{display:"flex",flexWrap:"wrap",width:"100%"},r.item&&{margin:0},r.zeroMinWidth&&{minWidth:0},r.wrap!=="wrap"&&{flexWrap:r.wrap}),hr,fr,mr,dr),pr=r=>{const{classes:e,container:t,direction:n,item:i,lg:a,md:o,sm:s,spacing:d,wrap:g,xl:m,xs:f,zeroMinWidth:p}=r,v={root:["root",t&&"container",i&&"item",p&&"zeroMinWidth",...yt(d,t),n!=="row"&&`direction-xs-${String(n)}`,g!=="wrap"&&`wrap-xs-${String(g)}`,f!==!1&&`grid-xs-${String(f)}`,s!==!1&&`grid-sm-${String(s)}`,o!==!1&&`grid-md-${String(o)}`,a!==!1&&`grid-lg-${String(a)}`,m!==!1&&`grid-xl-${String(m)}`]};return Be(v,ar,e)},gr=I.exports.forwardRef(function(e,t){const n=Ae({props:e,name:"MuiGrid"}),i=It(n),{className:a,columns:o,columnSpacing:s,component:d="div",container:g=!1,direction:m="row",item:f=!1,lg:p=!1,md:v=!1,rowSpacing:_,sm:x=!1,spacing:F=0,wrap:R="wrap",xl:A=!1,xs:ge=!1,zeroMinWidth:xe=!1}=i,ve=Ce(i,cr),ne=_||F,be=s||F,M=I.exports.useContext(Xe),Ge=g?o||12:M,ze=k({},i,{columns:Ge,container:g,direction:m,item:f,lg:p,md:v,sm:x,rowSpacing:ne,columnSpacing:be,wrap:R,xl:A,xs:ge,zeroMinWidth:xe}),Tt=pr(ze);return l(Xe.Provider,{value:Ge,children:l(_r,k({ownerState:ze,className:De(Tt.root,a),as:d,ref:t},ve))})});var j=gr;function xr(r){return $e("MuiLink",r)}const vr=Ee("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var br=vr;const yr=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"],wr={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},Sr=r=>wr[r]||r,Fr=r=>{const{classes:e,component:t,focusVisible:n,underline:i}=r,a={root:["root",`underline${dt(i)}`,t==="button"&&"button",n&&"focusVisible"]};return Be(a,xr,e)},$r=ke(W,{name:"MuiLink",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`underline${dt(t.underline)}`],t.component==="button"&&e.button]}})(({theme:r,ownerState:e})=>{const t=Lt(r,`palette.${Sr(e.color)}`)||e.color;return k({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&{textDecoration:"underline",textDecorationColor:t!=="inherit"?Gt(t,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${br.focusVisible}`]:{outline:"auto"}})}),Er=I.exports.forwardRef(function(e,t){const n=Ae({props:e,name:"MuiLink"}),{className:i,color:a="primary",component:o="a",onBlur:s,onFocus:d,TypographyClasses:g,underline:m="always",variant:f="inherit"}=n,p=Ce(n,yr),{isFocusVisibleRef:v,onBlur:_,onFocus:x,ref:F}=zt(),[R,A]=I.exports.useState(!1),ge=Wt(t,F),xe=M=>{_(M),v.current===!1&&A(!1),s&&s(M)},ve=M=>{x(M),v.current===!0&&A(!0),d&&d(M)},ne=k({},n,{color:a,component:o,focusVisible:R,underline:m,variant:f}),be=Fr(ne);return l($r,k({className:De(be.root,i),classes:g,color:a,component:o,onBlur:xe,onFocus:ve,ref:ge,ownerState:ne,variant:f},p))});var we=Er;function kr(r){return $e("MuiToolbar",r)}Ee("MuiToolbar",["root","gutters","regular","dense"]);const Ar=["className","component","disableGutters","variant"],Cr=r=>{const{classes:e,disableGutters:t,variant:n}=r;return Be({root:["root",!t&&"gutters",n]},kr,e)},Br=ke("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disableGutters&&e.gutters,e[t.variant]]}})(({theme:r,ownerState:e})=>k({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:r,ownerState:e})=>e.variant==="regular"&&r.mixins.toolbar),Dr=I.exports.forwardRef(function(e,t){const n=Ae({props:e,name:"MuiToolbar"}),{className:i,component:a="div",disableGutters:o=!1,variant:s="regular"}=n,d=Ce(n,Ar),g=k({},n,{component:a,disableGutters:o,variant:s}),m=Cr(g);return l(Br,k({as:a,className:De(m.root,i),ref:t,ownerState:g},d))});var Tr=Dr,te=Ot(l("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");class jn{constructor(e){c(this,"styles");c(this,"notifications");this.styles={inline:{},group:{},struct:{},support:{},abstract:{}};for(let t of e)this.add_style(t);this.notifications={}}add_notificatioon(e,t){this.notifications[t]=e}remove_notificatioon(e){delete this.notifications[e]}add_style(e){this.styles[e.type][e.name]=e}get_style(e,t){return this.styles[e][t]}}class he{constructor(e,t,n={},i={}){c(this,"type","inline");c(this,"name");c(this,"parameter_prototype");c(this,"flags");c(this,"makenode");c(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>Ut(e,t,i)}}class D{constructor(e,t,n={},i={}){c(this,"type","group");c(this,"name");c(this,"parameter_prototype");c(this,"flags");c(this,"makenode");c(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>ht(e,t,i)}}class Nr{constructor(e,t,n={},i={}){c(this,"type","struct");c(this,"name");c(this,"parameter_prototype");c(this,"flags");c(this,"makenode");c(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>Vt(e,t,i)}}class fe{constructor(e,t,n={},i={}){c(this,"type","support");c(this,"name");c(this,"parameter_prototype");c(this,"flags");c(this,"makenode");c(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>Ht(e,t,i)}}class Pr{constructor(e,t,n={}){c(this,"type","abstract");c(this,"name");c(this,"parameter_prototype");c(this,"flags");c(this,"makehidden");c(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.parameter_labels=n,this.flags={},this.makehidden=()=>ht(e,t)}}class In{constructor(e,t={}){c(this,"core");c(this,"default_vals");c(this,"styled_vals");this.core=e,this.default_vals=t,this.styled_vals={inline:{},group:{},struct:{},support:{}}}get(e,t=void 0){return t==null?this.default_vals[e]:this.styled_vals[e][t]||this.default_vals[e]}set(e,t,n=void 0){if(n==null){this.default_vals[t]=e;return}this.styled_vals[t][n]=e}}class Rr{constructor(e,t,n,i){c(this,"name");c(this,"target_style");c(this,"fixed_parameters");c(this,"default_parameters");this.name=e,this.target_style=t,this.fixed_parameters=n,this.default_parameters=i}get_proxy_parameters(e){let t={},n=h(h(h({},this.target_style.parameter_prototype),this.default_parameters),e);for(let i in n)this.fixed_parameters[i]==null&&(t[i]=n[i]);return t}get_real_parameters(e){let t={},n=this.target_style.parameter_prototype;for(let i in n)if(this.fixed_parameters[i]!=null){let a=this.fixed_parameters[i];if(a.type=="function"){let o=new Function(`return ${a.val}`)();t[i]=o(e)}else t[i]=a}else e[i]==null?this.default_parameters[i]==null?t[i]=n[i]:t[i]=this.default_parameters[i]:t[i]=e[i];return t}makenode(){let e=this.target_style.makenode();return e.proxy_info.proxy_name=this.name,e.proxy_info.proxy_params=this.get_proxy_parameters(e.parameters),e.parameters=this.get_real_parameters(e.proxy_info.proxy_params),e}makehidden(){let e=this.target_style.makehidden();return e.proxy_info.proxy_name=this.name,e.proxy_info.proxy_params=this.get_proxy_parameters(e.parameters),e.parameters=this.get_real_parameters(e.proxy_info.proxy_params),e}get_styletype(){return this.target_style.type}get_stylename(){return this.target_style.name}}let wt=r=>l(de,$(h({},r),{sx:r.element.relation=="chaining"?{marginTop:"0"}:{}}));function St({get_label:r=n=>u(n,"label"),appbar_extra:e=n=>l(y,{}),surrounder:t=n=>l(y,{children:n.children})}){return n=>{let i=n.element,a=n.editor,o=r(i);return l(wt,{element:i,children:b(E,{force_direction:"column",children:[l(L,{children:l(Tr,{sx:{overflow:"auto"},children:b(E,{children:[l(Ne,{children:o}),l(O,{editor:a,element:i}),l(se,{editor:a,element:i}),l(Pe,{editor:a,element:i}),l(Q,{editor:a,element:i}),l(U,{editor:a,element:i}),l(Re,{editor:a,element:i}),l(e,{editor:a,element:i})]})})}),l(ue,{}),l(ce,{autogrow:!0,children:l(t,{editor:a,element:i,children:n.children})})]})})}}function G({get_label:r=n=>u(n,"label"),rightbar_extra:e=n=>l(y,{}),surrounder:t=n=>l(y,{children:n.children})}){return n=>{let i=n.element,a=n.editor,o=r(i),s=e;return l(wt,{element:i,children:b(ft,{force_direction:"row",children:[l(ce,{autogrow:!0,children:l(t,{editor:a,element:i,children:n.children})}),l(L,{sx:{textAlign:"center"},children:b(E,{children:[l(s,{editor:a,element:i}),l(Ne,{variant:"overline",children:o}),b(Y,{close_on_otherclick:!0,button_class:ee,button_props:{size:"small",children:l(te,{fontSize:"small"})},title:"\u5C55\u5F00",children:[l(O,{editor:a,element:i}),l(se,{editor:a,element:i}),l(Pe,{editor:a,element:i}),l(U,{editor:a,element:i}),l(Re,{editor:a,element:i}),l(Q,{editor:a,element:i})]})]})})]})})}}function me({get_label:r=n=>u(n,"label"),surrounder:e=n=>l(w.Fragment,{children:n.children}),rightbar_extra:t=n=>l(y,{})}){return n=>{let i=n.element,a=n.editor,o=r(i),s=t;return l(de,{is_inline:!0,children:b(E,{force_direction:"row",children:[l(ce,{children:l(e,{editor:a,element:i,children:n.children})}),l(L,{children:b(E,{force_direction:"row",children:[l(s,{editor:a,element:i}),b(Y,{close_on_otherclick:!0,button_class:ee,button_props:{sx:{height:"1rem",width:"1rem",margin:"0"},children:l(te,{sx:{height:"1rem"}})},title:"\u5C55\u5F00"+(o?` / ${o}`:""),children:[l(W,{children:o}),l(O,{editor:a,element:i}),l(se,{editor:a,element:i}),l(U,{editor:a,element:i})]})]})})]})})}}function Mr(r){let e=r.element,t=r.editor,[n,i]=w.useState(!1),[a,o]=w.useState(!1),s=l(_t,{sx:{height:"5px"},variant:"outlined"});return l(L,{children:l(mt,{children:b(Jt.Provider,{value:"row",children:[r.children,b(j,{container:!0,spacing:2,children:[l(j,{item:!0,xs:6,children:l(le,{onMouseOver:()=>i(!0),onMouseOut:()=>i(!1),children:(()=>n?l(Oe,{title:"\u5411\u4E0A\u6DFB\u52A0\u6BB5\u843D",children:l(Ue,{onClick:d=>{t.add_nodes_before(Ve(),e)},size:"small",variant:"outlined",fullWidth:!0,children:l(Xt,{fontSize:"small"})})}):s)()})}),l(j,{item:!0,xs:6,children:l(le,{onMouseOver:()=>o(!0),onMouseOut:()=>o(!1),children:(()=>a?l(Oe,{title:"\u5411\u4E0B\u6DFB\u52A0\u6BB5\u843D",children:l(Ue,{onClick:d=>{t.add_nodes_after(Ve(),e)},size:"small",variant:"outlined",fullWidth:!0,children:l(Kt,{fontSize:"small"})})}):s)()})})]})]})})})}function Ft({get_title:r=e=>u(e,"title")}){return e=>{let t=e.editor,n=e.element,i=r(n);return l(L,{children:l(mt,{children:b(ue,{children:[l(_t,{variant:"outlined",children:b(E,{force_direction:"row",children:[l(W,{children:i}),b(Y,{close_on_otherclick:!0,button_class:ee,button_props:{size:"small",children:l(te,{fontSize:"small"})},title:"\u5C55\u5F00",children:[l(O,{editor:e.editor,element:e.element}),l(Q,{editor:t,element:n}),l(U,{editor:t,element:n})]})]})}),e.children]})})})}}function jr({get_label:r=n=>u(n,"label"),is_empty:e=n=>!!u(n,"url"),render_element:t=n=>l("img",{src:u(n.element,"url")})}){return n=>{let i=n.editor,a=n.element,o=r(a),s=t;return b(de,{is_inline:!0,children:[n.children,l(L,{children:b(E,{force_direction:"row",children:[e(a)?l(s,{element:a}):o,b(Y,{close_on_otherclick:!0,button_class:ee,button_props:{sx:{height:"1rem",width:"1rem",margin:"0"},children:l(te,{sx:{height:"1rem"}})},title:"\u5C55\u5F00"+(o?` / ${o}`:""),children:[l(W,{children:o}),l(O,{editor:i,element:a}),l(Q,{editor:i,element:a}),l(U,{editor:i,element:a})]})]})})]})}}function Ir(r){return l(qt,{children:r.children})}let Lr=r=>l(de,$(h({},r),{sx:r.element.relation=="chaining"?{marginTop:"0"}:{}}));function Gr({get_label:r=i=>u(i,"label"),get_widths:e=(i,a)=>[],rightbar_extra:t=i=>l(y,{}),surrounder:n=i=>l(y,{children:i.children})}){return i=>{let a=i.element,o=i.editor,s=r(a),d=t,g=n,m=a.children,f=e(a.num_children,a);for(f=f.splice(0,m.length);f.length<m.length;)f.push(1);let p=f.reduce((x,F)=>x+F,0),[v,_]=w.useState(a.num_children);return w.useEffect(()=>{o.add_delay_operation(`${a.idx}-struct`,()=>{o.set_node(a,{num_children:v})})}),l(Lr,{element:a,children:b(E,{force_direction:"row",children:[l(j,{container:!0,columns:p,sx:{width:"100%"},children:f.map((x,F)=>l(j,{item:!0,xs:x,sx:{borderRight:F==m.length-1?"none":"1px solid"},children:l(ce,{autogrow:!0,children:l(g,{editor:o,element:a,children:i.children[F]})})},F))}),l(L,{children:b(ft,{children:[l(Ne,{variant:"overline",children:s}),l(d,{editor:o,element:a}),b(Y,{close_on_otherclick:!0,button_class:ee,button_props:{size:"small",children:l(te,{fontSize:"small"})},title:"\u5C55\u5F00",onClose:()=>{o.apply_delay_operations()},children:[l(O,{editor:o,element:a}),l(se,{editor:o,element:a}),l(Pe,{editor:o,element:a}),l(U,{editor:o,element:a}),l(Re,{editor:o,element:a,puretext:!0}),l(Q,{editor:o,element:a}),l(pt,{sx:{width:"5rem"},type:"number",label:"number of children",defaultValue:a.num_children,onChange:x=>{_(parseInt(x.target.value))}})]})]})})]})})}}class _e{constructor(e,t,n){c(this,"env_key");c(this,"context_key");c(this,"_default_val");this.env_key=e,this.context_key=t,this._default_val=n}enter_effect(e,t,n){return[t,{}]}exit_effect(e,t,n){return[t,n]}ensure_env(e){return e[this.env_key]==null&&(e[this.env_key]=this._default_val),e}get_env(e){return e=this.ensure_env(e),e[this.env_key]}set_env(e,t){return e=this.ensure_env(e),e[this.env_key]=t,e}check_context(e){return e[this.context_key]!=null}get_context(e){return e[this.context_key]}set_context(e,t){return e[this.context_key]=t,e}make_context(e){return{[this.context_key]:e}}fuse_result(e,t){let[n,i]=e,[a,o]=t;return[a,h(h({},i),o)]}enter_fuse(e,t,n){return this.fuse_result([t,n],this.enter_effect(e,t,n))}exit_fuse(e,t,n){return this.fuse_result([t,n],this.exit_effect(e,t,n))}}class pe extends _e{constructor(e,t,n=(i,a,o)=>!1){t==null&&(t=e);super(e,t,[0]);c(this,"clear_order");this.clear_order=n}enter_effect(e,t,n){t=this.ensure_env(t);let i=[...this.get_env(t)];this.clear_order(e,t)&&(i[i.length-1]=0),i[i.length-1]++;let a=[...i,0];return[this.set_env(t,a),this.make_context(i)]}exit_effect(e,t,n){let i=this.get_env(t);return i=i.slice(0,i.length-1),[this.set_env(t,i),n]}}class $t extends _e{constructor(e,t,n,i){super(e,t,{pre:[],suf:[]});c(this,"pre_inject");c(this,"suf_inject");this.pre_inject=n||(a=>l(y,{})),this.suf_inject=i||(a=>l(y,{}))}enter_effect(e,t,n){let i=this.pre_inject,a=this.suf_inject,o=this.get_env(t);return t=this.set_env(t,{pre:[...o.pre,l(i,{element:e,context:n})],suf:[...o.suf,l(a,{element:e,context:n})]}),[t,n]}exit_effect(e,t,n){return[t,n]}}class zr extends _e{constructor(e,t){super(e,t,{pre:[],suf:[]})}enter_effect(e,t,n){let i=this.get_env(t);return t=this.set_env(t,{pre:[],suf:[]}),[t,this.make_context(i)]}}class Ie extends _e{constructor(e,t,n={}){t==null&&(t=e);super(e,t,[void 0,n]);c(this,"information");this.information=n}enter_effect(e,t,n){return n=this.set_context(n,this.get_env(t)),t=this.set_env(t,[void 0,{}]),[t,n]}exit_effect(e,t,n){return t=this.set_env(t,[e,this.information]),[t,n]}}function Et(r={}){return e=>{let t=e.element,n=!1;(t.type=="struct"||t.type=="group")&&(n=t.relation=="chaining");let i={marginTop:a=>gt(a.printer.margins.special,.5)};return r.small_margin&&(i={}),l(Z,$(h({sx:n?i:{}},r),{children:e.children}))}}function T({small_margin_enter:r=!1,small_margin_exit:e=!1,extra_effectors:t=[],inject_pre:n=s=>l(y,{}),inject_suf:i=s=>l(y,{}),outer:a=void 0,inner:o=s=>l(y,{children:s.children})}){let s=a||Et({small_margin:r}),d=o,g=new $t("global-injector","global-injector",n,i),m=new Ie("global-brother","global-brother",{small_margin:e});return{render_func:f=>{let p=f.element;return l(s,{element:p,context:f.context,children:l(d,{element:p,context:f.context,children:f.children})})},enter_effect:(f,p)=>{let v=[p,{}];for(let _ of t)v=_(f).enter_fuse(f,v[0],v[1]);return v=g.enter_fuse(f,v[0],v[1]),v=m.enter_fuse(f,v[0],v[1]),v},exit_effect:(f,p,v)=>{let _=[p,v];for(let x of t)_=x(f).exit_fuse(f,_[0],_[1]);return _=g.exit_fuse(f,_[0],_[1]),_=m.exit_fuse(f,_[0],_[1]),_}}}function Wr({small_margin_enter:r=!1,small_margin_exit:e=!1,get_widths:t=d=>[],extra_effectors:n=[],inject_pre:i=d=>l(y,{}),inject_suf:a=d=>l(y,{}),outer:o=void 0,inner:s=d=>l(y,{children:d.children})}){let d=o||Et({small_margin:r}),g=s,m=new $t("global-injector","global-injector",i,a),f=new Ie("global-brother","global-brother",{small_margin:e});return{render_func:p=>{let v=p.element,_=p.children,x=t(v);for(x=x.splice(0,_.length);x.length<_.length;)x.push(1);let F=x.reduce((R,A)=>R+A,0);return l(d,{element:v,context:p.context,children:l(j,{container:!0,columns:F,children:x.map((R,A)=>l(j,{item:!0,xs:R,sx:{align:"center"},children:l(g,{element:v,context:p.context,children:p.children[A]})},A))})})},enter_effect:(p,v)=>{let _=[v,{}];for(let x of n)_=x(p).enter_fuse(p,_[0],_[1]);return _=m.enter_fuse(p,_[0],_[1]),_=f.enter_fuse(p,_[0],_[1]),_},exit_effect:(p,v,_)=>{let x=[v,_];for(let F of n)x=F(p).exit_fuse(p,x[0],x[1]);return x=m.exit_fuse(p,x[0],x[1]),x=f.exit_fuse(p,x[0],x[1]),x}}}function Or(){let r=new zr("global-injector","global-injector"),e=new Ie("global-brother","global-brother");return{render_func:t=>{let n=t.context;if(!(r.check_context(n)&&e.get_context(n)))return l(Se,{});let i=r.get_context(n),[a,o]=e.get_context(n)||[void 0,void 0],s=o&&o.small_margin,d=a!=null&&(a.type=="group"||a.type=="struct");return b(Se,{sx:d?{marginTop:s?m=>m.printer.margins.paragraph:m=>m.printer.margins.special}:{},children:[Object.keys(i.pre).map(m=>l(w.Fragment,{children:i.pre[m]},m)),t.children,Object.keys(i.suf).map(m=>l(w.Fragment,{children:i.suf[m]},m)),l("br",{})]})},enter_effect:(t,n)=>{let i=[n,{}];return i=r.enter_fuse(t,i[0],i[1]),i=e.enter_fuse(t,i[0],i[1]),i},exit_effect:(t,n,i)=>{let a=[n,i];return a=r.exit_fuse(t,a[0],a[1]),a=e.exit_fuse(t,a[0],a[1]),a}}}function re({extra_effectors:r=[],outer:e=t=>l("span",{children:t.children})}){let t=e;return{render_func:n=>{let i=n.element;return l(t,{element:i,context:n.context,children:n.children})},enter_effect:(n,i)=>{let a=[i,{}];for(let o of r)a=o(n).enter_fuse(n,a[0],a[1]);return a},exit_effect:(n,i,a)=>{let o=[i,a];for(let s of r)o=s(n).exit_fuse(n,o[0],o[1]);return o}}}function Fe(r,e){return e==null&&(e=["\u3007","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D"]),`${r}`.split("").map(t=>e[Number(t)]).join("")}const Ur="modulepreload",Ke={},Vr="/",Hr=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${Vr}${n}`,n in Ke)return;Ke[n]=!0;const i=n.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":Ur,i||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),i)return new Promise((s,d)=>{o.addEventListener("load",s),o.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())};let kt="_MATHJAX_INLINE_START",At="_MATHJAX_INLINE_END",Ct="_MATHJAX_BLOCK_START",Bt="_MATHJAX_BLOCK_END";var Jr=new Zt(()=>{let r=window.MathJax;r!=null&&r.typesetPromise!=null&&(r.typesetPromise(),r.texReset())},3e3);function Dt(){Jr.go()}function Ln(r){return w.useEffect(()=>{let e=ae(`
            
            <script defer>
                MathJax = {
                    

                    tex: {
                        packages: {"[+]": ["tagformat"]} , 
                        inlineMath: [["${kt}", "${At}"]] , 
                        displayMath: [["${Ct}", "${Bt}"]] , 
                        tags: "ams" , 
                        
                    },
                    svg: {
                        fontCache: "global" , 
                        scale: 0.9 , 
                    } , 
                    ignoreHtmlClass: "mathjax_ignore" , 
                    processHtmlClass: "mathjax_process" , 
                    preRemoveClass: "mathjax_preview" , 
                }
            <\/script>
        `);return Hr(()=>import("./tex-svg.89c94f6f.js"),[]),ae("head").append(e),()=>{e.remove()}},[]),l(w.Fragment,{children:r.children})}function Xr(r){return w.useEffect(()=>{Dt()},[r.children]),b("span",{className:"mathjax_process",children:[kt,r.children,At]})}function Kr(r){return w.useEffect(()=>{Dt()},[r.children]),b("div",{className:"mathjax_process",children:[Ct,r.children,Bt]})}function Le(r,e){return e=="chinese"?Fe(r):e=="arab"?`${r}`:e=="arab-circle"?r>0&&r<=20?["\u2460","\u2461","\u2462","\u2463","\u2464","\u2465","\u2466","\u2467","\u2468","\u2469","\u246A","\u246B","\u246C","\u246D","\u246E","\u246F","\u2470","\u2471","\u2472","\u2473"][r-1]:`(${r})`:e=="chinese-bracket"?`\u3010${Fe(r)}\u3011`:e=="number-bracket"?`[${r}]`:""}var qr=(()=>T({outer:e=>{let t=u(e.element,"title");return b(Z,{children:[l(Z,{subtitle_like:!0,children:t}),e.children]})}}))(),Zr=(()=>{let r=t=>new pe(`order/${u(t,"title")}`,`order/${u(t,"title")}`);return T({extra_effectors:[r],inject_pre:t=>{let n=r(t.element).get_context(t.context),i=n[n.length-1],a=u(t.element,"title"),o=u(t.element,"prefix"),s=Le(i,u(t.element,"ordering")),d=`${a}`;return s&&(d=d+` ${s}`),o&&(d=d+` \uFF08${o}\uFF09`),l(B,{inline:!0,children:d})},outer:t=>l(Z,{subtitle_like:!0,children:t.children})})})(),Qr=(()=>{let r=t=>new pe("order/normal","order/normal");return T({extra_effectors:[r],inject_pre:t=>{let n=r(t.element).get_context(t.context),i=u(t.element,"prefix"),a=Le(n,u(t.element,"ordering")),o="";return a&&(o=o+`${a} `),i&&(o=o+i),l(B,{inline:!0,children:o})},inject_suf:t=>{let n=u(t.element,"suffix");return l(B,{inline:!0,leftmargin:!0,children:n})},outer:t=>l(Z,{children:t.children})})})(),Yr=(()=>T({inner:r=>{let e=u(r.element,"title"),t=u(r.element,"close");return b(E,{force_direction:"column",children:[e?l(B,{children:e}):l(y,{}),l(Qt,{children:l(Yt,{children:r.children})}),t?l(B,{children:t}):l(y,{})]})}}))(),en=(()=>T({inner:r=>{let e=u(r.element,"title"),t=u(r.element,"close");return b(E,{force_direction:"column",children:[e?l(B,{children:e}):l(y,{}),l(xt,{align:"center",children:r.children}),t?l(B,{align:"right",children:t}):l(y,{})]})}}))(),tn=(()=>T({inner:r=>l("pre",{children:r.children})}))(),rn=(()=>T({inner:r=>l(E,{force_direction:"column",children:l(xt,{sx:{fontSize:e=>gt(e.printer.typography.structure.fontSize,2)},children:r.children})})}))(),nn=(()=>{let r=new pe("order/section","order/section");return{render_func:e=>{let t=r.get_context(e.context),n=e.element,i=u(n,"title"),o=u(n,"alone")?l(y,{}):b(B,{inline:!0,children:["\u7B2C",Fe(t),"\u8282"]});return b(ue,{children:[o,i?l(B,{inline:!0,sx:{marginRight:0},children:i}):l(y,{})]})},enter_effect:(e,t)=>{let n=[t,{}];return n=r.enter_fuse(e,n[0],n[1]),n},exit_effect:(e,t,n)=>{let i=[t,n];return i=r.exit_fuse(e,i[0],i[1]),i}}})(),ln=(()=>tr(r=>l(ue,{})))(),an=(()=>re({outer:r=>l("strong",{children:r.children})}))(),on=(()=>Wr({small_margin_enter:!0,small_margin_exit:!0,get_widths:r=>u(r,"widths").split(",").map(e=>e==""?1:parseInt(e))}))(),sn=(()=>re({outer:r=>l("del",{children:r.children})}))(),un=(()=>re({outer:r=>l(le,{component:"span",sx:{paddingX:"0.1rem"},children:l(Xr,{children:vt.string(r.element)})})}))(),cn=(()=>T({inner:r=>{let e=vt.string(r.element),t=u(r.element,"suffix"),n=u(r.element,"close"),i=u(r.element,"environ"),a=i?`\\begin{${i}}`:"",o=i?`\\end{${i}}`:"";return e=`${a}${e}\\text{${t}}${o}`,b(w.Fragment,{children:[r.context.anchor,l(Kr,{children:e}),n]})}}))(),dn=(()=>re({outer:r=>{let e=u(r.element,"type"),t=u(r.element,"target"),[n,i]=w.useState("");w.useEffect(()=>{(async()=>{if(e=="internal"){let s=await Me.get.resource_info(t);s.url?i(bt(s.url)):i("")}else i(t)})()},[r.element]);let a=u(r.element,"width"),o=u(r.element,"height");return l("img",{src:n||void 0,style:{width:a>0?`${a}rem`:"100%",height:o>0?`${o}rem`:"100%"}})}}))(),hn=(()=>re({outer:r=>{let e=u(r.element,"target"),t=u(r.element,"type"),n=u(r.element,"autotext");if(t=="index"){let i=Number(e);return l(rr.Consumer,{children:a=>{let o=a.root,s=nr(o,i),d=r.children;if(n){let g=He(o,i);g&&Je(g)&&u(g,"label")!=null&&(d=`\u6B64 ${u(g,"label")}`)}return l(we,{component:"button",onClick:g=>{a.printer_component.scroll_to(s)},children:l(W,{children:d})})}})}if(t=="http"){let i=r.children;return n&&(i="\u6B64 \u9875\u9762"),l(we,{href:e,children:i})}if(t=="outer-index"){let[i,a]=e.split(":"),[o,s]=[Number(i),Number(a)],[d,g]=w.useState(void 0);if(I.exports.useEffect(()=>{Me.get.content(o).then(f=>{g(f)})},[]),d==null)return l(y,{});let m=r.children;if(n){let f=He(d,s);f&&Je(f)&&u(f,"label")!=null&&(m=`\u6B64 ${u(f,"label")}`)}return l(we,{href:ir.view.content(o,{linkto:s}),children:m})}}}))(),fn=(()=>{let r=e=>new pe(`order/${u(e,"label")}`,`order/${u(e,"label")}`,t=>t.relation=="separating");return T({small_margin_enter:!0,extra_effectors:[r],inner:e=>{let t=r(e.element).get_context(e.context),n=Le(t,u(e.element,"ordering"));return l(w.Fragment,{children:b(E,{force_direction:"row",children:[l(er,{children:n?l(Se,{children:n}):l(y,{})}),l(le,{children:e.children})]})})}})})(),mn=Or(),_n=Ir,pn=St({}),gn=St({get_label:r=>`\u6B21\u8282\uFF1A${u(r,"title")}`}),xn=G({}),vn=G({}),bn=G({}),yn=G({}),wn=G({}),Sn=G({rightbar_extra:r=>{let e={variant:"standard",sx:{width:"2rem",marginBottom:"0.5rem",hright:"1rem"}},t=l(W,{sx:{fontSize:"0.7rem"},children:"extra"}),n=u(r.element,"suffix");return l(w.Fragment,{children:l(pt,$(h({},e),{label:t,defaultValue:n,onChange:i=>{let a=i.target.value,o=r.element;r.editor.auto_set_parameter(o,{suffix:{type:"string",val:a}})}}))})}});let Fn=G({});var $n=Mr,En=Ft({get_title:r=>u(r,"title")}),kn=Ft({get_title:()=>"\u7AE0\u8282"}),An=me({}),Cn=me({surrounder:r=>l("del",{children:r.children})}),Bn=me({surrounder:r=>l("u",{children:r.children})}),Dn=me({surrounder:r=>l(y,{children:r.children})}),Tn=jr({get_label:()=>"\u56FE\u7247",is_empty:r=>!!u(r,"target"),render_element:r=>{let[e,t]=w.useState(""),n=u(r.element,"target"),i=u(r.element,"type");w.useEffect(()=>{(async()=>{if(i=="internal"){let s=await Me.get.resource_info(n);s.url?t(bt(s.url)):t("")}else t(n)})()});let a=u(r.element,"width"),o=u(r.element,"height");return l("img",{src:e||void 0,style:{width:a>0?`${a}rem`:"100%",height:o>0?`${o}rem`:"100%"}})}}),Nn=Gr({get_label:r=>u(r,"label"),get_widths:(r,e)=>u(e,"widths").split(",").map(t=>t==""?1:parseInt(t))});function S(r){return Object.keys(r).reduce((e,t)=>$(h({},e),{[t]:{type:typeof r[t],val:r[t]}}),{})}var V={label:"\u663E\u793A\u7684\u540D\u79F0"},N={prefix:{val:"",type:"string"},suffix:{val:"",type:"string"},title:{val:"",type:"string"},close:{val:"",type:"string"},ordering:{val:"chinese",type:"choice",choices:["chinese","arab","arab-circle","chinese-bracket","number-bracket","none"]}},P=$(h({},V),{prefix:"\u6587\u672C\u524D\u7F00",suffix:"\u6587\u672C\u540E\u7F00",title:"\u5165",close:"\u51FA",ordering:"\u7F16\u53F7\u683C\u5F0F"}),qe=new D("\u662D\u8A00",h(h({},N),S({label:"\u662D\u8A00"})),h({},P)),Ze=new D("\u5E38\u8A00",h(h({},N),S({label:"\u5E38\u8A00"})),h({},P)),Qe=new D("\u968F\u8A00",h(h({},N),S({label:"\u968F\u8A00"})),h({},P));let Ye=new D("\u5C5E\u8A00",h(h({},N),S({label:"\u5C5E\u8A00"})),h({},P));var et=new Nr("\u9F50\u8A00",h(h({},N),S({label:"\u9F50\u8A00",widths:"1"})),$(h({},P),{widths:"\uFF08\u76F8\u5BF9\uFF09\u5BBD\u5EA6\u5217\u8868\uFF0C\u7528\u9017\u53F7\u5206\u9694"})),tt=new Pr("\u7A46\u8A00",{},{}),rt=new D("\u6570\u5B66\u8A00",h(h({},N),S({label:"\u6570\u5B66",environ:"align"})),$(h({},P),{environ:"\u73AF\u5883"})),nt=new D("\u88F1\u793A",h(h({},N),S({label:"\u88F1\u793A"})),h({},P)),it=new D("\u5F70\u793A",h(h({},N),S({label:"\u5F70\u793A"})),h({},P)),lt=new D("\u683C\u793A",h(h({},N),S({label:"\u683C\u793A"})),h({},P)),at=new he("\u5F3A\u8C03",S({label:"\u5F3A\u8C03"}),h({},V)),ot=new he("\u520A\u8C03",S({label:"\u520A\u8C03"}),h({},V));let st=new he("\u94FE\u8C03",$(h({},S({label:"\u94FE\u63A5",target:"",autotext:!1})),{type:{val:"index",type:"choice",choices:["index","outer-index","http"]}}),$(h({},V),{target:"\u5982\u4F55\u67E5\u627E\u76EE\u6807",type:"\u76EE\u6807\u683C\u5F0F\uFF08 index / outer-index / http \uFF09",autotext:"\u662F\u5426\u81EA\u52A8\u786E\u5B9A\u6587\u672C\u3002"}));var ut=new fe("\u56FE\u8C03",$(h({},S({label:"\u56FE\u7247",target:"",width:10,height:-1})),{type:{val:"internal",type:"choice",choices:["internal","http"]}}),$(h({},V),{target:"\u5982\u4F55\u67E5\u627E\u76EE\u6807",type:"\u76EE\u6807\u683C\u5F0F\uFF08 internal / http \uFF09",width:"\u56FE\u7247\u5BBD\u5EA6\uFF08rem\uFF09",height:"\u56FE\u7247\u9AD8\u5EA6\uFF08rem\uFF09"}),{forceInline:!0}),ct=new he("\u6570\u5B66\u8C03",S({label:"\u6570\u5B66"}),h({},V)),J=new fe("\u65B0\u6BB5",S({})),X=new D("\u6B21\u8282",S({label:"\u6B21\u8282",title:""})),K=new fe("\u5C0F\u8282\u7EBF",S({label:"\u5C0F\u8282",title:"",alone:!1})),q=new fe("\u7AE0\u8282\u7EBF",S({label:"\u7AE0"})),C={[qe.name]:[qe,pn,Zr],[Qe.name]:[Qe,bn,Yr],[nt.name]:[nt,yn,en],[it.name]:[it,wn,rn],[tt.name]:[tt,void 0,void 0],[J.name]:[J,$n,void 0],[K.name]:[K,En,nn],[q.name]:[q,kn,ln],[at.name]:[at,An,an],[Ze.name]:[Ze,xn,Qr],[et.name]:[et,Nn,on],[ut.name]:[ut,Tn,dn],[ot.name]:[ot,Cn,sn],[st.name]:[st,Bn,hn],[Ye.name]:[Ye,Fn,fn],[ct.name]:[ct,Dn,un],[rt.name]:[rt,Sn,cn],[lt.name]:[lt,vn,tn],[X.name]:[X,gn,qr]};function Gn(r){for(let e in C){let t=C[e][0];r.add_style(t)}return r}function zn(r){for(let e in C){let t=C[e][0];if(t.type=="abstract")continue;let n=C[e][2];r.set(n,t.type,t.name)}return r.set(mn,"paragraph"),r}function Wn(r){for(let e in C){let t=C[e][0];if(t.type=="abstract")continue;let n=C[e][1];r.set(n,t.type,t.name)}return r.set(_n,"paragraph"),r}function On(r){return r.support[J.name]=ie(J.name,J.name,{},{}),r.support[K.name]=ie(K.name,K.name,{},{}),r.support[q.name]=ie(q.name,q.name,{},{}),r.group[X.name]=ie(X.name,X.name,{},{}),r}function ie(r,e,t,n){let[i,a,o]=C[r];return new Rr(e,i,t,n)}function Un(r,e){ae(document).ready(()=>{let t=ae(`#yconcept-${e}`);if(!t)return;t[0].scrollIntoView({behavior:"smooth",block:"center"});let n=t.next();!n||n.css({border:"2px solid #ccbb44"})})}const Vn={palette:{divider:"#00000077",primary:{main:"#111111"}},printer:{margins:{paragraph:"0.4rem",special:"1.0rem",colon:"1rem",level:"2rem"},typography:{body:{fontFamily:"STXihei"},title:{fontFamily:"SimHei"},structure:{fontFamily:"SimHei"},display:{fontFamily:"KaiTi"},weaken:{fontFamily:"FangSong"}}}};export{jn as E,we as L,Ln as M,In as S,Wn as a,zn as b,On as c,ie as d,q as e,Un as l,Vn as m,Fe as n,K as s,Gn as w};
