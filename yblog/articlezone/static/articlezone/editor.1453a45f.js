var mt=Object.defineProperty;var gt=(t,e,n)=>e in t?mt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var ue=(t,e,n)=>(gt(t,typeof e!="symbol"?e+"":e,n),n);import{r as p,j as i,g as vt,c as tt,d as ce,e as nt,f as he,h as xt,i as Se,k as _t,F as rt,M as Et,a as L,I as $,B as z,u as me,A as De,b as O,l as Ct,T as kt,m as Ce,n as be,o as bt,s as ot,P as wt,E as yt,p as St,q as Dt,S as At,G as Tt,t as Ft,R as Lt}from"./titleword.eeefe96d.js";import{T as it,u as Pe,g as we,P as $e,o as Ie,a as at,r as Rt,M as It,p as Mt,f as zt,b as Bt,d as Ot,c as Pt,m as ve,C as $t}from"./overlayscrollbars.5bcb0056.js";import{f as Nt,M as Vt}from"./math.f2fd53ff.js";import{c as J,S as Ae,I as Ne}from"./useFormControl.15385db5.js";import{g as Ve,a as He,s as U,_ as C,u as We,d as Ht,b as fe,c as je,e as W,f as qe,h as Wt,r as jt,i as ye,B as Z,L as qt,j as Ut,k as Xt}from"./Link.01193879.js";import{d as Kt,T as Xe,P as Yt,B as Gt}from"./TextField.757073cf.js";import{S as Zt}from"./Save.ab88468a.js";function Jt(t){return Ve("MuiCollapse",t)}He("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const Qt=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],en=t=>{const{orientation:e,classes:n}=t,r={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return qe(r,Jt,n)},tn=U("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.root,e[n.orientation],n.state==="entered"&&e.entered,n.state==="exited"&&!n.in&&n.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>C({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&C({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),nn=U("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>C({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),rn=U("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>C({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),st=p.exports.forwardRef(function(e,n){const r=We({props:e,name:"MuiCollapse"}),{addEndListener:o,children:a,className:s,collapsedSize:c="0px",component:l,easing:d,in:u,onEnter:h,onEntered:x,onEntering:b,onExit:_,onExited:g,onExiting:f,orientation:y="vertical",style:I,timeout:E=Ht.standard,TransitionComponent:A=it}=r,w=fe(r,Qt),T=C({},r,{orientation:y,collapsedSize:c}),S=en(T),Q=Pe(),M=p.exports.useRef(),D=p.exports.useRef(null),j=p.exports.useRef(),N=typeof c=="number"?`${c}px`:c,X=y==="horizontal",q=X?"width":"height";p.exports.useEffect(()=>()=>{clearTimeout(M.current)},[]);const ee=p.exports.useRef(null),le=je(n,ee),V=m=>F=>{if(m){const P=ee.current;F===void 0?m(P):m(P,F)}},v=()=>D.current?D.current[X?"clientWidth":"clientHeight"]:0,R=V((m,F)=>{D.current&&X&&(D.current.style.position="absolute"),m.style[q]=N,h&&h(m,F)}),oe=V((m,F)=>{const P=v();D.current&&X&&(D.current.style.position="");const{duration:K,easing:te}=we({style:I,timeout:E,easing:d},{mode:"enter"});if(E==="auto"){const Ue=Q.transitions.getAutoHeightDuration(P);m.style.transitionDuration=`${Ue}ms`,j.current=Ue}else m.style.transitionDuration=typeof K=="string"?K:`${K}ms`;m.style[q]=`${P}px`,m.style.transitionTimingFunction=te,b&&b(m,F)}),ge=V((m,F)=>{m.style[q]="auto",x&&x(m,F)}),Fe=V(m=>{m.style[q]=`${v()}px`,_&&_(m)}),Le=V(g),Re=V(m=>{const F=v(),{duration:P,easing:K}=we({style:I,timeout:E,easing:d},{mode:"exit"});if(E==="auto"){const te=Q.transitions.getAutoHeightDuration(F);m.style.transitionDuration=`${te}ms`,j.current=te}else m.style.transitionDuration=typeof P=="string"?P:`${P}ms`;m.style[q]=N,m.style.transitionTimingFunction=K,f&&f(m)});return i(A,C({in:u,onEnter:R,onEntered:ge,onEntering:oe,onExit:Fe,onExited:Le,onExiting:Re,addEndListener:m=>{E==="auto"&&(M.current=setTimeout(m,j.current||0)),o&&o(ee.current,m)},nodeRef:ee,timeout:E==="auto"?null:E},w,{children:(m,F)=>i(tn,C({as:l,className:W(S.root,s,{entered:S.entered,exited:!u&&N==="0px"&&S.hidden}[m]),style:C({[X?"minWidth":"minHeight"]:N},I),ownerState:C({},T,{state:m}),ref:le},F,{children:i(nn,{ownerState:C({},T,{state:m}),className:S.wrapper,ref:D,children:i(rn,{ownerState:C({},T,{state:m}),className:S.wrapperInner,children:a})})}))}))});st.muiSupportAuto=!0;var on=st;function an(t){return Ve("MuiCard",t)}He("MuiCard",["root"]);const sn=["className","raised"],cn=t=>{const{classes:e}=t;return qe({root:["root"]},an,e)},ln=U($e,{name:"MuiCard",slot:"Root",overridesResolver:(t,e)=>e.root})(()=>({overflow:"hidden"})),un=p.exports.forwardRef(function(e,n){const r=We({props:e,name:"MuiCard"}),{className:o,raised:a=!1}=r,s=fe(r,sn),c=C({},r,{raised:a}),l=cn(c);return i(ln,C({className:W(l.root,o),elevation:a?8:void 0,ref:n,ownerState:c},s))});var dn=un;function Ke(t){return t.substring(2).toLowerCase()}function pn(t,e){return e.documentElement.clientWidth<t.clientX||e.documentElement.clientHeight<t.clientY}function fn(t){const{children:e,disableReactTree:n=!1,mouseEvent:r="onClick",onClickAway:o,touchEvent:a="onTouchEnd"}=t,s=p.exports.useRef(!1),c=p.exports.useRef(null),l=p.exports.useRef(!1),d=p.exports.useRef(!1);p.exports.useEffect(()=>(setTimeout(()=>{l.current=!0},0),()=>{l.current=!1}),[]);const u=je(e.ref,c),h=Wt(_=>{const g=d.current;d.current=!1;const f=Ie(c.current);if(!l.current||!c.current||"clientX"in _&&pn(_,f))return;if(s.current){s.current=!1;return}let y;_.composedPath?y=_.composedPath().indexOf(c.current)>-1:y=!f.documentElement.contains(_.target)||c.current.contains(_.target),!y&&(n||!g)&&o(_)}),x=_=>g=>{d.current=!0;const f=e.props[_];f&&f(g)},b={ref:u};return a!==!1&&(b[a]=x(a)),p.exports.useEffect(()=>{if(a!==!1){const _=Ke(a),g=Ie(c.current),f=()=>{s.current=!0};return g.addEventListener(_,h),g.addEventListener("touchmove",f),()=>{g.removeEventListener(_,h),g.removeEventListener("touchmove",f)}}},[h,a]),r!==!1&&(b[r]=x(r)),p.exports.useEffect(()=>{if(r!==!1){const _=Ke(r),g=Ie(c.current);return g.addEventListener(_,h),()=>{g.removeEventListener(_,h)}}},[h,r]),i(p.exports.Fragment,{children:p.exports.cloneElement(e,b)})}const hn=["addEndListener","appear","children","container","direction","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","style","timeout","TransitionComponent"];function mn(t,e,n){const r=e.getBoundingClientRect(),o=n&&n.getBoundingClientRect(),a=at(e);let s;if(e.fakeTransform)s=e.fakeTransform;else{const d=a.getComputedStyle(e);s=d.getPropertyValue("-webkit-transform")||d.getPropertyValue("transform")}let c=0,l=0;if(s&&s!=="none"&&typeof s=="string"){const d=s.split("(")[1].split(")")[0].split(",");c=parseInt(d[4],10),l=parseInt(d[5],10)}return t==="left"?o?`translateX(${o.right+c-r.left}px)`:`translateX(${a.innerWidth+c-r.left}px)`:t==="right"?o?`translateX(-${r.right-o.left-c}px)`:`translateX(-${r.left+r.width-c}px)`:t==="up"?o?`translateY(${o.bottom+l-r.top}px)`:`translateY(${a.innerHeight+l-r.top}px)`:o?`translateY(-${r.top-o.top+r.height-l}px)`:`translateY(-${r.top+r.height-l}px)`}function gn(t){return typeof t=="function"?t():t}function xe(t,e,n){const r=gn(n),o=mn(t,e,r);o&&(e.style.webkitTransform=o,e.style.transform=o)}const vn=p.exports.forwardRef(function(e,n){const r=Pe(),o={enter:r.transitions.easing.easeOut,exit:r.transitions.easing.sharp},a={enter:r.transitions.duration.enteringScreen,exit:r.transitions.duration.leavingScreen},{addEndListener:s,appear:c=!0,children:l,container:d,direction:u="down",easing:h=o,in:x,onEnter:b,onEntered:_,onEntering:g,onExit:f,onExited:y,onExiting:I,style:E,timeout:A=a,TransitionComponent:w=it}=e,T=fe(e,hn),S=p.exports.useRef(null),Q=je(l.ref,S,n),M=v=>R=>{v&&(R===void 0?v(S.current):v(S.current,R))},D=M((v,R)=>{xe(u,v,d),Rt(v),b&&b(v,R)}),j=M((v,R)=>{const oe=we({timeout:A,style:E,easing:h},{mode:"enter"});v.style.webkitTransition=r.transitions.create("-webkit-transform",C({},oe)),v.style.transition=r.transitions.create("transform",C({},oe)),v.style.webkitTransform="none",v.style.transform="none",g&&g(v,R)}),N=M(_),X=M(I),q=M(v=>{const R=we({timeout:A,style:E,easing:h},{mode:"exit"});v.style.webkitTransition=r.transitions.create("-webkit-transform",R),v.style.transition=r.transitions.create("transform",R),xe(u,v,d),f&&f(v)}),ee=M(v=>{v.style.webkitTransition="",v.style.transition="",y&&y(v)}),le=v=>{s&&s(S.current,v)},V=p.exports.useCallback(()=>{S.current&&xe(u,S.current,d)},[u,d]);return p.exports.useEffect(()=>{if(x||u==="down"||u==="right")return;const v=Kt(()=>{S.current&&xe(u,S.current,d)}),R=at(S.current);return R.addEventListener("resize",v),()=>{v.clear(),R.removeEventListener("resize",v)}},[u,x,d]),p.exports.useEffect(()=>{x||V()},[x,V]),i(w,C({nodeRef:S,onEnter:D,onEntered:N,onEntering:j,onExit:q,onExited:ee,onExiting:X,addEndListener:le,appear:c,in:x,timeout:A},T,{children:(v,R)=>p.exports.cloneElement(l,C({ref:Q,style:C({visibility:v==="exited"&&!x?"hidden":void 0},E,l.props.style)},R))}))});var ct=vn;function xn(t){return Ve("MuiDrawer",t)}He("MuiDrawer",["root","docked","paper","paperAnchorLeft","paperAnchorRight","paperAnchorTop","paperAnchorBottom","paperAnchorDockedLeft","paperAnchorDockedRight","paperAnchorDockedTop","paperAnchorDockedBottom","modal"]);const _n=["BackdropProps"],En=["anchor","BackdropProps","children","className","elevation","hideBackdrop","ModalProps","onClose","open","PaperProps","SlideProps","TransitionComponent","transitionDuration","variant"],lt=(t,e)=>{const{ownerState:n}=t;return[e.root,(n.variant==="permanent"||n.variant==="persistent")&&e.docked,e.modal]},Cn=t=>{const{classes:e,anchor:n,variant:r}=t,o={root:["root"],docked:[(r==="permanent"||r==="persistent")&&"docked"],modal:["modal"],paper:["paper",`paperAnchor${ye(n)}`,r!=="temporary"&&`paperAnchorDocked${ye(n)}`]};return qe(o,xn,e)},kn=U(It,{name:"MuiDrawer",slot:"Root",overridesResolver:lt})(({theme:t})=>({zIndex:(t.vars||t).zIndex.drawer})),Ye=U("div",{shouldForwardProp:jt,name:"MuiDrawer",slot:"Docked",skipVariantsResolver:!1,overridesResolver:lt})({flex:"0 0 auto"}),bn=U($e,{name:"MuiDrawer",slot:"Paper",overridesResolver:(t,e)=>{const{ownerState:n}=t;return[e.paper,e[`paperAnchor${ye(n.anchor)}`],n.variant!=="temporary"&&e[`paperAnchorDocked${ye(n.anchor)}`]]}})(({theme:t,ownerState:e})=>C({overflowY:"auto",display:"flex",flexDirection:"column",height:"100%",flex:"1 0 auto",zIndex:(t.vars||t).zIndex.drawer,WebkitOverflowScrolling:"touch",position:"fixed",top:0,outline:0},e.anchor==="left"&&{left:0},e.anchor==="top"&&{top:0,left:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="right"&&{right:0},e.anchor==="bottom"&&{top:"auto",left:0,bottom:0,right:0,height:"auto",maxHeight:"100%"},e.anchor==="left"&&e.variant!=="temporary"&&{borderRight:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="top"&&e.variant!=="temporary"&&{borderBottom:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="right"&&e.variant!=="temporary"&&{borderLeft:`1px solid ${(t.vars||t).palette.divider}`},e.anchor==="bottom"&&e.variant!=="temporary"&&{borderTop:`1px solid ${(t.vars||t).palette.divider}`})),ut={left:"right",right:"left",top:"down",bottom:"up"};function wn(t){return["left","right"].indexOf(t)!==-1}function yn(t,e){return t.direction==="rtl"&&wn(e)?ut[e]:e}const Sn=p.exports.forwardRef(function(e,n){const r=We({props:e,name:"MuiDrawer"}),o=Pe(),a={enter:o.transitions.duration.enteringScreen,exit:o.transitions.duration.leavingScreen},{anchor:s="left",BackdropProps:c,children:l,className:d,elevation:u=16,hideBackdrop:h=!1,ModalProps:{BackdropProps:x}={},onClose:b,open:_=!1,PaperProps:g={},SlideProps:f,TransitionComponent:y=ct,transitionDuration:I=a,variant:E="temporary"}=r,A=fe(r.ModalProps,_n),w=fe(r,En),T=p.exports.useRef(!1);p.exports.useEffect(()=>{T.current=!0},[]);const S=yn(o,s),M=C({},r,{anchor:s,elevation:u,open:_,variant:E},w),D=Cn(M),j=i(bn,C({elevation:E==="temporary"?u:0,square:!0},g,{className:W(D.paper,g.className),ownerState:M,children:l}));if(E==="permanent")return i(Ye,C({className:W(D.root,D.docked,d),ownerState:M,ref:n},w,{children:j}));const N=i(y,C({in:_,direction:ut[S],timeout:I,appear:T.current},f,{children:j}));return E==="persistent"?i(Ye,C({className:W(D.root,D.docked,d),ownerState:M,ref:n},w,{children:N})):i(kn,C({BackdropProps:C({},c,x,{transitionDuration:I}),className:W(D.root,D.modal,d),open:_,ownerState:M,onClose:b,hideBackdrop:h,ref:n},w,A,{children:N}))});var Dn=Sn;let An=tt({get_label:(t,e)=>e.label});var Tn=tt({get_label:(t,e)=>`\u6B21\u8282\uFF1A${e.title}`}),Fn=ce({}),Ln=ce({}),Rn=ce({}),In=ce({});let Mn=ce({}),zn=nt({get_title:(t,e)=>e.title}),Bn=nt({get_title:(t,e)=>"\u7AE0\u8282"});var On=he({}),Pn=he({}),$n=he({surrounder:t=>i("del",{children:t.children})}),Nn=he({surrounder:t=>i("u",{children:t.children})}),Vn=he({surrounder:t=>i(rt,{children:t.children})}),Hn=xt({get_label:()=>"\u884C",get_numchildren:(t,e)=>e.widths.split(",").reduce((o,a)=>[...o,parseInt(a)],[]).length,get_widths:(t,e)=>e.widths.split(",").reduce((o,a)=>[...o,parseInt(a)],[])}),Wn=ce({rightbar_extra(t){return[{component:Et,other_props:{idx:0,parameter_name:"suffix",label:"extra"},skip_mouseless:!0}]}}),jn=Se({get_label:()=>"\u56FE\u7247",is_empty:(t,e)=>!e.target,render_element:t=>{let[e,n]=L.useState(""),r=t.node,o=r.parameters.target.val,a=r.parameters.type.val,s=r.parameters.height.val,c=r.parameters.width.val;return L.useEffect(()=>{(async()=>{if(a=="internal"){let l=await $.get.resource_info(o,z.node_id);l.url?n(me(l.url)):n("")}else n(o)})()}),i("img",{src:e||void 0,style:{width:c>0?`${c}rem`:"100%",height:s>0?`${s}rem`:"100%"}})}}),qn=Se({get_label:(t,e)=>"\u5C55\u793A\u5B50\u8282\u70B9"}),Un=Se({get_label:(t,e)=>"\u5C55\u793A\u6742\u9648\u8282\u70B9"}),Xn=Se({get_label:(t,e)=>"\u63D2\u5165\u5B50\u8282\u70B9"}),Kn=_t({get_label:t=>{var e;return(e=t.parameters.label)==null?void 0:e.val}});let Yn={group:{\u662D\u8A00:An,\u968F\u8A00:Ln,\u5C5E\u8A00:Mn,\u6570\u5B66:Wn,\u88F1\u793A:Rn,\u5F70\u793A:In,\u683C\u793A:Fn,\u6B21\u8282:Tn},inline:{\u5F3A:On,\u520A:$n,\u7F00:Nn,\u6570\u5B66:Vn,\u65E0:Pn},structure:{\u9F50\u8A00:Hn},support:{\u56FE:jn,\u5C0F\u8282\u7EBF:zn,\u7AE0\u8282\u7EBF:Bn,\u5C55\u793A\u5B50\u8282\u70B9:qn,\u5C55\u793A\u6742\u9648\u8282\u70B9:Un,\u63D2\u5165\u5B50\u8282\u70B9:Xn},abstract:{\u7A46\u8A00:Kn}},Gn=vt();var Zn=J([i("circle",{cx:"17",cy:"4.54",r:"2"},"0"),i("path",{d:"M14 17h-2c0 1.65-1.35 3-3 3s-3-1.35-3-3 1.35-3 3-3v-2c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5zm3-3.5h-1.86l1.67-3.67C17.42 8.5 16.44 7 14.96 7h-5.2c-.81 0-1.54.47-1.87 1.2L7.22 10l1.92.53L9.79 9H12l-1.83 4.1c-.6 1.33.39 2.9 1.85 2.9H17v5h2v-5.5c0-1.1-.9-2-2-2z"},"1")],"AccessibleForward"),Jn=J(i("path",{d:"m22.25 14.29-.69 1.89L9.2 11.71l2.08-5.66 8.56 3.09c2.1.76 3.18 3.06 2.41 5.15zM1.5 12.14 8 14.48V19h8v-1.63L20.52 19l.69-1.89-19.02-6.86-.69 1.89zm5.8-1.94c1.49-.72 2.12-2.51 1.41-4C7.99 4.71 6.2 4.08 4.7 4.8c-1.49.71-2.12 2.5-1.4 4 .71 1.49 2.5 2.12 4 1.4z"}),"AirlineSeatFlatAngled"),Qn=J(i("path",{d:"M6 6.5c.31 0 .7.15.9.56.24.5.02 1.1-.47 1.34-.14.06-.28.1-.43.1-.3 0-.7-.15-.89-.56-.17-.34-.1-.63-.05-.78.05-.14.18-.4.51-.56.14-.06.28-.1.43-.1m6.47 2.11 6.69 2.41c.52.19.93.56 1.15 1.05.22.48.25 1.03.06 1.53l-.01.02-8.59-3.11.7-1.9M10 15.19l4 1.44V17h-4v-1.81M6 4.5c-.44 0-.88.1-1.3.3-1.49.71-2.12 2.5-1.4 4 .51 1.07 1.58 1.7 2.7 1.7.44 0 .88-.1 1.3-.3 1.49-.72 2.12-2.51 1.41-4C8.19 5.13 7.12 4.5 6 4.5zm5.28 1.55L9.2 11.71l12.36 4.47.69-1.89c.77-2.09-.31-4.39-2.41-5.15l-8.56-3.09zm-9.09 4.2-.69 1.89L8 14.48V19h8v-1.63L20.52 19l.69-1.89-19.02-6.86z"}),"AirlineSeatFlatAngledOutlined"),er=J([i("circle",{cx:"12.5",cy:"4.5",r:"2"},"0"),i("path",{d:"m19.77 17.72-.64-6.37c-.07-.77-.72-1.35-1.49-1.35H16c-1.5-.02-2.86-.54-3.76-1.44l-2-1.98C10.08 6.42 9.62 6 8.83 6c-.51 0-1.02.2-1.41.59L4.08 9.91c-.53.68-.51 1.57-.21 2.13l1.43 2.8-3.15 4.05 1.57 1.24L7.4 15.4l-.17-1.36.77.71V20h2v-6.12l-2.12-2.12 2.36-2.36c.94.94 1.72 1.82 3.59 2.32L13 20h1.5l.41-3.5h3.18l.14 1.22c-.44.26-.73.74-.73 1.28 0 .83.67 1.5 1.5 1.5s1.5-.67 1.5-1.5c0-.54-.29-1.02-.73-1.28zM15.09 15l.41-3.5h2l.41 3.5h-2.82z"},"1")],"AssistWalker"),tr=J(i("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),nr=J(i("path",{d:"M18.41 5.8 17.2 4.59c-.78-.78-2.05-.78-2.83 0l-2.68 2.68L3 15.96V20h4.04l8.74-8.74 2.63-2.63c.79-.78.79-2.05 0-2.83zM6.21 18H5v-1.21l8.66-8.66 1.21 1.21L6.21 18zM11 20l4-4h6v4H11z"}),"DriveFileRenameOutline"),dt=J(i("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2zm0 12H4V8h16v10zM8 13.01l1.41 1.41L11 12.84V17h2v-4.16l1.59 1.59L16 13.01 12.01 9 8 13.01z"}),"DriveFolderUpload"),rr=J(i("path",{d:"M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm-1 4 6 6v10c0 1.1-.9 2-2 2H7.99C6.89 23 6 22.1 6 21l.01-14c0-1.1.89-2 1.99-2h7zm-1 7h5.5L14 6.5V12z"}),"FileCopy"),or=J(i("path",{d:"M9.5 5.5c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zM5.75 8.9 3 23h2.1l1.75-8L9 17v6h2v-7.55L8.95 13.4l.6-3C10.85 12 12.8 13 15 13v-2c-1.85 0-3.45-1-4.35-2.45l-.95-1.6C9.35 6.35 8.7 6 8 6c-.25 0-.5.05-.75.15L2 8.3V13h2V9.65l1.75-.75M13 2v7h3.75v14h1.5V9H22V2h-9zm5.01 6V6.25H14.5v-1.5h3.51V3l2.49 2.5L18.01 8z"}),"FollowTheSigns");function Te(t){let e=t.Icon;return i(Z,{sx:{marginLeft:"0.35rem",marginRight:"0.25rem",marginTop:"0.35rem"},children:i(De,{title:t.title,children:i(qt,{underline:"hover",href:t.href,children:i(e,{fontSize:"small",color:"primary"})})})})}function ir(t){return i(Te,{title:"\u540E\u53F0\u9875\u9762",href:me(`/admin/articlezone/node/${z.node_id}/change/`),Icon:or})}function ar(t){return i(Te,{title:"\u7F16\u8F91\u5B50\u8282\u70B9\u7ED3\u6784",href:me(`/edit/structure/${z.node_id}`),Icon:Jn})}function sr(t){return i(Te,{title:"\uFF08\u6D45\uFF09\u7F16\u8F91\u5B50\u8282\u70B9\u7ED3\u6784",href:me(`/edit/shallow_structure/${z.node_id}`),Icon:Qn})}function cr(t){return i(Te,{title:"\u9884\u89C8\u9875\u9762\uFF08\u6709\u4EC0\u4E48\u5FC5\u8981\u5417\uFF09",href:me(`/view/content/${z.node_id}`),Icon:Zn})}function Ge(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function lr(t,e,n){return e&&Ge(t.prototype,e),n&&Ge(t,n),t}function k(){return k=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},k.apply(this,arguments)}function ur(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function re(t,e){if(t==null)return{};var n={},r=Object.keys(t),o,a;for(a=0;a<r.length;a++)o=r[a],!(e.indexOf(o)>=0)&&(n[o]=t[o]);return n}function Ze(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var pt=L.createContext(),dr={mui:{root:{},anchorOriginTopCenter:{},anchorOriginBottomCenter:{},anchorOriginTopRight:{},anchorOriginBottomRight:{},anchorOriginTopLeft:{},anchorOriginBottomLeft:{}},container:{containerRoot:{},containerAnchorOriginTopCenter:{},containerAnchorOriginBottomCenter:{},containerAnchorOriginTopRight:{},containerAnchorOriginBottomRight:{},containerAnchorOriginTopLeft:{},containerAnchorOriginBottomLeft:{}}},Y={view:{default:20,dense:4},snackbar:{default:6,dense:2}},ae={maxSnack:3,dense:!1,hideIconVariant:!1,variant:"default",autoHideDuration:5e3,anchorOrigin:{vertical:"bottom",horizontal:"left"},TransitionComponent:ct,transitionDuration:{enter:225,exit:195}},de=function(e){return e.charAt(0).toUpperCase()+e.slice(1)},pr=function(e){return""+de(e.vertical)+de(e.horizontal)},fr=function(e){return Object.keys(e).filter(function(n){return!dr.container[n]}).reduce(function(n,r){var o;return k({},n,(o={},o[r]=e[r],o))},{})},ne={TIMEOUT:"timeout",CLICKAWAY:"clickaway",MAXSNACK:"maxsnack",INSTRUCTED:"instructed"},ke={toContainerAnchorOrigin:function(e){return"containerAnchorOrigin"+e},toAnchorOrigin:function(e){var n=e.vertical,r=e.horizontal;return"anchorOrigin"+de(n)+de(r)},toVariant:function(e){return"variant"+de(e)}},_e=function(e){return!!e||e===0},Je=function(e){return typeof e=="number"||e===null},hr=function(e,n,r){return function(o){return o==="autoHideDuration"?Je(e.autoHideDuration)?e.autoHideDuration:Je(n.autoHideDuration)?n.autoHideDuration:ae.autoHideDuration:e[o]||n[o]||r[o]}};function Me(t,e,n){return t===void 0&&(t={}),e===void 0&&(e={}),n===void 0&&(n={}),k({},n,{},e,{},t)}var mr="SnackbarContent",ft={root:mr+"-root"},gr=U("div")(function(t){var e,n,r=t.theme;return n={},n["&."+ft.root]=(e={display:"flex",flexWrap:"wrap",flexGrow:1},e[r.breakpoints.up("sm")]={flexGrow:"initial",minWidth:288},e),n}),vr=p.exports.forwardRef(function(t,e){var n=t.className,r=re(t,["className"]);return i(gr,{...Object.assign({ref:e,className:W(ft.root,n)},r)})}),Qe={right:"left",left:"right",bottom:"up",top:"down"},xr=function(e){return e.horizontal!=="center"?Qe[e.horizontal]:Qe[e.vertical]},_r=function(e){return i(Ae,{...Object.assign({},e),children:i("path",{d:"M12 2C6.5 2 2 6.5 2 12S6.5 22 12 22 22 17.5 22 12 17.5 2 12 2M10 17L5 12L6.41 10.59L10 14.17L17.59 6.58L19 8L10 17Z"})})},Er=function(e){return i(Ae,{...Object.assign({},e),children:i("path",{d:"M13,14H11V10H13M13,18H11V16H13M1,21H23L12,2L1,21Z"})})},Cr=function(e){return i(Ae,{...Object.assign({},e),children:i("path",{d:"M12,2C17.53,2 22,6.47 22,12C22,17.53 17.53,22 12,22C6.47,22 2,17.53 2,12C2, 6.47 6.47,2 12,2M15.59,7L12,10.59L8.41,7L7,8.41L10.59,12L7,15.59L8.41,17L12, 13.41L15.59,17L17,15.59L13.41,12L17,8.41L15.59,7Z"})})},kr=function(e){return i(Ae,{...Object.assign({},e),children:i("path",{d:"M13,9H11V7H13M13,17H11V11H13M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0, 0 22,12A10,10 0 0,0 12,2Z"})})},Ee={fontSize:20,marginInlineEnd:8},br={default:void 0,success:i(_r,{style:Ee}),warning:i(Er,{style:Ee}),error:i(Cr,{style:Ee}),info:i(kr,{style:Ee})};function pe(t,e){return t.reduce(function(n,r){return r==null?n:function(){for(var a=arguments.length,s=new Array(a),c=0;c<a;c++)s[c]=arguments[c];var l=[].concat(s);e&&l.indexOf(e)===-1&&l.push(e),n.apply(this,l),r.apply(this,l)}},function(){})}var wr=typeof window!="undefined"?p.exports.useLayoutEffect:p.exports.useEffect;function et(t){var e=p.exports.useRef(t);return wr(function(){e.current=t}),p.exports.useCallback(function(){return e.current.apply(void 0,arguments)},[])}var yr=p.exports.forwardRef(function(t,e){var n=t.children,r=t.autoHideDuration,o=t.ClickAwayListenerProps,a=t.disableWindowBlurListener,s=a===void 0?!1:a,c=t.onClose,l=t.onMouseEnter,d=t.onMouseLeave,u=t.open,h=t.resumeHideDuration,x=re(t,["children","autoHideDuration","ClickAwayListenerProps","disableWindowBlurListener","onClose","onMouseEnter","onMouseLeave","open","resumeHideDuration"]),b=p.exports.useRef(),_=et(function(){c&&c.apply(void 0,arguments)}),g=et(function(w){!c||w==null||(clearTimeout(b.current),b.current=setTimeout(function(){_(null,ne.TIMEOUT)},w))});p.exports.useEffect(function(){return u&&g(r),function(){clearTimeout(b.current)}},[u,r,g]);var f=function(){clearTimeout(b.current)},y=p.exports.useCallback(function(){r!=null&&g(h!=null?h:r*.5)},[r,h,g]),I=function(T){l&&l(T),f()},E=function(T){d&&d(T),y()},A=function(T){c&&c(T,ne.CLICKAWAY)};return p.exports.useEffect(function(){if(!s&&u)return window.addEventListener("focus",y),window.addEventListener("blur",f),function(){window.removeEventListener("focus",y),window.removeEventListener("blur",f)}},[s,y,u]),p.exports.createElement(fn,k({onClickAway:A},o),p.exports.createElement("div",k({onMouseEnter:I,onMouseLeave:E,ref:e},x),n))}),G="SnackbarItem",B={contentRoot:G+"-contentRoot",lessPadding:G+"-lessPadding",variantSuccess:G+"-variantSuccess",variantError:G+"-variantError",variantInfo:G+"-variantInfo",variantWarning:G+"-variantWarning",message:G+"-message",action:G+"-action",wrappedRoot:G+"-wrappedRoot"},Sr=U(yr)(function(t){var e,n=t.theme,r=n.palette.mode||n.palette.type,o=Ut(n.palette.background.default,r==="light"?.8:.98);return e={},e["&."+B.wrappedRoot]={position:"relative",transform:"translateX(0)",top:0,right:0,bottom:0,left:0},e["."+B.contentRoot]=k({},n.typography.body2,{backgroundColor:o,color:n.palette.getContrastText(o),alignItems:"center",padding:"6px 16px",borderRadius:"4px",boxShadow:"0px 3px 5px -1px rgba(0,0,0,0.2),0px 6px 10px 0px rgba(0,0,0,0.14),0px 1px 18px 0px rgba(0,0,0,0.12)"}),e["."+B.lessPadding]={paddingLeft:8*2.5},e["."+B.variantSuccess]={backgroundColor:"#43a047",color:"#fff"},e["."+B.variantError]={backgroundColor:"#d32f2f",color:"#fff"},e["."+B.variantInfo]={backgroundColor:"#2196f3",color:"#fff"},e["."+B.variantWarning]={backgroundColor:"#ff9800",color:"#fff"},e["."+B.message]={display:"flex",alignItems:"center",padding:"8px 0"},e["."+B.action]={display:"flex",alignItems:"center",marginLeft:"auto",paddingLeft:16,marginRight:-8},e}),Dr=function(e){var n=e.classes,r=re(e,["classes"]),o=p.exports.useRef(),a=p.exports.useState(!0),s=a[0],c=a[1];p.exports.useEffect(function(){return function(){o.current&&clearTimeout(o.current)}},[]);var l=pe([r.snack.onClose,r.onClose],r.snack.key),d=function(){r.snack.requestClose&&l(null,ne.INSTRCUTED)},u=function(){o.current=setTimeout(function(){c(!s)},125)},h=r.style,x=r.ariaAttributes,b=r.className,_=r.hideIconVariant,g=r.iconVariant,f=r.snack,y=r.action,I=r.content,E=r.TransitionComponent,A=r.TransitionProps,w=r.transitionDuration,T=re(r,["style","dense","ariaAttributes","className","hideIconVariant","iconVariant","snack","action","content","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),S=f.key,Q=f.open,M=f.className,D=f.variant,j=f.content,N=f.action,X=f.ariaAttributes,q=f.anchorOrigin,ee=f.message,le=f.TransitionComponent,V=f.TransitionProps,v=f.transitionDuration,R=re(f,["persist","key","open","entered","requestClose","className","variant","content","action","ariaAttributes","anchorOrigin","message","TransitionComponent","TransitionProps","transitionDuration","onEnter","onEntered","onEntering","onExit","onExited","onExiting"]),oe=k({},br,{},g)[D],ge=k({"aria-describedby":"notistack-snackbar"},Me(X,x)),Fe=le||E||ae.TransitionComponent,Le=Me(v,w,ae.transitionDuration),Re=k({direction:xr(q)},Me(V,A)),se=N||y;typeof se=="function"&&(se=se(S));var m=j||I;typeof m=="function"&&(m=m(S,f.message));var F=["onEnter","onEntering","onEntered","onExit","onExiting","onExited"].reduce(function(P,K){var te;return k({},P,(te={},te[K]=pe([r.snack[K],r[K]],r.snack.key),te))},{});return i(on,{unmountOnExit:!0,timeout:175,in:s,onExited:F.onExited,children:i(Sr,{...Object.assign({},T,R,{open:Q,className:W(n.root,B.wrappedRoot,n[ke.toAnchorOrigin(q)]),onClose:l}),children:i(Fe,{...Object.assign({appear:!0,in:Q,timeout:Le},Re,{onExit:F.onExit,onExiting:F.onExiting,onExited:u,onEnter:F.onEnter,onEntering:F.onEntering,onEntered:pe([F.onEntered,d])}),children:m||O(vr,{...Object.assign({},ge,{role:"alert",style:h,className:W(B.contentRoot,B[ke.toVariant(D)],n[ke.toVariant(D)],b,M,!_&&oe&&B.lessPadding)}),children:[O("div",{id:ge["aria-describedby"],className:B.message,children:[_?null:oe,ee]}),se&&i("div",{className:B.action,children:se})]})})})})},ze={container:"& > .MuiCollapse-container, & > .MuiCollapse-root",wrapper:"& > .MuiCollapse-container > .MuiCollapse-wrapper, & > .MuiCollapse-root > .MuiCollapse-wrapper"},Be=16,ie="SnackbarContainer",H={root:ie+"-root",rootDense:ie+"-rootDense",top:ie+"-top",bottom:ie+"-bottom",left:ie+"-left",right:ie+"-right",center:ie+"-center"},Ar=U("div")(function(t){var e,n,r,o,a,s,c=t.theme;return s={},s["&."+H.root]=(e={boxSizing:"border-box",display:"flex",maxHeight:"100%",position:"fixed",zIndex:c.zIndex.snackbar,height:"auto",width:"auto",transition:"top 300ms ease 0ms, right 300ms ease 0ms, bottom 300ms ease 0ms, left 300ms ease 0ms, margin 300ms ease 0ms, max-width 300ms ease 0ms",pointerEvents:"none"},e[ze.container]={pointerEvents:"all"},e[ze.wrapper]={padding:Y.snackbar.default+"px 0px",transition:"padding 300ms ease 0ms"},e.maxWidth="calc(100% - "+Y.view.default*2+"px)",e[c.breakpoints.down("sm")]={width:"100%",maxWidth:"calc(100% - "+Be*2+"px)"},e),s["&."+H.rootDense]=(n={},n[ze.wrapper]={padding:Y.snackbar.dense+"px 0px"},n),s["&."+H.top]={top:Y.view.default-Y.snackbar.default,flexDirection:"column"},s["&."+H.bottom]={bottom:Y.view.default-Y.snackbar.default,flexDirection:"column-reverse"},s["&."+H.left]=(r={left:Y.view.default},r[c.breakpoints.up("sm")]={alignItems:"flex-start"},r[c.breakpoints.down("sm")]={left:Be+"px"},r),s["&."+H.right]=(o={right:Y.view.default},o[c.breakpoints.up("sm")]={alignItems:"flex-end"},o[c.breakpoints.down("sm")]={right:Be+"px"},o),s["&."+H.center]=(a={left:"50%",transform:"translateX(-50%)"},a[c.breakpoints.up("sm")]={alignItems:"center"},a),s}),Tr=function(e){var n=e.className,r=e.anchorOrigin,o=e.dense,a=re(e,["className","anchorOrigin","dense"]),s=W(H[r.vertical],H[r.horizontal],H.root,n,o&&H.rootDense);return i(Ar,{...Object.assign({className:s},a)})},Fr=L.memo(Tr),Lr=function(t){ur(e,t);function e(r){var o;return o=t.call(this,r)||this,o.enqueueSnackbar=function(a,s){s===void 0&&(s={});var c=s,l=c.key,d=c.preventDuplicate,u=re(c,["key","preventDuplicate"]),h=_e(l),x=h?l:new Date().getTime()+Math.random(),b=hr(u,o.props,ae),_=k({key:x},u,{message:a,open:!0,entered:!1,requestClose:!1,variant:b("variant"),anchorOrigin:b("anchorOrigin"),autoHideDuration:b("autoHideDuration")});return u.persist&&(_.autoHideDuration=void 0),o.setState(function(g){if(d===void 0&&o.props.preventDuplicate||d){var f=function(A){return h?A.key===l:A.message===a},y=g.queue.findIndex(f)>-1,I=g.snacks.findIndex(f)>-1;if(y||I)return g}return o.handleDisplaySnack(k({},g,{queue:[].concat(g.queue,[_])}))}),x},o.handleDisplaySnack=function(a){var s=a.snacks;return s.length>=o.maxSnack?o.handleDismissOldest(a):o.processQueue(a)},o.processQueue=function(a){var s=a.queue,c=a.snacks;return s.length>0?k({},a,{snacks:[].concat(c,[s[0]]),queue:s.slice(1,s.length)}):a},o.handleDismissOldest=function(a){if(a.snacks.some(function(u){return!u.open||u.requestClose}))return a;var s=!1,c=!1,l=a.snacks.reduce(function(u,h){return u+(h.open&&h.persist?1:0)},0);l===o.maxSnack&&(c=!0);var d=a.snacks.map(function(u){return!s&&(!u.persist||c)?(s=!0,u.entered?(u.onClose&&u.onClose(null,ne.MAXSNACK,u.key),o.props.onClose&&o.props.onClose(null,ne.MAXSNACK,u.key),k({},u,{open:!1})):k({},u,{requestClose:!0})):k({},u)});return k({},a,{snacks:d})},o.handleEnteredSnack=function(a,s,c){if(!_e(c))throw new Error("handleEnteredSnack Cannot be called with undefined key");o.setState(function(l){var d=l.snacks;return{snacks:d.map(function(u){return u.key===c?k({},u,{entered:!0}):k({},u)})}})},o.handleCloseSnack=function(a,s,c){if(o.props.onClose&&o.props.onClose(a,s,c),s!==ne.CLICKAWAY){var l=c===void 0;o.setState(function(d){var u=d.snacks,h=d.queue;return{snacks:u.map(function(x){return!l&&x.key!==c?k({},x):x.entered?k({},x,{open:!1}):k({},x,{requestClose:!0})}),queue:h.filter(function(x){return x.key!==c})}})}},o.closeSnackbar=function(a){var s=o.state.snacks.find(function(c){return c.key===a});_e(a)&&s&&s.onClose&&s.onClose(null,ne.INSTRUCTED,a),o.handleCloseSnack(null,ne.INSTRUCTED,a)},o.handleExitedSnack=function(a,s,c){var l=s||c;if(!_e(l))throw new Error("handleExitedSnack Cannot be called with undefined key");o.setState(function(d){var u=o.processQueue(k({},d,{snacks:d.snacks.filter(function(h){return h.key!==l})}));return u.queue.length===0?u:o.handleDismissOldest(u)})},o.state={snacks:[],queue:[],contextValue:{enqueueSnackbar:o.enqueueSnackbar.bind(Ze(o)),closeSnackbar:o.closeSnackbar.bind(Ze(o))}},o}var n=e.prototype;return n.render=function(){var o=this,a=this.state.contextValue,s=this.props,c=s.iconVariant,l=s.dense,d=l===void 0?ae.dense:l,u=s.hideIconVariant,h=u===void 0?ae.hideIconVariant:u,x=s.domRoot,b=s.children,_=s.classes,g=_===void 0?{}:_,f=re(s,["maxSnack","preventDuplicate","variant","anchorOrigin","iconVariant","dense","hideIconVariant","domRoot","children","classes"]),y=this.state.snacks.reduce(function(E,A){var w,T=pr(A.anchorOrigin),S=E[T]||[];return k({},E,(w={},w[T]=[].concat(S,[A]),w))},{}),I=Object.keys(y).map(function(E){var A=y[E];return i(Fr,{dense:d,anchorOrigin:A[0].anchorOrigin,className:W(g.containerRoot,g[ke.toContainerAnchorOrigin(E)]),children:A.map(function(w){return i(Dr,{...Object.assign({},f,{key:w.key,snack:w,dense:d,iconVariant:c,hideIconVariant:h,classes:fr(g),onClose:o.handleCloseSnack,onExited:pe([o.handleExitedSnack,o.props.onExited]),onEntered:pe([o.handleEnteredSnack,o.props.onEntered])})})})},E)});return O(pt.Provider,{value:a,children:[b,x?Ct.exports.createPortal(I,x):I]})},lr(e,[{key:"maxSnack",get:function(){return this.props.maxSnack||ae.maxSnack}}]),e}(p.exports.Component),ht=function(){return p.exports.useContext(pt)};function Rr(){return i(Z,{sx:{marginX:"auto"},children:O("label",{children:[i("input",{type:"file",style:{display:"none"},onChange:t=>{if(t.target.files.length>0){var e=new FormData;e.append("file",t.target.files[0]),$.post.file(e,z.node_id)}}}),i(be,{title:"\u4E0A\u4F20",icon:dt,component:"span",size:"small",icon_props:{sx:{marginLeft:"-0.1rem",color:"primary"}}})]})})}function Ir(t){let[e,n]=L.useState(void 0);const{enqueueSnackbar:r,closeSnackbar:o}=ht();return O(L.Fragment,{children:[i(be,{title:"\u5220\u9664\u8D44\u6E90",icon:tr,onClick:async a=>{n(a.currentTarget)}}),i(Yt,{anchorEl:e,open:!!e,onClose:a=>n(void 0),anchorOrigin:{vertical:"center",horizontal:"right"},children:i(Gt,{onClick:async a=>{let s=await $.post.delete_resource(t.resource_id);r(s?"\u5220\u9664\u6210\u529F":"\u5220\u9664\u5931\u8D25"),n(void 0),s&&t.onSuccess&&t.onSuccess()},children:"\u786E\u5B9A\uFF1F"})})]})}function Mr(t){let[e,n,r]=[t.id,t.name,t.url],[o,a]=L.useState(n);const{enqueueSnackbar:s,closeSnackbar:c}=ht();p.exports.useEffect(()=>{a(n)},[n]);let l=t.onSuccess||(()=>{});return i($e,{variant:"outlined",sx:{position:"relative",marginTop:"1rem",marginX:"1rem",marginBottom:"1rem",paddingY:"0.7rem"},children:O(Ce,{force_direction:"row",children:[i(Z,{sx:{flex:1},children:O(Ce,{children:[i(Xe,{variant:"standard",label:"name",value:o,fullWidth:!0,onChange:d=>{a(d.target.value)}}),i(Xe,{variant:"standard",label:"url",value:r,fullWidth:!0,sx:{marginTop:"1rem"},InputProps:{readOnly:!0}})]})}),i(Z,{children:O(Ce,{children:[i(be,{title:"\u66F4\u6539\u8D44\u6E90\u540D",icon:nr,onClick:async d=>{let u={name:o},h=await $.post.manage_recourse(!1,u,e);s(h?"\u4FEE\u6539\u6587\u4EF6\u540D\u6210\u529F":"\u4FEE\u6539\u6587\u4EF6\u540D\u5931\u8D25")}}),O("label",{children:[i("input",{type:"file",style:{display:"none"},onChange:async d=>{let u=!1;if(d.target.files.length<=0)u=!1;else{var h=new FormData;h.append("file",d.target.files[0]);let x=await $.post.manage_recourse(!0,h,e);u=x,x&&l()}s(u?"\u4E0A\u4F20\u6587\u4EF6\u6210\u529F":"\u4E0A\u4F20\u6587\u4EF6\u5931\u8D25")}}),i(be,{title:"\u66FF\u6362\u6587\u4EF6",icon:dt,component:"span"})]}),i(Ir,{resource_id:e,onSuccess:l})]})})]})})}class zr extends L.Component{constructor(n){super(n);ue(this,"contextType",kt);this.state={resources:[]}}async effect(){let n=await $.get.resources(z.node_id);this.setState({resources:n}),this.forceUpdate()}async componentDidMount(){this.effect()}render(){let n=this;return i(Z,{sx:n.context.printer.fonts.body,children:i(Ce,{force_direction:"column",children:n.state.resources.map((r,o)=>{let[a,s,c]=r;return i(L.Fragment,{children:i(Mr,{id:a,name:s,url:c,onSuccess:()=>{n.effect()}})},o)})})})}}function Br(t){let[e,n]=L.useState(!1);return O(L.Fragment,{children:[i(De,{title:"\u67E5\u770B/\u7BA1\u7406\u6587\u4EF6",children:i(Ne,{size:"small",onClick:()=>{n(!0)},children:i(rr,{fontSize:"small",color:"primary"})})}),i(Dn,{anchor:"left",open:e,onClose:()=>n(!1),ModalProps:{keepMounted:!1},SlideProps:{onExited:()=>{}},PaperProps:{sx:{width:"40%"}},children:i(zr,{})})]})}class Or extends L.Component{constructor(e){super(e),this.state={snackbar_open:!1,status:!1}}render(){let e=this;return i(L.Fragment,{children:i(De,{title:"\u751F\u6210\u6458\u8981",children:i(Ne,{size:"small",onClick:()=>{$.post.tldr(z.node_id).then(()=>{let n=e.props.onSuccess;n&&n()})},children:i(er,{fontSize:"small",color:"primary"})})})})}}class Pr extends L.Component{constructor(e){super(e),this.state={snackbar_open:!1,status:!1}}render(){return i(L.Fragment,{children:i(De,{title:"\u4FDD\u5B58",children:i(Ne,{size:"small",onClick:()=>this.props.save_func(),children:i(Zt,{fontSize:"small",color:"primary"})})})})}}function Oe(t,e,n){return ot(t,e)&&t.concept==n}function $r(t,e){const n=e.normalizeNode;return e.normalizeNode=r=>{let[o,a]=r;if(bt("initializing")){n(r);return}if(a.length==0){let s=o,c=s.children.length;if(c==0||!Oe(s.children[0],"support","\u5C0F\u8282\u7EBF")){t.add_nodes(t.get_core().create_support("\u5C0F\u8282\u7EBF"),[0]);return}if(!Oe(s.children[c-1],"support","\u7AE0\u8282\u7EBF")){t.add_nodes(t.get_core().create_support("\u7AE0\u8282\u7EBF"),[c]);return}}if(Oe(o,"support","\u7AE0\u8282\u7EBF")&&(a.length!=1||a[0]!=e.children.length-1)){t.delete_node_by_path(a);return}n(r)},e}function Nr(t,e){const n=e.normalizeNode;return e.normalizeNode=r=>{let[o,a]=r;ot(o),n(r)},e}let Vr=[$r,Nr];function Hr(t,e){for(let n of Vr)e=n(t,e);return e}class Wr extends L.Component{constructor(n){super(n);ue(this,"editor_ref");ue(this,"printer_ref");ue(this,"snackerbar_ref");this.state={printer:void 0,editorcore:void 0,tree:void 0,cache:void 0},this.editor_ref=L.createRef(),this.printer_ref=L.createRef(),this.snackerbar_ref=L.createRef()}update_title(n){var o,a;n||(n=this.state.tree),n&&(document.title=`\u7F16\u8F91\uFF1A${(a=(o=n.parameters)==null?void 0:o.title)==null?void 0:a.val}`)}open_snackerbar(n){this.snackerbar_ref&&this.snackerbar_ref.current&&this.snackerbar_ref.current.enqueueSnackbar(n)}async componentDidMount(){let n=this,r=await $.get.concept(z.node_id),o=Mt(r),a=new wt(zt,o,Bt,Ot),s=new yt({renderers:Yn,default_renderers:Gn,printer:a}),c=await $.get.content(z.node_id);c||(c=s.create_abstract("root"),c.parameters={title:{val:`Article: ${z.node_id}`,type:"string"}}),n.update_title(c);let l=await $.get.cache(z.node_id);this.setState({printer:a,editorcore:s,tree:c,cache:l})}get_editor(){if(this.editor_ref&&this.editor_ref.current)return this.editor_ref.current.get_editor()}get_printer_comp(){if(this.printer_ref&&this.printer_ref.current)return this.printer_ref.current.get_component()}async save_content(n=void 0,r=void 0){n==null&&(n=this.state.tree),r==null&&(r=this.state.cache);let o=await $.post.content({content:n},z.node_id),a=await $.post.cache({cache:r},z.node_id);this.open_snackerbar(o&&a?"\u4FDD\u5B58\u6210\u529F":"\u4FDD\u5B58\u5931\u8D25")}scroll_to_selection(){let n=this.get_editor(),r=this.get_printer_comp();if(!(n&&r))return;let o=n.get_slate().selection;if(!(o&&o.focus&&o.focus.path))return;let a=o.focus.path;r.scroll_to(a)}update_tree(){let n=this.get_editor();if(!n)return;let r=n.get_root();return this.setState({tree:r}),this.update_title(),r}render(){let n=this,{editorcore:r,printer:o,tree:a}=this.state;if(!(r&&o&&a))return i(rt,{});let[s,c]=(()=>{let{children:l,...d}=a;return[d,l]})();return i(Pt,{theme:Xt(ve.mui),children:i(St,{value:ve,mui:!0,children:O(Z,{sx:l=>({position:"fixed",width:"100%",height:"100%",left:"0",right:"0",backgroundColor:l.palette.background.default,color:l.palette.text.primary}),children:[i($t,{}),i(Lr,{maxSnack:3,ref:n.snackerbar_ref,anchorOrigin:{horizontal:"right",vertical:"top"},variant:"info",children:O(Z,{sx:{position:"absolute",top:"2%",left:"1%",height:"96%",width:"98%"},children:[O(dn,{sx:{position:"absolute",left:"0",width:"auto",display:"flex",flexDirection:"column"},children:[i(Pr,{save_func:n.save_content.bind(n)}),i(Br,{}),i(Rr,{}),i(ir,{}),i(ar,{}),i(sr,{}),i(cr,{}),i(Or,{onSuccess:()=>{n.open_snackerbar("\u751F\u6210\u6458\u8981\u5B8C\u6210\uFF01")}})]}),O(Z,{sx:{position:"absolute",left:"3%",width:"96%",height:"100%"},children:[i(Z,{sx:{position:"absolute",width:"49%",left:"0%",top:"0",height:"100%"},children:i(Dt,{ref:n.editor_ref,editorcore:r,init_rootproperty:s,init_rootchildren:c,onSave:()=>{let l=n.update_tree();setTimeout(()=>{Nt.go(),n.save_content(l),n.scroll_to_selection()},50)},theme:ve,plugin:Hr})}),i(At,{sx:{position:"absolute",width:"49%",left:"51%",top:"0",height:"100%",overflow:"auto",paddingRight:"1%"},className:"mathjax_process",children:i(Vt,{children:i(Tt,{value:{BackendData:z,cache:n.state.cache},children:i(Ft,{printer:o,theme:ve,onUpdateCache:l=>{l&&JSON.stringify(l)!=JSON.stringify(n.state.cache)&&setTimeout(()=>n.setState({cache:l}),200)},ref:n.printer_ref,root:a,onDidMount:l=>{z.linkto&&setTimeout(()=>{let d=parseInt(z.linkto);l.scroll_to_idx(d);let u=l.get_ref_from_idx(d);u&&(u.style.border="2px solid")},300)}})})})})]})]})})]})})})}}Lt.render(i(Wr,{}),document.getElementById("root"));
