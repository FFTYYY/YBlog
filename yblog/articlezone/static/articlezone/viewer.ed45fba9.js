var S=Object.defineProperty;var w=(i,r,t)=>r in i?S(i,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[r]=t;var u=(i,r,t)=>(w(i,typeof r!="symbol"?r+"":r,t),t);import{j as e,F as _,a as f,T as B,b as d,S as g,I as p,B as m,P as T,h as C,G as k,W as I,k as R,R as P}from"./titleword.80f09066.js";import{I as L,p as M,f as j,a as A,d as D,c as z,C as F}from"./overlayscrollbars.db08bf34.js";import{c as J,f as E,m as h,M as N}from"./theme.9845efad.js";import{A as O,T as Y}from"./index.271911a8.js";import{B as l,S as x,L as G,j as H}from"./Link.3acf854f.js";import"./useFormControl.34911e83.js";import"./AccessibleForward.b8b638b2.js";function v(i){let r=i.item,t=r.name,[c,a]=t.split("___");return d(l,{sx:{marginTop:"0.2rem"},children:[d(G,{component:"button",underline:"hover",onClick:o=>{i.onScroll(r.node_path)},color:"text.primary",textAlign:"left",children:[e(x,{sx:{fontSize:"0.8rem",left:"0",right:"1rem",position:"absolute"},children:c}),e(x,{sx:{fontSize:"0.8rem",left:"1rem",marginRight:"1rem",position:"relative"},children:a})]}),e(l,{children:r.sons.map((o,s)=>e(v,{item:o,onScroll:i.onScroll},s))})]})}function U(i){if(!i.printer)return e(_,{});let r=f.useContext(B),t=new L(()=>""),[c,a,o,s]=i.printer.preprocess({root:i.root,init_env:{}}),n=t.get_env(c).root;return n.sons.length<2?e(_,{}):e(l,{sx:{...r.printer.fonts.body,position:"relative",top:"30%",height:"40%",width:"auto"},children:d(l,{sx:{position:"absolute",width:"100%",height:"100%",paddingLeft:"1rem",paddingRight:"0.5rem",paddingY:"0.25rem"},children:[e(l,{sx:{position:"absolute",top:0,height:"1.5rem",width:"100%",left:0,backgroundColor:r.my_palette.background.primary,color:r.my_palette.text.on_primary,opacity:.9,paddingLeft:"0.2rem",lineHeight:"1.5rem",paddingY:"0.2rem"},children:e(x,{fontSize:"small",sx:{paddingLeft:"0.2rem"},children:"\u76EE\u5F55"})}),e(g,{sx:{overflow:"auto",position:"absolute",left:"1rem",right:"0.5rem",top:"2rem",bottom:"0.5rem"},children:n.sons.map((b,y)=>e(J,{children:e(v,{item:b,onScroll:i.onScroll},y)}))})]})})}class W extends f.Component{constructor(t){super(t);u(this,"printer_comp_ref");this.state={printer:void 0,tree:void 0,cache:void 0,info:{},activate_idx:!1},this.printer_comp_ref=f.createRef()}get_printer_comp(){if(this.printer_comp_ref&&this.printer_comp_ref.current)return this.printer_comp_ref.current}async componentDidMount(){let t=await p.get.concept(m.node_id),c=M(t),a=new T(j,c,A,D),o=await p.get.content(m.node_id);document.title=o.parameters.title.val;let s=await p.get.cache(m.node_id),n=await p.get.create_time(m.node_id);this.setState({printer:a,tree:o,cache:s,info:{create_time:n.create_time,modify_time:n.modify_time}}),setTimeout(()=>{E.go()},1e3)}render(){let t=this,{printer:c,tree:a}=this.state;return c&&a?e(z,{theme:H(h.mui),children:e(C,{value:h,children:d(l,{sx:{position:"fixed",width:"100%",height:"100%",left:"0",right:"0",backgroundColor:"rgba(0,0,0,0)",color:"text.primary"},children:[e(F,{}),e(O,{sx:{position:"absolute",top:"0",left:"0",height:"2.60rem",width:"100%",opacity:"0.9",border:"1px solid grey"},children:e(Y,{root:a,idx_activated:t.state.activate_idx,onActivateIdx:()=>{t.setState({activate_idx:!t.state.activate_idx})}})}),e(l,{sx:{position:"absolute",top:"2.6rem",left:"12%",bottom:"0.5rem",width:"70%"},children:e(g,{sx:{position:"absolute",width:"98%",left:"1%",top:"1%",height:"98%",overflowY:"auto",wordBreak:"break-all"},className:"mathjax_process",children:e(N,{children:d(k,{value:{BackendData:m,cache:t.state.cache,activate_idx:t.state.activate_idx},children:[e(l,{sx:{marginTop:"2.5rem",marginLeft:"2rem",marginBottom:"2.5rem"},children:e(I,{sx:{fontSize:"1.5rem"},children:a.parameters.title.val})}),e(l,{children:e(R,{ref:this.printer_comp_ref,printer:c,theme:h,onUpdateCache:o=>{o&&JSON.stringify(o)!=JSON.stringify(t.state.cache)&&setTimeout(()=>t.setState({cache:o}),200)},root:a,onDidMount:o=>{m.linkto&&setTimeout(()=>{let s=parseInt(m.linkto);o.scroll_to_idx(s);let n=o.get_ref_from_idx(s);n&&(n.style.border="2px solid")},500)}})})]})})})}),e(l,{sx:{position:"absolute",top:"6%",left:"83%",height:"92%",width:"13%"},children:e(U,{root:a,printer:t.state.printer,onScroll:o=>{var n;let s=(n=t.get_printer_comp())==null?void 0:n.get_component();s&&s.scroll_to(o)}})})]})})}):e(_,{})}}P.render(e(W,{}),document.getElementById("root"));
