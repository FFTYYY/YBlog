var At=Object.defineProperty,Bt=Object.defineProperties;var Dt=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var Tt=Object.prototype.hasOwnProperty,Nt=Object.prototype.propertyIsEnumerable;var ye=(r,e,t)=>e in r?At(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,f=(r,e)=>{for(var t in e||(e={}))Tt.call(e,t)&&ye(r,t,e[t]);if(Le)for(var t of Le(e))Nt.call(e,t)&&ye(r,t,e[t]);return r},E=(r,e)=>Bt(r,Dt(e));var u=(r,e,t)=>(ye(r,typeof e!="symbol"?e+"":e,t),t);import{g as Fe,a as Ee,s as $e,_ as k,u as ke,G as Pt,b as Ce,d as Ae,e as Be,H as oe,J as De,T as W,f as ot,K as Mt,L as Rt,M as It,N as jt,h as Gt,O as Lt,E as st,Q as zt,R as Wt,A as $,S as G,U as Te,V as O,W as se,X as Ne,Y as Q,Z as U,$ as ue,a0 as ce,a1 as ut,a2 as Y,o as ee,a3 as de,a4 as c,a5 as ct,P as dt,a6 as Ot,B as le,n as ze,p as We,t as Oe,a7 as Ut,a8 as Vt,a9 as Ht,k as ht,aa as q,ab as ft,ac as Se,ad as Jt,ae,af as B,ag as Xt,ah as Kt,ai as mt,aj as _t,ak as Zt,al as qt,I as Pe,am as pt,an as Qt,ao as Yt,ap as er,j as tr,r as rr}from"./snackbar.2a20be8e.js";import{r as j,j as l,b as v,F as y,a as w}from"./jsx-runtime.71fbd6ab.js";const nr=j.exports.createContext();var Ue=nr;function ir(r){return Fe("MuiGrid",r)}const lr=[0,1,2,3,4,5,6,7,8,9,10],ar=["column-reverse","column","row-reverse","row"],or=["nowrap","wrap-reverse","wrap"],H=["auto",!0,1,2,3,4,5,6,7,8,9,10,11,12],Me=Ee("MuiGrid",["root","container","item","zeroMinWidth",...lr.map(r=>`spacing-xs-${r}`),...ar.map(r=>`direction-xs-${r}`),...or.map(r=>`wrap-xs-${r}`),...H.map(r=>`grid-xs-${r}`),...H.map(r=>`grid-sm-${r}`),...H.map(r=>`grid-md-${r}`),...H.map(r=>`grid-lg-${r}`),...H.map(r=>`grid-xl-${r}`)]),sr=["className","columns","columnSpacing","component","container","direction","item","lg","md","rowSpacing","sm","spacing","wrap","xl","xs","zeroMinWidth"];function z(r){const e=parseFloat(r);return`${e}${String(r).replace(String(e),"")||"px"}`}function ur({theme:r,ownerState:e}){let t;return r.breakpoints.keys.reduce((n,i)=>{let a={};if(e[i]&&(t=e[i]),!t)return n;if(t===!0)a={flexBasis:0,flexGrow:1,maxWidth:"100%"};else if(t==="auto")a={flexBasis:"auto",flexGrow:0,flexShrink:0,maxWidth:"none",width:"auto"};else{const o=oe({values:e.columns,breakpoints:r.breakpoints.values}),s=typeof o=="object"?o[i]:o;if(s==null)return n;const m=`${Math.round(t/s*1e8)/1e6}%`;let b={};if(e.container&&e.item&&e.columnSpacing!==0){const _=r.spacing(e.columnSpacing);if(_!=="0px"){const d=`calc(${m} + ${z(_)})`;b={flexBasis:d,maxWidth:d}}}a=k({flexBasis:m,flexGrow:0,maxWidth:m},b)}return r.breakpoints.values[i]===0?Object.assign(n,a):n[r.breakpoints.up(i)]=a,n},{})}function cr({theme:r,ownerState:e}){const t=oe({values:e.direction,breakpoints:r.breakpoints.values});return De({theme:r},t,n=>{const i={flexDirection:n};return n.indexOf("column")===0&&(i[`& > .${Me.item}`]={maxWidth:"none"}),i})}function dr({theme:r,ownerState:e}){const{container:t,rowSpacing:n}=e;let i={};if(t&&n!==0){const a=oe({values:n,breakpoints:r.breakpoints.values});i=De({theme:r},a,o=>{const s=r.spacing(o);return s!=="0px"?{marginTop:`-${z(s)}`,[`& > .${Me.item}`]:{paddingTop:z(s)}}:{}})}return i}function hr({theme:r,ownerState:e}){const{container:t,columnSpacing:n}=e;let i={};if(t&&n!==0){const a=oe({values:n,breakpoints:r.breakpoints.values});i=De({theme:r},a,o=>{const s=r.spacing(o);return s!=="0px"?{width:`calc(100% + ${z(s)})`,marginLeft:`-${z(s)}`,[`& > .${Me.item}`]:{paddingLeft:z(s)}}:{}})}return i}function gt(r,e,t={}){if(!e||!r||r<=0)return[];if(typeof r=="string"&&!Number.isNaN(Number(r))||typeof r=="number")return[t[`spacing-xs-${String(r)}`]||`spacing-xs-${String(r)}`];const{xs:n,sm:i,md:a,lg:o,xl:s}=r;return[Number(n)>0&&(t[`spacing-xs-${String(n)}`]||`spacing-xs-${String(n)}`),Number(i)>0&&(t[`spacing-sm-${String(i)}`]||`spacing-sm-${String(i)}`),Number(a)>0&&(t[`spacing-md-${String(a)}`]||`spacing-md-${String(a)}`),Number(o)>0&&(t[`spacing-lg-${String(o)}`]||`spacing-lg-${String(o)}`),Number(s)>0&&(t[`spacing-xl-${String(s)}`]||`spacing-xl-${String(s)}`)]}const fr=$e("div",{name:"MuiGrid",slot:"Root",overridesResolver:(r,e)=>{const{container:t,direction:n,item:i,lg:a,md:o,sm:s,spacing:m,wrap:b,xl:_,xs:d,zeroMinWidth:h}=r.ownerState;return[e.root,t&&e.container,i&&e.item,h&&e.zeroMinWidth,...gt(m,t,e),n!=="row"&&e[`direction-xs-${String(n)}`],b!=="wrap"&&e[`wrap-xs-${String(b)}`],d!==!1&&e[`grid-xs-${String(d)}`],s!==!1&&e[`grid-sm-${String(s)}`],o!==!1&&e[`grid-md-${String(o)}`],a!==!1&&e[`grid-lg-${String(a)}`],_!==!1&&e[`grid-xl-${String(_)}`]]}})(({ownerState:r})=>k({boxSizing:"border-box"},r.container&&{display:"flex",flexWrap:"wrap",width:"100%"},r.item&&{margin:0},r.zeroMinWidth&&{minWidth:0},r.wrap!=="wrap"&&{flexWrap:r.wrap}),cr,dr,hr,ur),mr=r=>{const{classes:e,container:t,direction:n,item:i,lg:a,md:o,sm:s,spacing:m,wrap:b,xl:_,xs:d,zeroMinWidth:h}=r,x={root:["root",t&&"container",i&&"item",h&&"zeroMinWidth",...gt(m,t),n!=="row"&&`direction-xs-${String(n)}`,b!=="wrap"&&`wrap-xs-${String(b)}`,d!==!1&&`grid-xs-${String(d)}`,s!==!1&&`grid-sm-${String(s)}`,o!==!1&&`grid-md-${String(o)}`,a!==!1&&`grid-lg-${String(a)}`,_!==!1&&`grid-xl-${String(_)}`]};return Ae(x,ir,e)},_r=j.exports.forwardRef(function(e,t){const n=ke({props:e,name:"MuiGrid"}),i=Pt(n),{className:a,columns:o,columnSpacing:s,component:m="div",container:b=!1,direction:_="row",item:d=!1,lg:h=!1,md:x=!1,rowSpacing:p,sm:g=!1,spacing:F=0,wrap:M="wrap",xl:C=!1,xs:ge=!1,zeroMinWidth:xe=!1}=i,ve=Ce(i,sr),ne=p||F,be=s||F,R=j.exports.useContext(Ue),je=b?o||12:R,Ge=k({},i,{columns:je,container:b,direction:_,item:d,lg:h,md:x,sm:g,rowSpacing:ne,columnSpacing:be,wrap:M,xl:C,xs:ge,zeroMinWidth:xe}),Ct=mr(Ge);return l(Ue.Provider,{value:je,children:l(fr,k({ownerState:Ge,className:Be(Ct.root,a),as:m,ref:t},ve))})});var I=_r;function pr(r){return Fe("MuiLink",r)}const gr=Ee("MuiLink",["root","underlineNone","underlineHover","underlineAlways","button","focusVisible"]);var xr=gr;const vr=["className","color","component","onBlur","onFocus","TypographyClasses","underline","variant"],br={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},yr=r=>br[r]||r,wr=r=>{const{classes:e,component:t,focusVisible:n,underline:i}=r,a={root:["root",`underline${ot(i)}`,t==="button"&&"button",n&&"focusVisible"]};return Ae(a,pr,e)},Sr=$e(W,{name:"MuiLink",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,e[`underline${ot(t.underline)}`],t.component==="button"&&e.button]}})(({theme:r,ownerState:e})=>{const t=Mt(r,`palette.${yr(e.color)}`)||e.color;return k({},e.underline==="none"&&{textDecoration:"none"},e.underline==="hover"&&{textDecoration:"none","&:hover":{textDecoration:"underline"}},e.underline==="always"&&{textDecoration:"underline",textDecorationColor:t!=="inherit"?Rt(t,.4):void 0,"&:hover":{textDecorationColor:"inherit"}},e.component==="button"&&{position:"relative",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none","&::-moz-focus-inner":{borderStyle:"none"},[`&.${xr.focusVisible}`]:{outline:"auto"}})}),Fr=j.exports.forwardRef(function(e,t){const n=ke({props:e,name:"MuiLink"}),{className:i,color:a="primary",component:o="a",onBlur:s,onFocus:m,TypographyClasses:b,underline:_="always",variant:d="inherit"}=n,h=Ce(n,vr),{isFocusVisibleRef:x,onBlur:p,onFocus:g,ref:F}=It(),[M,C]=j.exports.useState(!1),ge=jt(t,F),xe=R=>{p(R),x.current===!1&&C(!1),s&&s(R)},ve=R=>{g(R),x.current===!0&&C(!0),m&&m(R)},ne=k({},n,{color:a,component:o,focusVisible:M,underline:_,variant:d}),be=wr(ne);return l(Sr,k({className:Be(be.root,i),classes:b,color:a,component:o,onBlur:xe,onFocus:ve,ref:ge,ownerState:ne,variant:d},h))});var we=Fr;function Er(r){return Fe("MuiToolbar",r)}Ee("MuiToolbar",["root","gutters","regular","dense"]);const $r=["className","component","disableGutters","variant"],kr=r=>{const{classes:e,disableGutters:t,variant:n}=r;return Ae({root:["root",!t&&"gutters",n]},Er,e)},Cr=$e("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(r,e)=>{const{ownerState:t}=r;return[e.root,!t.disableGutters&&e.gutters,e[t.variant]]}})(({theme:r,ownerState:e})=>k({position:"relative",display:"flex",alignItems:"center"},!e.disableGutters&&{paddingLeft:r.spacing(2),paddingRight:r.spacing(2),[r.breakpoints.up("sm")]:{paddingLeft:r.spacing(3),paddingRight:r.spacing(3)}},e.variant==="dense"&&{minHeight:48}),({theme:r,ownerState:e})=>e.variant==="regular"&&r.mixins.toolbar),Ar=j.exports.forwardRef(function(e,t){const n=ke({props:e,name:"MuiToolbar"}),{className:i,component:a="div",disableGutters:o=!1,variant:s="regular"}=n,m=Ce(n,$r),b=k({},n,{component:a,disableGutters:o,variant:s}),_=kr(b);return l(Cr,k({as:a,className:Be(_.root,i),ref:t,ownerState:b},m))});var Br=Ar,te=Gt(l("path",{d:"M7.41 8.59 12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"}),"KeyboardArrowDown");class Mn{constructor(e){u(this,"styles");u(this,"notifications");this.styles={inline:{},group:{},struct:{},support:{},abstract:{}};for(let t of e)this.add_style(t);this.notifications={}}add_notificatioon(e,t){this.notifications[t]=e}remove_notificatioon(e){delete this.notifications[e]}add_style(e){this.styles[e.type][e.name]=e}get_style(e,t){return this.styles[e][t]}}class he{constructor(e,t,n={},i={}){u(this,"type","inline");u(this,"name");u(this,"parameter_prototype");u(this,"flags");u(this,"makenode");u(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>Lt(e,t,i)}}class D{constructor(e,t,n={},i={}){u(this,"type","group");u(this,"name");u(this,"parameter_prototype");u(this,"flags");u(this,"makenode");u(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>st(e,t,i)}}class Dr{constructor(e,t,n={},i={}){u(this,"type","struct");u(this,"name");u(this,"parameter_prototype");u(this,"flags");u(this,"makenode");u(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>zt(e,t,i)}}class fe{constructor(e,t,n={},i={}){u(this,"type","support");u(this,"name");u(this,"parameter_prototype");u(this,"flags");u(this,"makenode");u(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.flags=i,this.parameter_labels=n,this.makenode=()=>Wt(e,t,i)}}class Tr{constructor(e,t,n={}){u(this,"type","abstract");u(this,"name");u(this,"parameter_prototype");u(this,"flags");u(this,"makehidden");u(this,"parameter_labels");this.name=e,this.parameter_prototype=t,this.parameter_labels=n,this.flags={},this.makehidden=()=>st(e,t)}}class Rn{constructor(e,t={}){u(this,"core");u(this,"default_vals");u(this,"styled_vals");this.core=e,this.default_vals=t,this.styled_vals={inline:{},group:{},struct:{},support:{}}}get(e,t=void 0){return t==null?this.default_vals[e]:this.styled_vals[e][t]||this.default_vals[e]}set(e,t,n=void 0){if(n==null){this.default_vals[t]=e;return}this.styled_vals[t][n]=e}}class Nr{constructor(e,t,n,i){u(this,"name");u(this,"target_style");u(this,"fixed_parameters");u(this,"default_parameters");this.name=e,this.target_style=t,this.fixed_parameters=n,this.default_parameters=i}get_proxy_parameters(e){let t={},n=f(f(f({},this.target_style.parameter_prototype),this.default_parameters),e);for(let i in n)this.fixed_parameters[i]==null&&(t[i]=n[i]);return t}get_real_parameters(e){let t={},n=this.target_style.parameter_prototype;for(let i in n)if(this.fixed_parameters[i]!=null){let a=this.fixed_parameters[i];if(a.type=="function"){let o=new Function(`return ${a.val}`)();t[i]=o(e)}else t[i]=a}else e[i]==null?this.default_parameters[i]==null?t[i]=n[i]:t[i]=this.default_parameters[i]:t[i]=e[i];return t}makenode(){let e=this.target_style.makenode();return e.proxy_info.proxy_name=this.name,e.proxy_info.proxy_params=this.get_proxy_parameters(e.parameters),e.parameters=this.get_real_parameters(e.proxy_info.proxy_params),e}makehidden(){let e=this.target_style.makehidden();return e.proxy_info.proxy_name=this.name,e.proxy_info.proxy_params=this.get_proxy_parameters(e.parameters),e.parameters=this.get_real_parameters(e.proxy_info.proxy_params),e}get_styletype(){return this.target_style.type}get_stylename(){return this.target_style.name}}let xt=r=>l(de,E(f({},r),{sx:r.element.relation=="chaining"?{marginTop:"0"}:{}}));function vt({get_label:r=n=>c(n,"label"),appbar_extra:e=n=>l(y,{}),surrounder:t=n=>l(y,{children:n.children})}){return n=>{let i=n.element,a=n.editor,o=r(i);return l(xt,{element:i,children:v($,{force_direction:"column",children:[l(G,{children:l(Br,{sx:{overflow:"auto"},children:v($,{children:[l(Te,{children:o}),l(O,{editor:a,element:i}),l(se,{editor:a,element:i}),l(Ne,{editor:a,element:i}),l(Q,{editor:a,element:i}),l(U,{editor:a,element:i}),l(e,{editor:a,element:i})]})})}),l(ue,{}),l(ce,{autogrow:!0,children:l(t,{editor:a,element:i,children:n.children})})]})})}}function L({get_label:r=n=>c(n,"label"),rightbar_extra:e=n=>l(y,{}),surrounder:t=n=>l(y,{children:n.children})}){return n=>{let i=n.element,a=n.editor,o=r(i),s=e;return l(xt,{element:i,children:v(ut,{force_direction:"row",children:[l(ce,{autogrow:!0,children:l(t,{editor:a,element:i,children:n.children})}),l(G,{sx:{textAlign:"center"},children:v($,{children:[l(s,{editor:a,element:i}),l(Te,{variant:"overline",children:o}),v(Y,{close_on_otherclick:!0,button_class:ee,button_props:{size:"small",children:l(te,{fontSize:"small"})},title:"\u5C55\u5F00",children:[l(O,{editor:a,element:i}),l(se,{editor:a,element:i}),l(Ne,{editor:a,element:i}),l(U,{editor:a,element:i}),l(Q,{editor:a,element:i})]})]})})]})})}}function me({get_label:r=n=>c(n,"label"),surrounder:e=n=>l(w.Fragment,{children:n.children}),rightbar_extra:t=n=>l(y,{})}){return n=>{let i=n.element,a=n.editor,o=r(i),s=t;return l(de,{is_inline:!0,children:v($,{force_direction:"row",children:[l(ce,{children:l(e,{editor:a,element:i,children:n.children})}),l(G,{children:v($,{force_direction:"row",children:[l(s,{editor:a,element:i}),v(Y,{close_on_otherclick:!0,button_class:ee,button_props:{sx:{height:"1rem",width:"1rem",margin:"0"},children:l(te,{sx:{height:"1rem"}})},title:"\u5C55\u5F00"+(o?` / ${o}`:""),children:[l(W,{children:o}),l(O,{editor:a,element:i}),l(se,{editor:a,element:i}),l(U,{editor:a,element:i})]})]})})]})})}}function Pr(r){let e=r.element,t=r.editor,[n,i]=w.useState(!1),[a,o]=w.useState(!1),s=l(dt,{sx:{height:"5px"},variant:"outlined"});return l(G,{children:l(ct,{children:v(Ot.Provider,{value:"row",children:[r.children,v(I,{container:!0,spacing:2,children:[l(I,{item:!0,xs:6,children:l(le,{onMouseOver:()=>i(!0),onMouseOut:()=>i(!1),children:(()=>n?l(ze,{title:"\u5411\u4E0A\u6DFB\u52A0\u6BB5\u843D",children:l(We,{onClick:m=>{t.add_nodes_before(Oe(),e)},size:"small",variant:"outlined",fullWidth:!0,children:l(Ut,{fontSize:"small"})})}):s)()})}),l(I,{item:!0,xs:6,children:l(le,{onMouseOver:()=>o(!0),onMouseOut:()=>o(!1),children:(()=>a?l(ze,{title:"\u5411\u4E0B\u6DFB\u52A0\u6BB5\u843D",children:l(We,{onClick:m=>{t.add_nodes_after(Oe(),e)},size:"small",variant:"outlined",fullWidth:!0,children:l(Vt,{fontSize:"small"})})}):s)()})})]})]})})})}function bt({get_title:r=e=>c(e,"title")}){return e=>{let t=e.editor,n=e.element,i=r(n);return l(G,{children:l(ct,{children:v(ue,{children:[l(dt,{variant:"outlined",children:v($,{force_direction:"row",children:[l(W,{children:i}),v(Y,{close_on_otherclick:!0,button_class:ee,button_props:{size:"small",children:l(te,{fontSize:"small"})},title:"\u5C55\u5F00",children:[l(O,{editor:e.editor,element:e.element}),l(Q,{editor:t,element:n}),l(U,{editor:t,element:n})]})]})}),e.children]})})})}}function Mr({get_label:r=n=>c(n,"label"),is_empty:e=n=>!!c(n,"url"),render_element:t=n=>l("img",{src:c(n.element,"url")})}){return n=>{let i=n.editor,a=n.element,o=r(a),s=t;return v(de,{is_inline:!0,children:[n.children,l(G,{children:v($,{force_direction:"row",children:[e(a)?l(s,{element:a}):o,v(Y,{close_on_otherclick:!0,button_class:ee,button_props:{sx:{height:"1rem",width:"1rem",margin:"0"},children:l(te,{sx:{height:"1rem"}})},title:"\u5C55\u5F00"+(o?` / ${o}`:""),children:[l(W,{children:o}),l(O,{editor:i,element:a}),l(Q,{editor:i,element:a}),l(U,{editor:i,element:a})]})]})})]})}}function Rr(r){return l(Ht,{children:r.children})}let Ir=r=>l(de,E(f({},r),{sx:r.element.relation=="chaining"?{marginTop:"0"}:{}}));function jr({get_label:r=i=>c(i,"label"),get_widths:e=(i,a)=>[],rightbar_extra:t=i=>l(y,{}),surrounder:n=i=>l(y,{children:i.children})}){return i=>{let a=i.element,o=i.editor,s=r(a),m=t,b=n,_=a.children,d=e(a.num_children,a);for(d=d.splice(0,_.length);d.length<_.length;)d.push(1);let h=d.reduce((g,F)=>g+F,0),[x,p]=w.useState(a.num_children);return w.useEffect(()=>{o.add_delay_operation(`${a.idx}-struct`,()=>{o.set_node(a,{num_children:x})})}),l(Ir,{element:a,children:v($,{force_direction:"row",children:[l(I,{container:!0,columns:h,sx:{width:"100%"},children:d.map((g,F)=>l(I,{item:!0,xs:g,sx:{borderRight:F==_.length-1?"none":"1px solid"},children:l(ce,{autogrow:!0,children:l(b,{editor:o,element:a,children:i.children[F]})})},F))}),l(G,{children:v(ut,{children:[l(Te,{variant:"overline",children:s}),l(m,{editor:o,element:a}),v(Y,{close_on_otherclick:!0,button_class:ee,button_props:{size:"small",children:l(te,{fontSize:"small"})},title:"\u5C55\u5F00",onClose:()=>{o.apply_delay_operations()},children:[l(O,{editor:o,element:a}),l(se,{editor:o,element:a}),l(Ne,{editor:o,element:a}),l(U,{editor:o,element:a}),l(Q,{editor:o,element:a}),l(ht,{sx:{width:"5rem"},type:"number",label:"number of children",defaultValue:a.num_children,onChange:g=>{p(parseInt(g.target.value))}})]})]})})]})})}}class _e{constructor(e,t,n){u(this,"env_key");u(this,"context_key");u(this,"_default_val");this.env_key=e,this.context_key=t,this._default_val=n}enter_effect(e,t,n){return[t,{}]}exit_effect(e,t,n){return[t,n]}ensure_env(e){return e[this.env_key]==null&&(e[this.env_key]=this._default_val),e}get_env(e){return e=this.ensure_env(e),e[this.env_key]}set_env(e,t){return e=this.ensure_env(e),e[this.env_key]=t,e}check_context(e){return e[this.context_key]!=null}get_context(e){return e[this.context_key]}set_context(e,t){return e[this.context_key]=t,e}make_context(e){return{[this.context_key]:e}}fuse_result(e,t){let[n,i]=e,[a,o]=t;return[a,f(f({},i),o)]}enter_fuse(e,t,n){return this.fuse_result([t,n],this.enter_effect(e,t,n))}exit_fuse(e,t,n){return this.fuse_result([t,n],this.exit_effect(e,t,n))}}class pe extends _e{constructor(e,t,n=(i,a,o)=>!1){t==null&&(t=e);super(e,t,[0]);u(this,"clear_order");this.clear_order=n}enter_effect(e,t,n){t=this.ensure_env(t);let i=[...this.get_env(t)];this.clear_order(e,t)&&(i[i.length-1]=0),i[i.length-1]++;let a=[...i,0];return[this.set_env(t,a),this.make_context(i)]}exit_effect(e,t,n){let i=this.get_env(t);return i=i.slice(0,i.length-1),[this.set_env(t,i),n]}}class yt extends _e{constructor(e,t,n,i){super(e,t,{pre:[],suf:[]});u(this,"pre_inject");u(this,"suf_inject");this.pre_inject=n||(a=>l(y,{})),this.suf_inject=i||(a=>l(y,{}))}enter_effect(e,t,n){let i=this.pre_inject,a=this.suf_inject,o=this.get_env(t);return t=this.set_env(t,{pre:[...o.pre,l(i,{element:e,context:n})],suf:[...o.suf,l(a,{element:e,context:n})]}),[t,n]}exit_effect(e,t,n){return[t,n]}}class Gr extends _e{constructor(e,t){super(e,t,{pre:[],suf:[]})}enter_effect(e,t,n){let i=this.get_env(t);return t=this.set_env(t,{pre:[],suf:[]}),[t,this.make_context(i)]}}class Re extends _e{constructor(e,t,n={}){t==null&&(t=e);super(e,t,[void 0,n]);u(this,"information");this.information=n}enter_effect(e,t,n){return n=this.set_context(n,this.get_env(t)),t=this.set_env(t,[void 0,{}]),[t,n]}exit_effect(e,t,n){return t=this.set_env(t,[e,this.information]),[t,n]}}function wt(r={}){return e=>{let t=e.element,n=!1;(t.type=="struct"||t.type=="group")&&(n=t.relation=="chaining");let i={marginTop:a=>ft(a.printer.margins.special,.5)};return r.small_margin&&(i={}),l(q,E(f({sx:n?i:{}},r),{children:e.children}))}}function T({small_margin_enter:r=!1,small_margin_exit:e=!1,extra_effectors:t=[],inject_pre:n=s=>l(y,{}),inject_suf:i=s=>l(y,{}),outer:a=void 0,inner:o=s=>l(y,{children:s.children})}){let s=a||wt({small_margin:r}),m=o,b=new yt("global-injector","global-injector",n,i),_=new Re("global-brother","global-brother",{small_margin:e});return{render_func:d=>{let h=d.element;return l(s,{element:h,context:d.context,children:l(m,{element:h,context:d.context,children:d.children})})},enter_effect:(d,h)=>{let x=[h,{}];for(let p of t)x=p(d).enter_fuse(d,x[0],x[1]);return x=b.enter_fuse(d,x[0],x[1]),x=_.enter_fuse(d,x[0],x[1]),x},exit_effect:(d,h,x)=>{let p=[h,x];for(let g of t)p=g(d).exit_fuse(d,p[0],p[1]);return p=b.exit_fuse(d,p[0],p[1]),p=_.exit_fuse(d,p[0],p[1]),p}}}function Lr({small_margin_enter:r=!1,small_margin_exit:e=!1,get_widths:t=m=>[],extra_effectors:n=[],inject_pre:i=m=>l(y,{}),inject_suf:a=m=>l(y,{}),outer:o=void 0,inner:s=m=>l(y,{children:m.children})}){let m=o||wt({small_margin:r}),b=s,_=new yt("global-injector","global-injector",i,a),d=new Re("global-brother","global-brother",{small_margin:e});return{render_func:h=>{let x=h.element,p=h.children,g=t(x);for(g=g.splice(0,p.length);g.length<p.length;)g.push(1);let F=g.reduce((M,C)=>M+C,0);return l(m,{element:x,context:h.context,children:l(I,{container:!0,columns:F,children:g.map((M,C)=>l(I,{item:!0,xs:M,sx:{align:"center"},children:l(b,{element:x,context:h.context,children:h.children[C]})},C))})})},enter_effect:(h,x)=>{let p=[x,{}];for(let g of n)p=g(h).enter_fuse(h,p[0],p[1]);return p=_.enter_fuse(h,p[0],p[1]),p=d.enter_fuse(h,p[0],p[1]),p},exit_effect:(h,x,p)=>{let g=[x,p];for(let F of n)g=F(h).exit_fuse(h,g[0],g[1]);return g=_.exit_fuse(h,g[0],g[1]),g=d.exit_fuse(h,g[0],g[1]),g}}}function zr(){let r=new Gr("global-injector","global-injector"),e=new Re("global-brother","global-brother");return{render_func:t=>{let n=t.context;if(!(r.check_context(n)&&e.get_context(n)))return l(Se,{});let i=r.get_context(n),[a,o]=e.get_context(n)||[void 0,void 0],s=o&&o.small_margin,m=a!=null&&(a.type=="group"||a.type=="struct");return v(Se,{sx:m?{marginTop:s?_=>_.printer.margins.paragraph:_=>_.printer.margins.special}:{},children:[Object.keys(i.pre).map(_=>l(w.Fragment,{children:i.pre[_]},_)),t.children,Object.keys(i.suf).map(_=>l(w.Fragment,{children:i.suf[_]},_)),l("br",{})]})},enter_effect:(t,n)=>{let i=[n,{}];return i=r.enter_fuse(t,i[0],i[1]),i=e.enter_fuse(t,i[0],i[1]),i},exit_effect:(t,n,i)=>{let a=[n,i];return a=r.exit_fuse(t,a[0],a[1]),a=e.exit_fuse(t,a[0],a[1]),a}}}function re({extra_effectors:r=[],outer:e=t=>l("span",{children:t.children})}){let t=e;return{render_func:n=>{let i=n.element;return l(t,{element:i,context:n.context,children:n.children})},enter_effect:(n,i)=>{let a=[i,{}];for(let o of r)a=o(n).enter_fuse(n,a[0],a[1]);return a},exit_effect:(n,i,a)=>{let o=[i,a];for(let s of r)o=s(n).exit_fuse(n,o[0],o[1]);return o}}}function Ie(r){let e=["\u3007","\u4E00","\u4E8C","\u4E09","\u56DB","\u4E94","\u516D","\u4E03","\u516B","\u4E5D"];return`${r}`.split("").map(t=>e[Number(t)]).join("")}const Wr="modulepreload",Ve={},Or="/",Ur=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${Or}${n}`,n in Ve)return;Ve[n]=!0;const i=n.endsWith(".css"),a=i?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${a}`))return;const o=document.createElement("link");if(o.rel=i?"stylesheet":Wr,i||(o.as="script",o.crossOrigin=""),o.href=n,document.head.appendChild(o),i)return new Promise((s,m)=>{o.addEventListener("load",s),o.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())};let St="_MATHJAX_INLINE_START",Ft="_MATHJAX_INLINE_END",Et="_MATHJAX_BLOCK_START",$t="_MATHJAX_BLOCK_END";var Vr=new Jt(()=>{let r=window.MathJax;r!=null&&r.typesetPromise!=null&&r.typesetPromise()},3e3);function kt(){Vr.go()}function In(r){return w.useEffect(()=>{let e=ae(`
            
            <script defer>
                MathJax = {
                    tex: {
                        inlineMath: [["${St}", "${Ft}"]] , 
                        displayMath: [["${Et}", "${$t}"]] , 
                    },
                    svg: {
                        fontCache: "global" , 
                        scale: 0.9 , 
                    } , 
                    ignoreHtmlClass: "mathjax_ignore" , 
                    processHtmlClass: "mathjax_process" , 
                    preRemoveClass: "mathjax_preview" , 
                }
            <\/script>
        `);return Ur(()=>import("./tex-svg.89c94f6f.js"),[]),ae("head").append(e),()=>{e.remove()}},[]),l(w.Fragment,{children:r.children})}function Hr(r){return w.useEffect(()=>{kt()},[r.children]),v("span",{className:"mathjax_process",children:[St,r.children,Ft]})}function Jr(r){return w.useEffect(()=>{kt()},[r.children]),v("div",{className:"mathjax_process",children:[Et,r.children,$t]})}var Xr=(()=>T({outer:e=>{let t=c(e.element,"title");return v(q,{children:[l(q,{subtitle_like:!0,children:t}),e.children]})}}))(),Kr=(()=>{let r=t=>new pe(`order/${c(t,"title")}`,`order/${c(t,"title")}`);return T({extra_effectors:[r],inject_pre:t=>{let n=r(t.element).get_context(t.context),i=Ie(n[n.length-1]),a=c(t.element,"title"),o=c(t.element,"prefix"),s=c(t.element,"ordering");return v(B,{inline:!0,children:[a,s?" "+i:"",o?` (${o})`:""]})},outer:t=>l(q,{subtitle_like:!0,children:t.children})})})(),Zr=(()=>{let r=t=>new pe("order/normal","order/normal");return T({extra_effectors:[r],inject_pre:t=>{let n=r(t.element).get_context(t.context),i=c(t.element,"ordering"),a=c(t.element,"prefix");return v(B,{inline:!0,children:[i?`[${n}] `:"",a]})},inject_suf:t=>{let n=c(t.element,"suffix");return l(B,{inline:!0,leftmargin:!0,children:n})},outer:t=>l(q,{children:t.children})})})(),qr=(()=>T({inner:r=>{let e=c(r.element,"title"),t=c(r.element,"close");return v($,{force_direction:"column",children:[e?l(B,{children:e}):l(y,{}),l(Xt,{children:l(Kt,{children:r.children})}),t?l(B,{children:t}):l(y,{})]})}}))(),Qr=(()=>T({inner:r=>{let e=c(r.element,"title"),t=c(r.element,"close");return v($,{force_direction:"column",children:[e?l(B,{children:e}):l(y,{}),l(mt,{align:"center",children:r.children}),t?l(B,{align:"right",children:t}):l(y,{})]})}}))(),Yr=(()=>T({inner:r=>l("pre",{children:r.children})}))(),en=(()=>T({inner:r=>l($,{force_direction:"column",children:l(mt,{sx:{fontSize:e=>ft(e.printer.typography.structure.fontSize,2)},children:r.children})})}))(),tn=(()=>{let r=new pe("order/section","order/section");return{render_func:e=>{let t=r.get_context(e.context),n=e.element,i=c(n,"title"),o=c(n,"alone")?l(y,{}):v(B,{inline:!0,children:["\u7B2C",Ie(t),"\u8282"]});return v(ue,{children:[o,i?l(B,{inline:!0,sx:{marginRight:0},children:i}):l(y,{})]})},enter_effect:(e,t)=>{let n=[t,{}];return n=r.enter_fuse(e,n[0],n[1]),n},exit_effect:(e,t,n)=>{let i=[t,n];return i=r.exit_fuse(e,i[0],i[1]),i}}})(),rn=(()=>qt(r=>l(ue,{})))(),nn=(()=>re({outer:r=>l("strong",{children:r.children})}))(),ln=(()=>Lr({small_margin_enter:!0,small_margin_exit:!0,get_widths:r=>c(r,"widths").split(",").map(e=>e==""?1:parseInt(e))}))(),an=(()=>re({outer:r=>l("del",{children:r.children})}))(),on=(()=>re({outer:r=>l(le,{component:"span",sx:{paddingX:"0.1rem"},children:l(Hr,{children:_t.string(r.element)})})}))(),sn=(()=>T({inner:r=>{let e=_t.string(r.element),t=c(r.element,"suffix"),n=c(r.element,"close"),i=c(r.element,"environ"),a=i?`\\begin{${i}}`:"",o=i?`\\end{${i}}`:"";return e=`${a}${e}\\text{${t}}${o}`,v(w.Fragment,{children:[r.context.anchor,l(Jr,{children:e}),n]})}}))(),un=(()=>re({outer:r=>{let e=c(r.element,"type"),t=c(r.element,"target"),[n,i]=w.useState("");w.useEffect(()=>{(async()=>{if(e=="internal"){let s=await Pe.get.resource_info(t);s.url?i(pt(s.url)):i("")}else i(t)})()});let a=c(r.element,"width"),o=c(r.element,"height");return l("img",{src:n||void 0,style:{width:a>0?`${a}rem`:"100%",height:o>0?`${o}rem`:"100%"}})}}))(),cn=(()=>re({outer:r=>{let e=c(r.element,"target"),t=c(r.element,"type");if(t=="index"){let n=Number(e);return l(Qt.Consumer,{children:i=>l(we,{component:"button",onClick:a=>i.printer_component.scroll_to(Yt(i.root,n)),children:l(W,{children:r.children})})})}if(t=="http")return l(we,{href:e,children:r.children});if(t=="outer-index"){let[n,i]=e.split(":"),[a,o]=[Number(n),Number(i)],[s,m]=w.useState(void 0);j.exports.useEffect(()=>{Pe.get.content(a).then(h=>{m(h)})},[]);let b=(h,x)=>{if(tr(h)&&h.idx==x)return h;if(rr(h))for(let p of h.children){let g=b(p,x);if(g!=null)return g}};if(s==null)return l(y,{});let _=b(s,o),d=c(_,"label");return l(we,{href:er.view.content(a,{linkto:o}),children:d})}}}))(),dn=(()=>{let r=e=>new pe(`order/${c(e,"label")}`,`order/${c(e,"label")}`,t=>t.relation=="separating");return T({small_margin_enter:!0,extra_effectors:[r],inner:e=>{let t=r(e.element).get_context(e.context),n=c(e.element,"ordering");return l(w.Fragment,{children:v($,{force_direction:"row",children:[l(Zt,{children:n?l(Se,{children:Ie(t)}):l(y,{})}),l(le,{children:e.children})]})})}})})(),hn=zr(),fn=Rr,mn=vt({}),_n=vt({get_label:r=>`\u6B21\u8282\uFF1A${c(r,"title")}`}),pn=L({}),gn=L({}),xn=L({}),vn=L({}),bn=L({}),yn=L({rightbar_extra:r=>{let e={variant:"standard",sx:{width:"2rem",marginBottom:"0.5rem",hright:"1rem"}},t=l(W,{sx:{fontSize:"0.7rem"},children:"extra"}),n=c(r.element,"exit");return l(w.Fragment,{children:l(ht,E(f({},e),{label:t,defaultValue:n,onChange:i=>{let a=i.target.value,o=r.element;r.editor.auto_set_parameter(o,{exit:{type:"string",val:a}})}}))})}});let wn=L({});var Sn=Pr,Fn=bt({get_title:r=>c(r,"title")}),En=bt({get_title:()=>"\u7AE0\u8282"}),$n=me({}),kn=me({surrounder:r=>l("del",{children:r.children})}),Cn=me({surrounder:r=>l("u",{children:r.children})}),An=me({surrounder:r=>l(y,{children:r.children})}),Bn=Mr({get_label:()=>"\u56FE\u7247",is_empty:r=>!!c(r,"target"),render_element:r=>{let[e,t]=w.useState(""),n=c(r.element,"target"),i=c(r.element,"type");w.useEffect(()=>{(async()=>{if(i=="internal"){let s=await Pe.get.resource_info(n);s.url?t(pt(s.url)):t("")}else t(n)})()});let a=c(r.element,"width"),o=c(r.element,"height");return l("img",{src:e||void 0,style:{width:a>0?`${a}rem`:"100%",height:o>0?`${o}rem`:"100%"}})}}),Dn=jr({get_label:r=>c(r,"label"),get_widths:(r,e)=>c(e,"widths").split(",").map(t=>t==""?1:parseInt(t))});function S(r){return Object.keys(r).reduce((e,t)=>E(f({},e),{[t]:{type:typeof r[t],val:r[t]}}),{})}var V={label:"\u663E\u793A\u7684\u540D\u79F0"},N={prefix:"",suffix:"",title:"",close:"",ordering:!0},P=E(f({},V),{prefix:"\u6587\u672C\u524D\u7F00",suffix:"\u6587\u672C\u540E\u7F00",title:"\u5165",close:"\u51FA",ordering:"\uFF08true / false\uFF09\u662F\u5426\u5F00\u542F\u7F16\u53F7"}),He=new D("\u662D\u8A00",S(f({label:"\u662D\u8A00"},N)),f({},P)),Je=new D("\u5E38\u8A00",S(f({label:"\u5E38\u8A00"},N)),f({},P)),Xe=new D("\u968F\u8A00",S(f({label:"\u968F\u8A00"},N)),f({},P));let Ke=new D("\u5C5E\u8A00",S(f({label:"\u5C5E\u8A00"},N)),f({},P));var Ze=new Dr("\u9F50\u8A00",S(E(f({label:"\u9F50\u8A00"},N),{widths:"1"})),E(f({},P),{widths:"\uFF08\u76F8\u5BF9\uFF09\u5BBD\u5EA6\u5217\u8868\uFF0C\u7528\u9017\u53F7\u5206\u9694"})),qe=new Tr("\u7A46\u8A00",{},{}),Qe=new D("\u6570\u5B66\u8A00",S(E(f({label:"\u6570\u5B66"},N),{environ:"align"})),f({},P)),Ye=new D("\u88F1\u793A",S(f({label:"\u88F1\u793A"},N)),f({},P)),et=new D("\u5F70\u793A",S(f({label:"\u5F70\u793A"},N)),f({},P)),tt=new D("\u683C\u793A",S(f({label:"\u683C\u793A"},N)),f({},P)),rt=new he("\u5F3A\u8C03",S({label:"\u5F3A\u8C03"}),f({},V)),nt=new he("\u520A\u8C03",S({label:"\u520A\u8C03"}),f({},V));let it=new he("\u94FE\u8C03",E(f({},S({label:"\u94FE\u63A5",target:""})),{type:{val:"index",type:"choice",choices:["index","outer-index","http"]}}),E(f({},V),{target:"\u5982\u4F55\u67E5\u627E\u76EE\u6807",type:"\u76EE\u6807\u683C\u5F0F\uFF08 index / outer-index / http \uFF09"}));var lt=new fe("\u56FE\u8C03",E(f({},S({label:"\u56FE\u7247",target:"",width:10,height:-1})),{type:{val:"internal",type:"choice",choices:["internal","http"]}}),E(f({},V),{target:"\u5982\u4F55\u67E5\u627E\u76EE\u6807",type:"\u76EE\u6807\u683C\u5F0F\uFF08 internal / http \uFF09",width:"\u56FE\u7247\u5BBD\u5EA6\uFF08rem\uFF09",height:"\u56FE\u7247\u9AD8\u5EA6\uFF08rem\uFF09"}),{forceInline:!0}),at=new he("\u6570\u5B66\u8C03",S({label:"\u6570\u5B66"}),f({},V)),J=new fe("\u65B0\u6BB5",S({})),X=new D("\u6B21\u8282",S({title:""})),K=new fe("\u5C0F\u8282\u7EBF",S({title:"",alone:!1})),Z=new fe("\u7AE0\u8282\u7EBF",S({})),A={[He.name]:[He,mn,Kr],[Xe.name]:[Xe,xn,qr],[Ye.name]:[Ye,vn,Qr],[et.name]:[et,bn,en],[qe.name]:[qe,void 0,void 0],[J.name]:[J,Sn,void 0],[K.name]:[K,Fn,tn],[Z.name]:[Z,En,rn],[rt.name]:[rt,$n,nn],[Je.name]:[Je,pn,Zr],[Ze.name]:[Ze,Dn,ln],[lt.name]:[lt,Bn,un],[nt.name]:[nt,kn,an],[it.name]:[it,Cn,cn],[Ke.name]:[Ke,wn,dn],[at.name]:[at,An,on],[Qe.name]:[Qe,yn,sn],[tt.name]:[tt,gn,Yr],[X.name]:[X,_n,Xr]};function jn(r){for(let e in A){let t=A[e][0];r.add_style(t)}return r}function Gn(r){for(let e in A){let t=A[e][0];if(t.type=="abstract")continue;let n=A[e][2];r.set(n,t.type,t.name)}return r.set(hn,"paragraph"),r}function Ln(r){for(let e in A){let t=A[e][0];if(t.type=="abstract")continue;let n=A[e][1];r.set(n,t.type,t.name)}return r.set(fn,"paragraph"),r}function zn(r){return r.support[J.name]=ie(J.name,J.name,{},{}),r.support[K.name]=ie(K.name,K.name,{},{}),r.support[Z.name]=ie(Z.name,Z.name,{},{}),r.group[X.name]=ie(X.name,X.name,{},{}),r}function ie(r,e,t,n){let[i,a,o]=A[r];return new Nr(e,i,t,n)}function Wn(r,e){ae(document).ready(()=>{let t=ae(`#yconcept-${e}`);if(!t)return;t[0].scrollIntoView({behavior:"smooth",block:"center"});let n=t.next();!n||n.css({border:"2px solid #999944"})})}const On={palette:{divider:"#00000077",primary:{main:"#111111"}},printer:{margins:{paragraph:"0.4rem",special:"1.0rem",colon:"1rem",level:"2rem"},typography:{body:{fontFamily:"STXihei"},title:{fontFamily:"SimHei"},structure:{fontFamily:"SimHei"},display:{fontFamily:"KaiTi"},weaken:{fontFamily:"FangSong"}}}};export{Mn as E,we as L,In as M,Rn as S,Ln as a,Gn as b,zn as c,ie as d,Z as e,Wn as l,On as m,Ie as n,K as s,jn as w};
