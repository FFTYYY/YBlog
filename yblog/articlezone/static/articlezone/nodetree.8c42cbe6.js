var on=Object.defineProperty;var sn=(t,e,r)=>e in t?on(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var Fe=(t,e,r)=>(sn(t,typeof e!="symbol"?e+"":e,r),r);import{r as f,l as an,b as le,j as S,R as Ue,a as qe,B as He,I as nt,d as cn,N as ln,u as un,F as dn,A as fn}from"./titleword.c58b97da.js";import{g as nr,a as or,s as vt,_ as ue,b as ir,Q as pn,e as sr,i as yt,f as ze,r as hn,F as gn,u as mn,z as Pe,I as Dt,J as St,q as k,A as bt,y as Ye,D as vn,C as ar,B as Oe,S as yn,L as Dn,U as Lt}from"./Link.94b50c03.js";import{_ as Sn,T as cr,s as Te,u as xt,d as bn,a as lr,b as We}from"./TransitionGroupContext.720fb084.js";import{B as xn,u as Cn,c as Ve,I as Tn}from"./useFormControl.2141ee90.js";import{S as In}from"./Save.d2923c96.js";let $t=0;function En(t){const[e,r]=f.exports.useState(t),o=t||e;return f.exports.useEffect(()=>{e==null&&($t+=1,r(`mui-${$t}`))},[e]),o}const At=an["useId"];function On(t){if(At!==void 0){const e=At();return t!=null?t:e}return En(t)}function Ft({controlled:t,default:e,name:r,state:o="value"}){const{current:n}=f.exports.useRef(t!==void 0),[i,s]=f.exports.useState(e),c=n?t:i,u=f.exports.useCallback(d=>{n||s(d)},[]);return[c,u]}function wn(t){return nr("PrivateSwitchBase",t)}or("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const Nn=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],_n=t=>{const{classes:e,checked:r,disabled:o,edge:n}=t,i={root:["root",r&&"checked",o&&"disabled",n&&`edge${yt(n)}`],input:["input"]};return ze(i,wn,e)},Pn=vt(xn)(({ownerState:t})=>ue({padding:9,borderRadius:"50%"},t.edge==="start"&&{marginLeft:t.size==="small"?-3:-12},t.edge==="end"&&{marginRight:t.size==="small"?-3:-12})),Rn=vt("input")({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),Mn=f.exports.forwardRef(function(e,r){const{autoFocus:o,checked:n,checkedIcon:i,className:s,defaultChecked:c,disabled:u,disableFocusRipple:d=!1,edge:g=!1,icon:D,id:y,inputProps:p,inputRef:C,name:m,onBlur:v,onChange:w,onFocus:_,readOnly:b,required:B,tabIndex:L,type:$,value:A}=e,ae=ir(e,Nn),[ce,q]=pn({controlled:n,default:Boolean(c),name:"SwitchBase",state:"checked"}),j=Cn(),oe=F=>{_&&_(F),j&&j.onFocus&&j.onFocus(F)},K=F=>{v&&v(F),j&&j.onBlur&&j.onBlur(F)},W=F=>{if(F.nativeEvent.defaultPrevented)return;const X=F.target.checked;q(X),w&&w(F,X)};let V=u;j&&typeof V=="undefined"&&(V=j.disabled);const E=$==="checkbox"||$==="radio",U=ue({},e,{checked:ce,disabled:V,disableFocusRipple:d,edge:g}),N=_n(U);return le(Pn,ue({component:"span",className:sr(N.root,s),centerRipple:!0,focusRipple:!d,disabled:V,tabIndex:null,role:void 0,onFocus:oe,onBlur:K,ownerState:U,ref:r},ae,{children:[S(Rn,ue({autoFocus:o,checked:n,defaultChecked:c,className:N.input,disabled:V,id:E&&y,name:m,onChange:W,readOnly:b,ref:C,required:B,ownerState:U,tabIndex:L,type:$},$==="checkbox"&&A===void 0?{}:{value:A},p)),ce?i:D]}))});var kn=Mn,Ln=Ve(S("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),$n=Ve(S("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),An=Ve(S("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function Fn(t){return nr("MuiCheckbox",t)}const Hn=or("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary"]);var ot=Hn;const Un=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],Bn=t=>{const{classes:e,indeterminate:r,color:o}=t,n={root:["root",r&&"indeterminate",`color${yt(o)}`]},i=ze(n,Fn,e);return ue({},e,i)},jn=vt(kn,{shouldForwardProp:t=>hn(t)||t==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,r.indeterminate&&e.indeterminate,r.color!=="default"&&e[`color${yt(r.color)}`]]}})(({theme:t,ownerState:e})=>ue({color:(t.vars||t).palette.text.secondary},!e.disableRipple&&{"&:hover":{backgroundColor:t.vars?`rgba(${e.color==="default"?t.vars.palette.action.activeChannel:t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.hoverOpacity})`:gn(e.color==="default"?t.palette.action.active:t.palette[e.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},e.color!=="default"&&{[`&.${ot.checked}, &.${ot.indeterminate}`]:{color:(t.vars||t).palette[e.color].main},[`&.${ot.disabled}`]:{color:(t.vars||t).palette.action.disabled}})),zn=S($n,{}),Vn=S(Ln,{}),Gn=S(An,{}),qn=f.exports.forwardRef(function(e,r){var o,n;const i=mn({props:e,name:"MuiCheckbox"}),{checkedIcon:s=zn,color:c="primary",icon:u=Vn,indeterminate:d=!1,indeterminateIcon:g=Gn,inputProps:D,size:y="medium",className:p}=i,C=ir(i,Un),m=d?g:u,v=d?g:s,w=ue({},i,{color:c,indeterminate:d,size:y}),_=Bn(w);return S(jn,ue({type:"checkbox",inputProps:ue({"data-indeterminate":d},D),icon:f.exports.cloneElement(m,{fontSize:(o=m.props.fontSize)!=null?o:y}),checkedIcon:f.exports.cloneElement(v,{fontSize:(n=v.props.fontSize)!=null?n:y}),ownerState:w,ref:r,className:sr(_.root,p)},C,{classes:_}))});var Wn=qn;function Kn(t){function e(r,o){o[r.my_id]=r;for(let n of r.sons)e(n,o);return o}return e(t,{})}function Xn(t,e=-1){if(t.sort((o,n)=>o[2]<n[2]?1:0),e>0){let o=t.filter(n=>n[0]==e)[0];o[1]=-1}let r=o=>Object.values(t.filter(n=>n[1]==o)).map(n=>({my_id:n[0],father_id:o,sons:r(n[0]),secret:n[3]}));return{my_id:-1,father_id:-1,sons:r(-1),secret:!0}}function Yn(t){let e=(r,o)=>{let n=[[r.my_id,r.father_id,o,r.secret]];r.my_id<0&&(n=[]);for(let i in r.sons){let s=parseInt(i);n=[...n,...e(r.sons[s],s)]}return n};return e(t,-1)}class Ct{constructor(e,r){Fe(this,"root_id");Fe(this,"nodetree");Fe(this,"_id2node");e!=null&&this.update_rawinfo(e,r)}deepcopy(){return new Ct(this.get_raw(),this.root_id)}update_nodetree(e){return this.nodetree=e,this._id2node=Kn(e),this}update_rawinfo(e,r){this.root_id=r;let o=Xn(e,r);return this.update_nodetree(o),this}id2node(e){return this._id2node[e]}get_raw(){return Yn(this.nodetree)}get_root(){return this.nodetree}is_son(e,r){for(;r=this.id2node(r).father_id,r!=-1;)if(r==e)return!0;return!1}}var Jn=Ve(S("path",{d:"M10 6 8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"ChevronRight"),Qn=Ve(S("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),Ht={disabled:!1},Zn=function(e){return e.scrollTop},Be="unmounted",be="exited",xe="entering",_e="entered",dt="exiting",de=function(t){Sn(e,t);function e(o,n){var i;i=t.call(this,o,n)||this;var s=n,c=s&&!s.isMounting?o.enter:o.appear,u;return i.appearStatus=null,o.in?c?(u=be,i.appearStatus=xe):u=_e:o.unmountOnExit||o.mountOnEnter?u=Be:u=be,i.state={status:u},i.nextCallback=null,i}e.getDerivedStateFromProps=function(n,i){var s=n.in;return s&&i.status===Be?{status:be}:null};var r=e.prototype;return r.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},r.componentDidUpdate=function(n){var i=null;if(n!==this.props){var s=this.state.status;this.props.in?s!==xe&&s!==_e&&(i=xe):(s===xe||s===_e)&&(i=dt)}this.updateStatus(!1,i)},r.componentWillUnmount=function(){this.cancelNextCallback()},r.getTimeouts=function(){var n=this.props.timeout,i,s,c;return i=s=c=n,n!=null&&typeof n!="number"&&(i=n.exit,s=n.enter,c=n.appear!==void 0?n.appear:s),{exit:i,enter:s,appear:c}},r.updateStatus=function(n,i){if(n===void 0&&(n=!1),i!==null)if(this.cancelNextCallback(),i===xe){if(this.props.unmountOnExit||this.props.mountOnEnter){var s=this.props.nodeRef?this.props.nodeRef.current:Ue.findDOMNode(this);s&&Zn(s)}this.performEnter(n)}else this.performExit();else this.props.unmountOnExit&&this.state.status===be&&this.setState({status:Be})},r.performEnter=function(n){var i=this,s=this.props.enter,c=this.context?this.context.isMounting:n,u=this.props.nodeRef?[c]:[Ue.findDOMNode(this),c],d=u[0],g=u[1],D=this.getTimeouts(),y=c?D.appear:D.enter;if(!n&&!s||Ht.disabled){this.safeSetState({status:_e},function(){i.props.onEntered(d)});return}this.props.onEnter(d,g),this.safeSetState({status:xe},function(){i.props.onEntering(d,g),i.onTransitionEnd(y,function(){i.safeSetState({status:_e},function(){i.props.onEntered(d,g)})})})},r.performExit=function(){var n=this,i=this.props.exit,s=this.getTimeouts(),c=this.props.nodeRef?void 0:Ue.findDOMNode(this);if(!i||Ht.disabled){this.safeSetState({status:be},function(){n.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:dt},function(){n.props.onExiting(c),n.onTransitionEnd(s.exit,function(){n.safeSetState({status:be},function(){n.props.onExited(c)})})})},r.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},r.safeSetState=function(n,i){i=this.setNextCallback(i),this.setState(n,i)},r.setNextCallback=function(n){var i=this,s=!0;return this.nextCallback=function(c){s&&(s=!1,i.nextCallback=null,n(c))},this.nextCallback.cancel=function(){s=!1},this.nextCallback},r.onTransitionEnd=function(n,i){this.setNextCallback(i);var s=this.props.nodeRef?this.props.nodeRef.current:Ue.findDOMNode(this),c=n==null&&!this.props.addEndListener;if(!s||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[s,this.nextCallback],d=u[0],g=u[1];this.props.addEndListener(d,g)}n!=null&&setTimeout(this.nextCallback,n)},r.render=function(){var n=this.state.status;if(n===Be)return null;var i=this.props,s=i.children;i.in,i.mountOnEnter,i.unmountOnExit,i.appear,i.enter,i.exit,i.timeout,i.addEndListener,i.onEnter,i.onEntering,i.onEntered,i.onExit,i.onExiting,i.onExited,i.nodeRef;var c=Pe(i,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return qe.createElement(cr.Provider,{value:null},typeof s=="function"?s(n,c):qe.cloneElement(qe.Children.only(s),c))},e}(qe.Component);de.contextType=cr;de.propTypes={};function we(){}de.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:we,onEntering:we,onEntered:we,onExit:we,onExiting:we,onExited:we};de.UNMOUNTED=Be;de.EXITED=be;de.ENTERING=xe;de.ENTERED=_e;de.EXITING=dt;var eo=de;function Ut(t,e){var r,o;const{timeout:n,easing:i,style:s={}}=t;return{duration:(r=s.transitionDuration)!=null?r:typeof n=="number"?n:n[e.mode]||0,easing:(o=s.transitionTimingFunction)!=null?o:typeof i=="object"?i[e.mode]:i,delay:s.transitionDelay}}function to(t){return Dt("MuiCollapse",t)}St("MuiCollapse",["root","horizontal","vertical","entered","hidden","wrapper","wrapperInner"]);const ro=["addEndListener","children","className","collapsedSize","component","easing","in","onEnter","onEntered","onEntering","onExit","onExited","onExiting","orientation","style","timeout","TransitionComponent"],no=t=>{const{orientation:e,classes:r}=t,o={root:["root",`${e}`],entered:["entered"],hidden:["hidden"],wrapper:["wrapper",`${e}`],wrapperInner:["wrapperInner",`${e}`]};return ze(o,to,r)},oo=Te("div",{name:"MuiCollapse",slot:"Root",overridesResolver:(t,e)=>{const{ownerState:r}=t;return[e.root,e[r.orientation],r.state==="entered"&&e.entered,r.state==="exited"&&!r.in&&r.collapsedSize==="0px"&&e.hidden]}})(({theme:t,ownerState:e})=>k({height:0,overflow:"hidden",transition:t.transitions.create("height")},e.orientation==="horizontal"&&{height:"auto",width:0,transition:t.transitions.create("width")},e.state==="entered"&&k({height:"auto",overflow:"visible"},e.orientation==="horizontal"&&{width:"auto"}),e.state==="exited"&&!e.in&&e.collapsedSize==="0px"&&{visibility:"hidden"})),io=Te("div",{name:"MuiCollapse",slot:"Wrapper",overridesResolver:(t,e)=>e.wrapper})(({ownerState:t})=>k({display:"flex",width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),so=Te("div",{name:"MuiCollapse",slot:"WrapperInner",overridesResolver:(t,e)=>e.wrapperInner})(({ownerState:t})=>k({width:"100%"},t.orientation==="horizontal"&&{width:"auto",height:"100%"})),ur=f.exports.forwardRef(function(e,r){const o=xt({props:e,name:"MuiCollapse"}),{addEndListener:n,children:i,className:s,collapsedSize:c="0px",component:u,easing:d,in:g,onEnter:D,onEntered:y,onEntering:p,onExit:C,onExited:m,onExiting:v,orientation:w="vertical",style:_,timeout:b=bn.standard,TransitionComponent:B=eo}=o,L=Pe(o,ro),$=k({},o,{orientation:w,collapsedSize:c}),A=no($),ae=lr(),ce=f.exports.useRef(),q=f.exports.useRef(null),j=f.exports.useRef(),oe=typeof c=="number"?`${c}px`:c,K=w==="horizontal",W=K?"width":"height";f.exports.useEffect(()=>()=>{clearTimeout(ce.current)},[]);const V=f.exports.useRef(null),E=bt(r,V),U=I=>R=>{if(I){const J=V.current;R===void 0?I(J):I(J,R)}},N=()=>q.current?q.current[K?"clientWidth":"clientHeight"]:0,F=U((I,R)=>{q.current&&K&&(q.current.style.position="absolute"),I.style[W]=oe,D&&D(I,R)}),X=U((I,R)=>{const J=N();q.current&&K&&(q.current.style.position="");const{duration:Q,easing:H}=Ut({style:_,timeout:b,easing:d},{mode:"enter"});if(b==="auto"){const ne=ae.transitions.getAutoHeightDuration(J);I.style.transitionDuration=`${ne}ms`,j.current=ne}else I.style.transitionDuration=typeof Q=="string"?Q:`${Q}ms`;I.style[W]=`${J}px`,I.style.transitionTimingFunction=H,p&&p(I,R)}),ve=U((I,R)=>{I.style[W]="auto",y&&y(I,R)}),G=U(I=>{I.style[W]=`${N()}px`,C&&C(I)}),fe=U(m),Y=U(I=>{const R=N(),{duration:J,easing:Q}=Ut({style:_,timeout:b,easing:d},{mode:"exit"});if(b==="auto"){const H=ae.transitions.getAutoHeightDuration(R);I.style.transitionDuration=`${H}ms`,j.current=H}else I.style.transitionDuration=typeof J=="string"?J:`${J}ms`;I.style[W]=oe,I.style.transitionTimingFunction=Q,v&&v(I)});return S(B,k({in:g,onEnter:F,onEntered:ve,onEntering:X,onExit:G,onExited:fe,onExiting:Y,addEndListener:I=>{b==="auto"&&(ce.current=setTimeout(I,j.current||0)),n&&n(V.current,I)},nodeRef:V,timeout:b==="auto"?null:b},L,{children:(I,R)=>S(oo,k({as:u,className:Ye(A.root,s,{entered:A.entered,exited:!g&&oe==="0px"&&A.hidden}[I]),style:k({[K?"minWidth":"minHeight"]:oe},_),ownerState:k({},$,{state:I}),ref:E},R,{children:S(io,{ownerState:k({},$,{state:I}),className:A.wrapper,ref:q,children:S(so,{ownerState:k({},$,{state:I}),className:A.wrapperInner,children:i})})}))}))});ur.muiSupportAuto=!0;var dr=ur;const ao=f.exports.createContext({});var Tt=ao;const co=["element"];function lo(t,e){for(let r=0;r<t.length;r+=1)if(e(t[r]))return r;return-1}function uo(t,e){let r=0,o=t.length-1;for(;r<=o;){const n=Math.floor((r+o)/2);if(t[n].element===e)return n;t[n].element.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_PRECEDING?o=n-1:r=n+1}return r}const fr=f.exports.createContext({});function fo(t){const e=f.exports.useRef(null);return f.exports.useEffect(()=>{e.current=t},[t]),e.current}const Bt=()=>{};function po(t){const[,e]=f.exports.useState(),{registerDescendant:r=Bt,unregisterDescendant:o=Bt,descendants:n=[],parentId:i=null}=f.exports.useContext(fr),s=lo(n,d=>d.element===t.element),c=fo(n),u=n.some((d,g)=>c&&c[g]&&c[g].element!==d.element);return vn(()=>{if(t.element)return r(k({},t,{index:s})),()=>{o(t.element)};e({})},[r,o,s,u,t]),{parentId:i,index:s}}function pr(t){const{children:e,id:r}=t,[o,n]=f.exports.useState([]),i=f.exports.useCallback(u=>{let{element:d}=u,g=Pe(u,co);n(D=>{let y;if(D.length===0)return[k({},g,{element:d,index:0})];const p=uo(D,d);if(D[p]&&D[p].element===d)y=D;else{const C=k({},g,{element:d,index:p});y=D.slice(),y.splice(p,0,C)}return y.forEach((C,m)=>{C.index=m}),y})},[]),s=f.exports.useCallback(u=>{n(d=>d.filter(g=>u!==g.element))},[]),c=f.exports.useMemo(()=>({descendants:o,registerDescendant:i,unregisterDescendant:s,parentId:r}),[o,i,s,r]);return S(fr.Provider,{value:c,children:e})}function ho(t){const{focus:e,isExpanded:r,isExpandable:o,isFocused:n,isDisabled:i,isSelected:s,multiSelect:c,selectNode:u,selectRange:d,toggleExpansion:g}=f.exports.useContext(Tt),D=o?o(t):!1,y=r?r(t):!1,p=n?n(t):!1,C=i?i(t):!1,m=s?s(t):!1;return{disabled:C,expanded:y,selected:m,focused:p,handleExpansion:b=>{if(!C){p||e(b,t);const B=c&&(b.shiftKey||b.ctrlKey||b.metaKey);D&&!(B&&r(t))&&g(b,t)}},handleSelection:b=>{C||(p||e(b,t),c&&(b.shiftKey||b.ctrlKey||b.metaKey)?b.shiftKey?d(b,{end:t}):u(b,t,!0):u(b,t))},preventSelection:b=>{(b.shiftKey||b.ctrlKey||b.metaKey||C)&&b.preventDefault()}}}const go=["classes","className","displayIcon","expansionIcon","icon","label","nodeId","onClick","onMouseDown"],mo=f.exports.forwardRef(function(e,r){const{classes:o,className:n,displayIcon:i,expansionIcon:s,icon:c,label:u,nodeId:d,onClick:g,onMouseDown:D}=e,y=Pe(e,go),{disabled:p,expanded:C,selected:m,focused:v,handleExpansion:w,handleSelection:_,preventSelection:b}=ho(d),B=c||s||i,L=A=>{b(A),D&&D(A)},$=A=>{w(A),_(A),g&&g(A)};return le("div",k({className:Ye(n,o.root,C&&o.expanded,m&&o.selected,v&&o.focused,p&&o.disabled),onClick:$,onMouseDown:L,ref:r},y,{children:[S("div",{className:o.iconContainer,children:B}),S("div",{className:o.label,children:u})]}))});var hr=mo;function vo(t){return Dt("MuiTreeItem",t)}const yo=St("MuiTreeItem",["root","group","content","expanded","selected","focused","disabled","iconContainer","label"]);var me=yo;const Do=["children","className","collapseIcon","ContentComponent","ContentProps","endIcon","expandIcon","disabled","icon","id","label","nodeId","onClick","onMouseDown","TransitionComponent","TransitionProps"],So=t=>{const{classes:e}=t;return ze({root:["root"],content:["content"],expanded:["expanded"],selected:["selected"],focused:["focused"],disabled:["disabled"],iconContainer:["iconContainer"],label:["label"],group:["group"]},vo,e)},bo=Te("li",{name:"MuiTreeItem",slot:"Root",overridesResolver:(t,e)=>e.root})({listStyle:"none",margin:0,padding:0,outline:0}),xo=Te(hr,{name:"MuiTreeItem",slot:"Content",overridesResolver:(t,e)=>[e.content,e.iconContainer&&{[`& .${me.iconContainer}`]:e.iconContainer},e.label&&{[`& .${me.label}`]:e.label}]})(({theme:t})=>({padding:"0 8px",width:"100%",display:"flex",alignItems:"center",cursor:"pointer",WebkitTapHighlightColor:"transparent","&:hover":{backgroundColor:(t.vars||t).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${me.disabled}`]:{opacity:(t.vars||t).palette.action.disabledOpacity,backgroundColor:"transparent"},[`&.${me.focused}`]:{backgroundColor:(t.vars||t).palette.action.focus},[`&.${me.selected}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:We(t.palette.primary.main,t.palette.action.selectedOpacity),"&:hover":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.hoverOpacity}))`:We(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / ${t.vars.palette.action.selectedOpacity})`:We(t.palette.primary.main,t.palette.action.selectedOpacity)}},[`&.${me.focused}`]:{backgroundColor:t.vars?`rgba(${t.vars.palette.primary.mainChannel} / calc(${t.vars.palette.action.selectedOpacity} + ${t.vars.palette.action.focusOpacity}))`:We(t.palette.primary.main,t.palette.action.selectedOpacity+t.palette.action.focusOpacity)}},[`& .${me.iconContainer}`]:{marginRight:4,width:15,display:"flex",flexShrink:0,justifyContent:"center","& svg":{fontSize:18}},[`& .${me.label}`]:k({width:"100%",minWidth:0,paddingLeft:4,position:"relative"},t.typography.body1)})),Co=Te(dr,{name:"MuiTreeItem",slot:"Group",overridesResolver:(t,e)=>e.group})({margin:0,padding:0,marginLeft:17}),To=f.exports.forwardRef(function(e,r){const o=xt({props:e,name:"MuiTreeItem"}),{children:n,className:i,collapseIcon:s,ContentComponent:c=hr,ContentProps:u,endIcon:d,expandIcon:g,disabled:D,icon:y,id:p,label:C,nodeId:m,onClick:v,onMouseDown:w,TransitionComponent:_=dr,TransitionProps:b}=o,B=Pe(o,Do),{icons:L={},focus:$,isExpanded:A,isFocused:ae,isSelected:ce,isDisabled:q,multiSelect:j,disabledItemsFocusable:oe,mapFirstChar:K,unMapFirstChar:W,registerNode:V,unregisterNode:E,treeId:U}=f.exports.useContext(Tt);let N=null;p!=null?N=p:U&&m&&(N=`${U}-${m}`);const[F,X]=f.exports.useState(null),ve=f.exports.useRef(null),G=bt(X,r),fe=f.exports.useMemo(()=>({element:F,id:m}),[m,F]),{index:Y,parentId:pe}=po(fe),I=Boolean(Array.isArray(n)?n.length:n),R=A?A(m):!1,J=ae?ae(m):!1,Q=ce?ce(m):!1,H=q?q(m):!1,ne=k({},o,{expanded:R,focused:J,selected:Q,disabled:H}),Z=So(ne);let ye,De;I&&(R?De=s||L.defaultCollapseIcon:De=g||L.defaultExpandIcon),I?ye=L.defaultParentIcon:ye=d||L.defaultEndIcon,f.exports.useEffect(()=>{if(V&&E&&Y!==-1)return V({id:m,idAttribute:N,index:Y,parentId:pe,expandable:I,disabled:D}),()=>{E(m)}},[V,E,pe,Y,m,I,D,N]),f.exports.useEffect(()=>{if(K&&W&&C)return K(m,ve.current.textContent.substring(0,1).toLowerCase()),()=>{W(m)}},[K,W,m,C]);let Me;j?Me=Q:Q&&(Me=!0);function rt(he){he.target===he.currentTarget&&ar(he.target).getElementById(U).focus({preventScroll:!0});const ie=!oe&&H;!J&&he.currentTarget===he.target&&!ie&&$(he,m)}return le(bo,k({className:Ye(Z.root,i),role:"treeitem","aria-expanded":I?R:null,"aria-selected":Me,"aria-disabled":H||null,ref:G,id:N,tabIndex:-1},B,{ownerState:ne,onFocus:rt,children:[S(xo,k({as:c,ref:ve,classes:{root:Z.content,expanded:Z.expanded,selected:Z.selected,focused:Z.focused,disabled:Z.disabled,iconContainer:Z.iconContainer,label:Z.label},label:C,nodeId:m,onClick:v,onMouseDown:w,icon:y,expansionIcon:De,displayIcon:ye,ownerState:ne},u)),n&&S(pr,{id:m,children:S(Co,k({as:_,unmountOnExit:!0,className:Z.group,in:R,component:"ul",role:"group"},b,{children:n}))})]}))});var Io=To;function Eo(t){return Dt("MuiTreeView",t)}St("MuiTreeView",["root"]);const Oo=["children","className","defaultCollapseIcon","defaultEndIcon","defaultExpanded","defaultExpandIcon","defaultParentIcon","defaultSelected","disabledItemsFocusable","disableSelection","expanded","id","multiSelect","onBlur","onFocus","onKeyDown","onNodeFocus","onNodeSelect","onNodeToggle","selected"],wo=t=>{const{classes:e}=t;return ze({root:["root"]},Eo,e)},No=Te("ul",{name:"MuiTreeView",slot:"Root",overridesResolver:(t,e)=>e.root})({padding:0,margin:0,listStyle:"none",outline:0});function _o(t){return t&&t.length===1&&t.match(/\S/)}function jt(t,e,r){for(let o=e;o<t.length;o+=1)if(r===t[o])return o;return-1}function zt(){return!1}const Po=[],Ro=[],Mo=f.exports.forwardRef(function(e,r){const o=xt({props:e,name:"MuiTreeView"}),{children:n,className:i,defaultCollapseIcon:s,defaultEndIcon:c,defaultExpanded:u=Po,defaultExpandIcon:d,defaultParentIcon:g,defaultSelected:D=Ro,disabledItemsFocusable:y=!1,disableSelection:p=!1,expanded:C,id:m,multiSelect:v=!1,onBlur:w,onFocus:_,onKeyDown:b,onNodeFocus:B,onNodeSelect:L,onNodeToggle:$,selected:A}=o,ae=Pe(o,Oo),q=lr().direction==="rtl",j=k({},o,{defaultExpanded:u,defaultSelected:D,disabledItemsFocusable:y,disableSelection:p,multiSelect:v}),oe=wo(j),K=On(m),W=f.exports.useRef(null),V=bt(W,r),[E,U]=f.exports.useState(null),N=f.exports.useRef({}),F=f.exports.useRef({}),[X,ve]=Ft({controlled:C,default:u,name:"TreeView",state:"expanded"}),[G,fe]=Ft({controlled:A,default:D,name:"TreeView",state:"selected"}),Y=f.exports.useCallback(a=>Array.isArray(X)?X.indexOf(a)!==-1:!1,[X]),pe=f.exports.useCallback(a=>N.current[a]&&N.current[a].expandable,[]),I=f.exports.useCallback(a=>Array.isArray(G)?G.indexOf(a)!==-1:G===a,[G]),R=f.exports.useCallback(a=>{let l=N.current[a];if(!l)return!1;if(l.disabled)return!0;for(;l.parentId!=null;)if(l=N.current[l.parentId],l.disabled)return!0;return!1},[]),J=a=>E===a,Q=a=>Object.keys(N.current).map(l=>N.current[l]).filter(l=>l.parentId===a).sort((l,h)=>l.index-h.index).map(l=>l.id),H=a=>{let l=Q(a);return y||(l=l.filter(h=>!R(h))),l},ne=a=>{if(Y(a)&&H(a).length>0)return H(a)[0];let l=N.current[a];for(;l!=null;){const h=H(l.parentId),T=h[h.indexOf(l.id)+1];if(T)return T;l=N.current[l.parentId]}return null},Z=a=>{const l=N.current[a],h=H(l.parentId),T=h.indexOf(a);if(T===0)return l.parentId;let O=h[T-1];for(;Y(O)&&H(O).length>0;)O=H(O).pop();return O},ye=()=>{let a=H(null).pop();for(;Y(a);)a=H(a).pop();return a},De=()=>H(null)[0],Me=a=>N.current[a].parentId,rt=(a,l)=>{if(a===l)return[a,l];const h=N.current[a],T=N.current[l];if(h.parentId===T.id||T.parentId===h.id)return T.parentId===h.id?[h.id,T.id]:[T.id,h.id];const O=[h.id],P=[T.id];let M=h.parentId,z=T.parentId,ee=P.indexOf(M)!==-1,Le=O.indexOf(z)!==-1,Ee=!0,$e=!0;for(;!Le&&!ee;)Ee&&(O.push(M),ee=P.indexOf(M)!==-1,Ee=M!==null,!ee&&Ee&&(M=N.current[M].parentId)),$e&&!ee&&(P.push(z),Le=O.indexOf(z)!==-1,$e=z!==null,!Le&&$e&&(z=N.current[z].parentId));const Ae=ee?M:z,kt=Q(Ae),rn=O[O.indexOf(Ae)-1],nn=P[P.indexOf(Ae)-1];return kt.indexOf(rn)<kt.indexOf(nn)?[a,l]:[l,a]},he=(a,l)=>{const[h,T]=rt(a,l),O=[h];let P=h;for(;P!==T;)P=ne(P),O.push(P);return O},ie=(a,l)=>{l&&(U(l),B&&B(a,l))},Pt=(a,l)=>ie(a,ne(l)),kr=(a,l)=>ie(a,Z(l)),Lr=a=>ie(a,De()),$r=a=>ie(a,ye()),Ar=(a,l,h)=>{let T,O;const P=h.toLowerCase(),M=[],z=[];Object.keys(F.current).forEach(ee=>{const Le=F.current[ee],Ee=N.current[ee],$e=Ee.parentId?Y(Ee.parentId):!0,Ae=y?!1:R(ee);$e&&!Ae&&(M.push(ee),z.push(Le))}),T=M.indexOf(l)+1,T>=M.length&&(T=0),O=jt(z,T,P),O===-1&&(O=jt(z,0,P)),O>-1&&ie(a,M[O])},Ge=(a,l=E)=>{let h;X.indexOf(l)!==-1?h=X.filter(T=>T!==l):h=[l].concat(X),$&&$(a,h),ve(h)},Fr=(a,l)=>{const h=N.current[l],O=Q(h.parentId).filter(M=>pe(M)&&!Y(M)),P=X.concat(O);O.length>0&&(ve(P),$&&$(a,P))},ge=f.exports.useRef(null),Ie=f.exports.useRef(!1),se=f.exports.useRef([]),Hr=(a,l)=>{let h=G.slice();const{start:T,next:O,current:P}=l;!O||!P||(se.current.indexOf(P)===-1&&(se.current=[]),Ie.current?se.current.indexOf(O)!==-1?(h=h.filter(M=>M===T||M!==P),se.current=se.current.filter(M=>M===T||M!==P)):(h.push(O),se.current.push(O)):(h.push(O),se.current.push(P,O)),L&&L(a,h),fe(h))},Ur=(a,l)=>{let h=G.slice();const{start:T,end:O}=l;Ie.current&&(h=h.filter(z=>se.current.indexOf(z)===-1));let P=he(T,O);P=P.filter(z=>!R(z)),se.current=P;let M=h.concat(P);M=M.filter((z,ee)=>M.indexOf(z)===ee),L&&L(a,M),fe(M)},Br=(a,l)=>{let h;G.indexOf(l)!==-1?h=G.filter(T=>T!==l):h=[l].concat(G),L&&L(a,h),fe(h)},jr=(a,l)=>{const h=v?[l]:l;L&&L(a,h),fe(h)},ke=(a,l,h=!1)=>l?(h?Br(a,l):jr(a,l),ge.current=l,Ie.current=!1,se.current=[],!0):!1,Se=(a,l,h=!1)=>{const{start:T=ge.current,end:O,current:P}=l;h?Hr(a,{start:T,next:O,current:P}):T!=null&&O!=null&&Ur(a,{start:T,end:O}),Ie.current=!0},zr=(a,l)=>{ge.current||(ge.current=l);const h=Ie.current?ge.current:l;Se(a,{start:h,end:De()})},Vr=(a,l)=>{ge.current||(ge.current=l);const h=Ie.current?ge.current:l;Se(a,{start:h,end:ye()})},Gr=(a,l)=>{R(ne(l))||Se(a,{end:ne(l),current:l},!0)},qr=(a,l)=>{R(Z(l))||Se(a,{end:Z(l),current:l},!0)},Wr=a=>{Se(a,{start:De(),end:ye()})},Kr=f.exports.useCallback(a=>{const{id:l,index:h,parentId:T,expandable:O,idAttribute:P,disabled:M}=a;N.current[l]={id:l,index:h,parentId:T,expandable:O,idAttribute:P,disabled:M}},[]),Xr=f.exports.useCallback(a=>{const l=k({},N.current);delete l[a],N.current=l,U(h=>h===a&&W.current===ar(W.current).activeElement?Q(null)[0]:h)},[]),Yr=f.exports.useCallback((a,l)=>{F.current[a]=l},[]),Jr=f.exports.useCallback(a=>{const l=k({},F.current);delete l[a],F.current=l},[]),Rt=a=>(pe(E)&&(Y(E)?Pt(a,E):R(E)||Ge(a)),!0),Mt=a=>{if(Y(E)&&!R(E))return Ge(a,E),!0;const l=Me(E);return l?(ie(a,l),!0):!1},Qr=a=>{let l=!1;const h=a.key;if(a.altKey||a.currentTarget!==a.target||!E)return;const T=a.ctrlKey||a.metaKey;switch(h){case" ":!p&&!R(E)&&(v&&a.shiftKey?(Se(a,{end:E}),l=!0):v?l=ke(a,E,!0):l=ke(a,E)),a.stopPropagation();break;case"Enter":R(E)||(pe(E)?(Ge(a),l=!0):v?l=ke(a,E,!0):l=ke(a,E)),a.stopPropagation();break;case"ArrowDown":v&&a.shiftKey&&!p&&Gr(a,E),Pt(a,E),l=!0;break;case"ArrowUp":v&&a.shiftKey&&!p&&qr(a,E),kr(a,E),l=!0;break;case"ArrowRight":q?l=Mt(a):l=Rt(a);break;case"ArrowLeft":q?l=Rt(a):l=Mt(a);break;case"Home":v&&T&&a.shiftKey&&!p&&!R(E)&&zr(a,E),Lr(a),l=!0;break;case"End":v&&T&&a.shiftKey&&!p&&!R(E)&&Vr(a,E),$r(a),l=!0;break;default:h==="*"?(Fr(a,E),l=!0):v&&T&&h.toLowerCase()==="a"&&!p?(Wr(a),l=!0):!T&&!a.shiftKey&&_o(h)&&(Ar(a,E,h),l=!0)}l&&(a.preventDefault(),a.stopPropagation()),b&&b(a)},Zr=a=>{if(a.target===a.currentTarget){const l=Array.isArray(G)?G[0]:G;ie(a,l||H(null)[0])}_&&_(a)},en=a=>{U(null),w&&w(a)},tn=N.current[E]?N.current[E].idAttribute:null;return S(Tt.Provider,{value:{icons:{defaultCollapseIcon:s,defaultExpandIcon:d,defaultParentIcon:g,defaultEndIcon:c},focus:ie,toggleExpansion:Ge,isExpanded:Y,isExpandable:pe,isFocused:J,isSelected:I,isDisabled:R,selectNode:p?zt:ke,selectRange:p?zt:Se,multiSelect:v,disabledItemsFocusable:y,mapFirstChar:Yr,unMapFirstChar:Jr,registerNode:Kr,unregisterNode:Xr,treeId:K},children:S(pr,{children:S(No,k({role:"tree",id:K,"aria-activedescendant":tn,"aria-multiselectable":v,className:Ye(oe.root,i),ref:V,tabIndex:0,onKeyDown:Qr,onFocus:Zr,onBlur:en,ownerState:j},ae,{children:n}))})})});var ko=Mo;const gr=f.exports.createContext({dragDropManager:void 0});function te(t){return"Minified Redux error #"+t+"; visit https://redux.js.org/Errors?code="+t+" for the full message or use the non-minified dev environment for full errors. "}var Vt=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),it=function(){return Math.random().toString(36).substring(7).split("").join(".")},Gt={INIT:"@@redux/INIT"+it(),REPLACE:"@@redux/REPLACE"+it(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+it()}};function Lo(t){if(typeof t!="object"||t===null)return!1;for(var e=t;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e}function mr(t,e,r){var o;if(typeof e=="function"&&typeof r=="function"||typeof r=="function"&&typeof arguments[3]=="function")throw new Error(te(0));if(typeof e=="function"&&typeof r=="undefined"&&(r=e,e=void 0),typeof r!="undefined"){if(typeof r!="function")throw new Error(te(1));return r(mr)(t,e)}if(typeof t!="function")throw new Error(te(2));var n=t,i=e,s=[],c=s,u=!1;function d(){c===s&&(c=s.slice())}function g(){if(u)throw new Error(te(3));return i}function D(m){if(typeof m!="function")throw new Error(te(4));if(u)throw new Error(te(5));var v=!0;return d(),c.push(m),function(){if(!!v){if(u)throw new Error(te(6));v=!1,d();var _=c.indexOf(m);c.splice(_,1),s=null}}}function y(m){if(!Lo(m))throw new Error(te(7));if(typeof m.type=="undefined")throw new Error(te(8));if(u)throw new Error(te(9));try{u=!0,i=n(i,m)}finally{u=!1}for(var v=s=c,w=0;w<v.length;w++){var _=v[w];_()}return m}function p(m){if(typeof m!="function")throw new Error(te(10));n=m,y({type:Gt.REPLACE})}function C(){var m,v=D;return m={subscribe:function(_){if(typeof _!="object"||_===null)throw new Error(te(11));function b(){_.next&&_.next(g())}b();var B=v(b);return{unsubscribe:B}}},m[Vt]=function(){return this},m}return y({type:Gt.INIT}),o={dispatch:y,subscribe:D,getState:g,replaceReducer:p},o[Vt]=C,o}function x(t,e,...r){if($o()&&e===void 0)throw new Error("invariant requires an error message argument");if(!t){let o;if(e===void 0)o=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let n=0;o=new Error(e.replace(/%s/g,function(){return r[n++]})),o.name="Invariant Violation"}throw o.framesToPop=1,o}}function $o(){return typeof process!="undefined"&&process.env.NODE_ENV==="production"}function Ao(t,e,r){return e.split(".").reduce((o,n)=>o&&o[n]?o[n]:r||null,t)}function Fo(t,e){return t.filter(r=>r!==e)}function vr(t){return typeof t=="object"}function Ho(t,e){const r=new Map,o=i=>{r.set(i,r.has(i)?r.get(i)+1:1)};t.forEach(o),e.forEach(o);const n=[];return r.forEach((i,s)=>{i===1&&n.push(s)}),n}function Uo(t,e){return t.filter(r=>e.indexOf(r)>-1)}const It="dnd-core/INIT_COORDS",Je="dnd-core/BEGIN_DRAG",Et="dnd-core/PUBLISH_DRAG_SOURCE",Qe="dnd-core/HOVER",Ze="dnd-core/DROP",et="dnd-core/END_DRAG";function qt(t,e){return{type:It,payload:{sourceClientOffset:e||null,clientOffset:t||null}}}const Bo={type:It,payload:{clientOffset:null,sourceClientOffset:null}};function jo(t){return function(r=[],o={publishSource:!0}){const{publishSource:n=!0,clientOffset:i,getSourceClientOffset:s}=o,c=t.getMonitor(),u=t.getRegistry();t.dispatch(qt(i)),zo(r,c,u);const d=qo(r,c);if(d==null){t.dispatch(Bo);return}let g=null;if(i){if(!s)throw new Error("getSourceClientOffset must be defined");Vo(s),g=s(d)}t.dispatch(qt(i,g));const y=u.getSource(d).beginDrag(c,d);if(y==null)return;Go(y),u.pinSource(d);const p=u.getSourceType(d);return{type:Je,payload:{itemType:p,item:y,sourceId:d,clientOffset:i||null,sourceClientOffset:g||null,isSourcePublic:!!n}}}}function zo(t,e,r){x(!e.isDragging(),"Cannot call beginDrag while dragging."),t.forEach(function(o){x(r.getSource(o),"Expected sourceIds to be registered.")})}function Vo(t){x(typeof t=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function Go(t){x(vr(t),"Item must be an object.")}function qo(t,e){let r=null;for(let o=t.length-1;o>=0;o--)if(e.canDragSource(t[o])){r=t[o];break}return r}function Wo(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ko(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){Wo(t,n,r[n])})}return t}function Xo(t){return function(r={}){const o=t.getMonitor(),n=t.getRegistry();Yo(o),Zo(o).forEach((s,c)=>{const u=Jo(s,c,n,o),d={type:Ze,payload:{dropResult:Ko({},r,u)}};t.dispatch(d)})}}function Yo(t){x(t.isDragging(),"Cannot call drop while not dragging."),x(!t.didDrop(),"Cannot call drop twice during one drag operation.")}function Jo(t,e,r,o){const n=r.getTarget(t);let i=n?n.drop(o,t):void 0;return Qo(i),typeof i=="undefined"&&(i=e===0?{}:o.getDropResult()),i}function Qo(t){x(typeof t=="undefined"||vr(t),"Drop result must either be an object or undefined.")}function Zo(t){const e=t.getTargetIds().filter(t.canDropOnTarget,t);return e.reverse(),e}function ei(t){return function(){const r=t.getMonitor(),o=t.getRegistry();ti(r);const n=r.getSourceId();return n!=null&&(o.getSource(n,!0).endDrag(r,n),o.unpinSource()),{type:et}}}function ti(t){x(t.isDragging(),"Cannot call endDrag while not dragging.")}function ft(t,e){return e===null?t===null:Array.isArray(t)?t.some(r=>r===e):t===e}function ri(t){return function(r,{clientOffset:o}={}){ni(r);const n=r.slice(0),i=t.getMonitor(),s=t.getRegistry(),c=i.getItemType();return ii(n,s,c),oi(n,i,s),si(n,i,s),{type:Qe,payload:{targetIds:n,clientOffset:o||null}}}}function ni(t){x(Array.isArray(t),"Expected targetIds to be an array.")}function oi(t,e,r){x(e.isDragging(),"Cannot call hover while not dragging."),x(!e.didDrop(),"Cannot call hover after drop.");for(let o=0;o<t.length;o++){const n=t[o];x(t.lastIndexOf(n)===o,"Expected targetIds to be unique in the passed array.");const i=r.getTarget(n);x(i,"Expected targetIds to be registered.")}}function ii(t,e,r){for(let o=t.length-1;o>=0;o--){const n=t[o],i=e.getTargetType(n);ft(i,r)||t.splice(o,1)}}function si(t,e,r){t.forEach(function(o){r.getTarget(o).hover(e,o)})}function ai(t){return function(){if(t.getMonitor().isDragging())return{type:Et}}}function ci(t){return{beginDrag:jo(t),publishDragSource:ai(t),hover:ri(t),drop:Xo(t),endDrag:ei(t)}}class li{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:r}=this.store;function o(i){return(...s)=>{const c=i.apply(e,s);typeof c!="undefined"&&r(c)}}const n=ci(this);return Object.keys(n).reduce((i,s)=>{const c=n[s];return i[s]=o(c),i},{})}dispatch(e){this.store.dispatch(e)}constructor(e,r){this.isSetUp=!1,this.handleRefCountChange=()=>{const o=this.store.getState().refCount>0;this.backend&&(o&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!o&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=r,e.subscribe(this.handleRefCountChange)}}function ui(t,e){return{x:t.x+e.x,y:t.y+e.y}}function yr(t,e){return{x:t.x-e.x,y:t.y-e.y}}function di(t){const{clientOffset:e,initialClientOffset:r,initialSourceClientOffset:o}=t;return!e||!r||!o?null:yr(ui(e,o),r)}function fi(t){const{clientOffset:e,initialClientOffset:r}=t;return!e||!r?null:yr(e,r)}const je=[],Ot=[];je.__IS_NONE__=!0;Ot.__IS_ALL__=!0;function pi(t,e){return t===je?!1:t===Ot||typeof e=="undefined"?!0:Uo(e,t).length>0}class hi{subscribeToStateChange(e,r={}){const{handlerIds:o}=r;x(typeof e=="function","listener must be a function."),x(typeof o=="undefined"||Array.isArray(o),"handlerIds, when specified, must be an array of strings.");let n=this.store.getState().stateId;const i=()=>{const s=this.store.getState(),c=s.stateId;try{c===n||c===n+1&&!pi(s.dirtyHandlerIds,o)||e()}finally{n=c}};return this.store.subscribe(i)}subscribeToOffsetChange(e){x(typeof e=="function","listener must be a function.");let r=this.store.getState().dragOffset;const o=()=>{const n=this.store.getState().dragOffset;n!==r&&(r=n,e())};return this.store.subscribe(o)}canDragSource(e){if(!e)return!1;const r=this.registry.getSource(e);return x(r,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:r.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const r=this.registry.getTarget(e);if(x(r,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const o=this.registry.getTargetType(e),n=this.getItemType();return ft(o,n)&&r.canDrop(this,e)}isDragging(){return Boolean(this.getItemType())}isDraggingSource(e){if(!e)return!1;const r=this.registry.getSource(e,!0);if(x(r,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const o=this.registry.getSourceType(e),n=this.getItemType();return o!==n?!1:r.isDragging(this,e)}isOverTarget(e,r={shallow:!1}){if(!e)return!1;const{shallow:o}=r;if(!this.isDragging())return!1;const n=this.registry.getTargetType(e),i=this.getItemType();if(i&&!ft(n,i))return!1;const s=this.getTargetIds();if(!s.length)return!1;const c=s.indexOf(e);return o?c===s.length-1:c>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return Boolean(this.store.getState().dragOperation.isSourcePublic)}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return di(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return fi(this.store.getState().dragOffset)}constructor(e,r){this.store=e,this.registry=r}}const Wt=typeof global!="undefined"?global:self,Dr=Wt.MutationObserver||Wt.WebKitMutationObserver;function Sr(t){return function(){const r=setTimeout(n,0),o=setInterval(n,50);function n(){clearTimeout(r),clearInterval(o),t()}}}function gi(t){let e=1;const r=new Dr(t),o=document.createTextNode("");return r.observe(o,{characterData:!0}),function(){e=-e,o.data=e}}const mi=typeof Dr=="function"?gi:Sr;class vi{enqueueTask(e){const{queue:r,requestFlush:o}=this;r.length||(o(),this.flushing=!0),r[r.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const r=this.index;if(this.index++,e[r].call(),this.index>this.capacity){for(let o=0,n=e.length-this.index;o<n;o++)e[o]=e[o+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=mi(this.flush),this.requestErrorThrow=Sr(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class yi{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,r){this.onError=e,this.release=r,this.task=null}}class Di{create(e){const r=this.freeTasks,o=r.length?r.pop():new yi(this.onError,n=>r[r.length]=n);return o.task=e,o}constructor(e){this.onError=e,this.freeTasks=[]}}const br=new vi,Si=new Di(br.registerPendingError);function bi(t){br.enqueueTask(Si.create(t))}const wt="dnd-core/ADD_SOURCE",Nt="dnd-core/ADD_TARGET",_t="dnd-core/REMOVE_SOURCE",tt="dnd-core/REMOVE_TARGET";function xi(t){return{type:wt,payload:{sourceId:t}}}function Ci(t){return{type:Nt,payload:{targetId:t}}}function Ti(t){return{type:_t,payload:{sourceId:t}}}function Ii(t){return{type:tt,payload:{targetId:t}}}function Ei(t){x(typeof t.canDrag=="function","Expected canDrag to be a function."),x(typeof t.beginDrag=="function","Expected beginDrag to be a function."),x(typeof t.endDrag=="function","Expected endDrag to be a function.")}function Oi(t){x(typeof t.canDrop=="function","Expected canDrop to be a function."),x(typeof t.hover=="function","Expected hover to be a function."),x(typeof t.drop=="function","Expected beginDrag to be a function.")}function pt(t,e){if(e&&Array.isArray(t)){t.forEach(r=>pt(r,!1));return}x(typeof t=="string"||typeof t=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var re;(function(t){t.SOURCE="SOURCE",t.TARGET="TARGET"})(re||(re={}));let wi=0;function Ni(){return wi++}function _i(t){const e=Ni().toString();switch(t){case re.SOURCE:return`S${e}`;case re.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${t}`)}}function Kt(t){switch(t[0]){case"S":return re.SOURCE;case"T":return re.TARGET;default:throw new Error(`Cannot parse handler ID: ${t}`)}}function Xt(t,e){const r=t.entries();let o=!1;do{const{done:n,value:[,i]}=r.next();if(i===e)return!0;o=!!n}while(!o);return!1}class Pi{addSource(e,r){pt(e),Ei(r);const o=this.addHandler(re.SOURCE,e,r);return this.store.dispatch(xi(o)),o}addTarget(e,r){pt(e,!0),Oi(r);const o=this.addHandler(re.TARGET,e,r);return this.store.dispatch(Ci(o)),o}containsHandler(e){return Xt(this.dragSources,e)||Xt(this.dropTargets,e)}getSource(e,r=!1){return x(this.isSourceId(e),"Expected a valid source ID."),r&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return x(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return x(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return x(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return Kt(e)===re.SOURCE}isTargetId(e){return Kt(e)===re.TARGET}removeSource(e){x(this.getSource(e),"Expected an existing source."),this.store.dispatch(Ti(e)),bi(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){x(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Ii(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const r=this.getSource(e);x(r,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=r}unpinSource(){x(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,r,o){const n=_i(e);return this.types.set(n,r),e===re.SOURCE?this.dragSources.set(n,o):e===re.TARGET&&this.dropTargets.set(n,o),n}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const Ri=(t,e)=>t===e;function Mi(t,e){return!t&&!e?!0:!t||!e?!1:t.x===e.x&&t.y===e.y}function ki(t,e,r=Ri){if(t.length!==e.length)return!1;for(let o=0;o<t.length;++o)if(!r(t[o],e[o]))return!1;return!0}function Li(t=je,e){switch(e.type){case Qe:break;case wt:case Nt:case tt:case _t:return je;case Je:case Et:case et:case Ze:default:return Ot}const{targetIds:r=[],prevTargetIds:o=[]}=e.payload,n=Ho(r,o);if(!(n.length>0||!ki(r,o)))return je;const s=o[o.length-1],c=r[r.length-1];return s!==c&&(s&&n.push(s),c&&n.push(c)),n}function $i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ai(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){$i(t,n,r[n])})}return t}const Yt={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function Fi(t=Yt,e){const{payload:r}=e;switch(e.type){case It:case Je:return{initialSourceClientOffset:r.sourceClientOffset,initialClientOffset:r.clientOffset,clientOffset:r.clientOffset};case Qe:return Mi(t.clientOffset,r.clientOffset)?t:Ai({},t,{clientOffset:r.clientOffset});case et:case Ze:return Yt;default:return t}}function Hi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ne(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){Hi(t,n,r[n])})}return t}const Ui={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Bi(t=Ui,e){const{payload:r}=e;switch(e.type){case Je:return Ne({},t,{itemType:r.itemType,item:r.item,sourceId:r.sourceId,isSourcePublic:r.isSourcePublic,dropResult:null,didDrop:!1});case Et:return Ne({},t,{isSourcePublic:!0});case Qe:return Ne({},t,{targetIds:r.targetIds});case tt:return t.targetIds.indexOf(r.targetId)===-1?t:Ne({},t,{targetIds:Fo(t.targetIds,r.targetId)});case Ze:return Ne({},t,{dropResult:r.dropResult,didDrop:!0,targetIds:[]});case et:return Ne({},t,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return t}}function ji(t=0,e){switch(e.type){case wt:case Nt:return t+1;case _t:case tt:return t-1;default:return t}}function zi(t=0){return t+1}function Vi(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Gi(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){Vi(t,n,r[n])})}return t}function qi(t={},e){return{dirtyHandlerIds:Li(t.dirtyHandlerIds,{type:e.type,payload:Gi({},e.payload,{prevTargetIds:Ao(t,"dragOperation.targetIds",[])})}),dragOffset:Fi(t.dragOffset,e),refCount:ji(t.refCount,e),dragOperation:Bi(t.dragOperation,e),stateId:zi(t.stateId)}}function Wi(t,e=void 0,r={},o=!1){const n=Ki(o),i=new hi(n,new Pi(n)),s=new li(n,i),c=t(s,e,r);return s.receiveBackend(c),s}function Ki(t){const e=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION__;return mr(qi,t&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Xi(t,e){if(t==null)return{};var r=Yi(t,e),o,n;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(n=0;n<i.length;n++)o=i[n],!(e.indexOf(o)>=0)&&(!Object.prototype.propertyIsEnumerable.call(t,o)||(r[o]=t[o]))}return r}function Yi(t,e){if(t==null)return{};var r={},o=Object.keys(t),n,i;for(i=0;i<o.length;i++)n=o[i],!(e.indexOf(n)>=0)&&(r[n]=t[n]);return r}let Jt=0;const Xe=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Ji=f.exports.memo(function(e){var{children:r}=e,o=Xi(e,["children"]);const[n,i]=Qi(o);return f.exports.useEffect(()=>{if(i){const s=xr();return++Jt,()=>{--Jt===0&&(s[Xe]=null)}}},[]),S(gr.Provider,{value:n,children:r})});function Qi(t){if("manager"in t)return[{dragDropManager:t.manager},!1];const e=Zi(t.backend,t.context,t.options,t.debugMode),r=!t.context;return[e,r]}function Zi(t,e=xr(),r,o){const n=e;return n[Xe]||(n[Xe]={dragDropManager:Wi(t,e,r,o)}),n[Xe]}function xr(){return typeof global!="undefined"?global:window}var es=function t(e,r){if(e===r)return!0;if(e&&r&&typeof e=="object"&&typeof r=="object"){if(e.constructor!==r.constructor)return!1;var o,n,i;if(Array.isArray(e)){if(o=e.length,o!=r.length)return!1;for(n=o;n--!==0;)if(!t(e[n],r[n]))return!1;return!0}if(e.constructor===RegExp)return e.source===r.source&&e.flags===r.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===r.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===r.toString();if(i=Object.keys(e),o=i.length,o!==Object.keys(r).length)return!1;for(n=o;n--!==0;)if(!Object.prototype.hasOwnProperty.call(r,i[n]))return!1;for(n=o;n--!==0;){var s=i[n];if(!t(e[s],r[s]))return!1}return!0}return e!==e&&r!==r};const Ce=typeof window!="undefined"?f.exports.useLayoutEffect:f.exports.useEffect;function ts(t,e,r){const[o,n]=f.exports.useState(()=>e(t)),i=f.exports.useCallback(()=>{const s=e(t);es(o,s)||(n(s),r&&r())},[o,t,r]);return Ce(i),[o,i]}function rs(t,e,r){const[o,n]=ts(t,e,r);return Ce(function(){const s=t.getHandlerId();if(s!=null)return t.subscribeToStateChange(n,{handlerIds:[s]})},[t,n]),o}function Cr(t,e,r){return rs(e,t||(()=>({})),()=>r.reconnect())}function Tr(t,e){const r=[...e||[]];return e==null&&typeof t!="function"&&r.push(t),f.exports.useMemo(()=>typeof t=="function"?t():t,r)}function ns(t){return f.exports.useMemo(()=>t.hooks.dragSource(),[t])}function os(t){return f.exports.useMemo(()=>t.hooks.dragPreview(),[t])}let st=!1,at=!1;class is{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){x(!st,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return st=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{st=!1}}isDragging(){if(!this.sourceId)return!1;x(!at,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return at=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{at=!1}}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,r){return this.internalMonitor.isOverTarget(e,r)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let ct=!1;class ss{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,r){return this.internalMonitor.subscribeToStateChange(e,r)}canDrop(){if(!this.targetId)return!1;x(!ct,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return ct=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{ct=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function as(t,e,r){const o=r.getRegistry(),n=o.addTarget(t,e);return[n,()=>o.removeTarget(n)]}function cs(t,e,r){const o=r.getRegistry(),n=o.addSource(t,e);return[n,()=>o.removeSource(n)]}function ht(t,e,r,o){let n=r?r.call(o,t,e):void 0;if(n!==void 0)return!!n;if(t===e)return!0;if(typeof t!="object"||!t||typeof e!="object"||!e)return!1;const i=Object.keys(t),s=Object.keys(e);if(i.length!==s.length)return!1;const c=Object.prototype.hasOwnProperty.bind(e);for(let u=0;u<i.length;u++){const d=i[u];if(!c(d))return!1;const g=t[d],D=e[d];if(n=r?r.call(o,g,D,d):void 0,n===!1||n===void 0&&g!==D)return!1}return!0}function gt(t){return t!==null&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function ls(t){if(typeof t.type=="string")return;const e=t.type.displayName||t.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function us(t){return(e=null,r=null)=>{if(!f.exports.isValidElement(e)){const i=e;return t(i,r),i}const o=e;return ls(o),ds(o,r?i=>t(i,r):t)}}function Ir(t){const e={};return Object.keys(t).forEach(r=>{const o=t[r];if(r.endsWith("Ref"))e[r]=t[r];else{const n=us(o);e[r]=()=>n}}),e}function Qt(t,e){typeof t=="function"?t(e):t.current=e}function ds(t,e){const r=t.ref;return x(typeof r!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),r?f.exports.cloneElement(t,{ref:o=>{Qt(r,o),Qt(e,o)}}):f.exports.cloneElement(t,{ref:e})}class fs{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,r=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return r&&this.disconnectDragSource(),this.handlerId?e?(r&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),r):(this.lastConnectedDragSource=e,r):r}reconnectDragPreview(e=!1){const r=this.dragPreview,o=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(o&&this.disconnectDragPreview(),!!this.handlerId){if(!r){this.lastConnectedDragPreview=r;return}o&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=r,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,r,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!ht(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!ht(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=Ir({dragSource:(r,o)=>{this.clearDragSource(),this.dragSourceOptions=o||null,gt(r)?this.dragSourceRef=r:this.dragSourceNode=r,this.reconnectDragSource()},dragPreview:(r,o)=>{this.clearDragPreview(),this.dragPreviewOptions=o||null,gt(r)?this.dragPreviewRef=r:this.dragPreviewNode=r,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class ps{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const r=this.dropTarget;if(!!this.handlerId){if(!r){this.lastConnectedDropTarget=r;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=r,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,r,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!ht(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=Ir({dropTarget:(r,o)=>{this.clearDropTarget(),this.dropTargetOptions=o,gt(r)?this.dropTargetRef=r:this.dropTargetNode=r,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Re(){const{dragDropManager:t}=f.exports.useContext(gr);return x(t!=null,"Expected drag drop context"),t}function hs(t,e){const r=Re(),o=f.exports.useMemo(()=>new fs(r.getBackend()),[r]);return Ce(()=>(o.dragSourceOptions=t||null,o.reconnect(),()=>o.disconnectDragSource()),[o,t]),Ce(()=>(o.dragPreviewOptions=e||null,o.reconnect(),()=>o.disconnectDragPreview()),[o,e]),o}function gs(){const t=Re();return f.exports.useMemo(()=>new is(t),[t])}class ms{beginDrag(){const e=this.spec,r=this.monitor;let o=null;return typeof e.item=="object"?o=e.item:typeof e.item=="function"?o=e.item(r):o={},o!=null?o:null}canDrag(){const e=this.spec,r=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(r):!0}isDragging(e,r){const o=this.spec,n=this.monitor,{isDragging:i}=o;return i?i(n):r===e.getSourceId()}endDrag(){const e=this.spec,r=this.monitor,o=this.connector,{end:n}=e;n&&n(r.getItem(),r),o.reconnect()}constructor(e,r,o){this.spec=e,this.monitor=r,this.connector=o}}function vs(t,e,r){const o=f.exports.useMemo(()=>new ms(t,e,r),[e,r]);return f.exports.useEffect(()=>{o.spec=t},[t]),o}function ys(t){return f.exports.useMemo(()=>{const e=t.type;return x(e!=null,"spec.type must be defined"),e},[t])}function Ds(t,e,r){const o=Re(),n=vs(t,e,r),i=ys(t);Ce(function(){if(i!=null){const[c,u]=cs(i,n,o);return e.receiveHandlerId(c),r.receiveHandlerId(c),u}},[o,e,r,n,i])}function Ss(t,e){const r=Tr(t,e);x(!r.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const o=gs(),n=hs(r.options,r.previewOptions);return Ds(r,o,n),[Cr(r.collect,o,n),ns(n),os(n)]}function bs(t){return f.exports.useMemo(()=>t.hooks.dropTarget(),[t])}function xs(t){const e=Re(),r=f.exports.useMemo(()=>new ps(e.getBackend()),[e]);return Ce(()=>(r.dropTargetOptions=t||null,r.reconnect(),()=>r.disconnectDropTarget()),[t]),r}function Cs(){const t=Re();return f.exports.useMemo(()=>new ss(t),[t])}function Ts(t){const{accept:e}=t;return f.exports.useMemo(()=>(x(t.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class Is{canDrop(){const e=this.spec,r=this.monitor;return e.canDrop?e.canDrop(r.getItem(),r):!0}hover(){const e=this.spec,r=this.monitor;e.hover&&e.hover(r.getItem(),r)}drop(){const e=this.spec,r=this.monitor;if(e.drop)return e.drop(r.getItem(),r)}constructor(e,r){this.spec=e,this.monitor=r}}function Es(t,e){const r=f.exports.useMemo(()=>new Is(t,e),[e]);return f.exports.useEffect(()=>{r.spec=t},[t]),r}function Os(t,e,r){const o=Re(),n=Es(t,e),i=Ts(t);Ce(function(){const[c,u]=as(i,n,o);return e.receiveHandlerId(c),r.receiveHandlerId(c),u},[o,e,n,r,i.map(s=>s.toString()).join("|")])}function Zt(t,e){const r=Tr(t,e),o=Cs(),n=xs(r.options);return Os(r,o,n),[Cr(r.collect,o,n),bs(n)]}function Er(t){let e=null;return()=>(e==null&&(e=t()),e)}function ws(t,e){return t.filter(r=>r!==e)}function Ns(t,e){const r=new Set,o=i=>r.add(i);t.forEach(o),e.forEach(o);const n=[];return r.forEach(i=>n.push(i)),n}class _s{enter(e){const r=this.entered.length,o=n=>this.isNodeInDocument(n)&&(!n.contains||n.contains(e));return this.entered=Ns(this.entered.filter(o),[e]),r===0&&this.entered.length>0}leave(e){const r=this.entered.length;return this.entered=ws(this.entered.filter(this.isNodeInDocument),e),r>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class Ps{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const r={};Object.keys(this.config.exposeProperties).forEach(o=>{const n=this.config.exposeProperties[o];n!=null&&(r[o]={value:n(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,r)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,r){return r===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Or="__NATIVE_FILE__",wr="__NATIVE_URL__",Nr="__NATIVE_TEXT__",_r="__NATIVE_HTML__";var er=Object.freeze(Object.defineProperty({__proto__:null,FILE:Or,URL:wr,TEXT:Nr,HTML:_r},Symbol.toStringTag,{value:"Module"}));function lt(t,e,r){const o=e.reduce((n,i)=>n||t.getData(i),"");return o!=null?o:r}const mt={[Or]:{exposeProperties:{files:t=>Array.prototype.slice.call(t.files),items:t=>t.items,dataTransfer:t=>t},matchesTypes:["Files"]},[_r]:{exposeProperties:{html:(t,e)=>lt(t,e,""),dataTransfer:t=>t},matchesTypes:["Html","text/html"]},[wr]:{exposeProperties:{urls:(t,e)=>lt(t,e,"").split(`
`),dataTransfer:t=>t},matchesTypes:["Url","text/uri-list"]},[Nr]:{exposeProperties:{text:(t,e)=>lt(t,e,""),dataTransfer:t=>t},matchesTypes:["Text","text/plain"]}};function Rs(t,e){const r=mt[t];if(!r)throw new Error(`native type ${t} has no configuration`);const o=new Ps(r);return o.loadDataTransfer(e),o}function ut(t){if(!t)return null;const e=Array.prototype.slice.call(t.types||[]);return Object.keys(mt).filter(r=>{const o=mt[r];return o!=null&&o.matchesTypes?o.matchesTypes.some(n=>e.indexOf(n)>-1):!1})[0]||null}const Ms=Er(()=>/firefox/i.test(navigator.userAgent)),Pr=Er(()=>Boolean(window.safari));class tr{interpolate(e){const{xs:r,ys:o,c1s:n,c2s:i,c3s:s}=this;let c=r.length-1;if(e===r[c])return o[c];let u=0,d=s.length-1,g;for(;u<=d;){g=Math.floor(.5*(u+d));const p=r[g];if(p<e)u=g+1;else if(p>e)d=g-1;else return o[g]}c=Math.max(0,d);const D=e-r[c],y=D*D;return o[c]+n[c]*D+i[c]*y+s[c]*D*y}constructor(e,r){const{length:o}=e,n=[];for(let p=0;p<o;p++)n.push(p);n.sort((p,C)=>e[p]<e[C]?-1:1);const i=[],s=[];let c,u;for(let p=0;p<o-1;p++)c=e[p+1]-e[p],u=r[p+1]-r[p],i.push(c),s.push(u/c);const d=[s[0]];for(let p=0;p<i.length-1;p++){const C=s[p],m=s[p+1];if(C*m<=0)d.push(0);else{c=i[p];const v=i[p+1],w=c+v;d.push(3*w/((w+v)/C+(w+c)/m))}}d.push(s[s.length-1]);const g=[],D=[];let y;for(let p=0;p<d.length-1;p++){y=s[p];const C=d[p],m=1/i[p],v=C+d[p+1]-y-y;g.push((y-C-v)*m),D.push(v*m*m)}this.xs=e,this.ys=r,this.c1s=d,this.c2s=g,this.c3s=D}}const ks=1;function Rr(t){const e=t.nodeType===ks?t:t.parentElement;if(!e)return null;const{top:r,left:o}=e.getBoundingClientRect();return{x:o,y:r}}function Ke(t){return{x:t.clientX,y:t.clientY}}function Ls(t){var e;return t.nodeName==="IMG"&&(Ms()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(t)))}function $s(t,e,r,o){let n=t?e.width:r,i=t?e.height:o;return Pr()&&t&&(i/=window.devicePixelRatio,n/=window.devicePixelRatio),{dragPreviewWidth:n,dragPreviewHeight:i}}function As(t,e,r,o,n){const i=Ls(e),c=Rr(i?t:e),u={x:r.x-c.x,y:r.y-c.y},{offsetWidth:d,offsetHeight:g}=t,{anchorX:D,anchorY:y}=o,{dragPreviewWidth:p,dragPreviewHeight:C}=$s(i,e,d,g),m=()=>{let $=new tr([0,.5,1],[u.y,u.y/g*C,u.y+C-g]).interpolate(y);return Pr()&&i&&($+=(window.devicePixelRatio-1)*C),$},v=()=>new tr([0,.5,1],[u.x,u.x/d*p,u.x+p-d]).interpolate(D),{offsetX:w,offsetY:_}=n,b=w===0||w,B=_===0||_;return{x:b?w:v(),y:B?_:m()}}class Fs{get window(){if(this.globalContext)return this.globalContext;if(typeof window!="undefined")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,r){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=r}}function Hs(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function rr(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{},o=Object.keys(r);typeof Object.getOwnPropertySymbols=="function"&&(o=o.concat(Object.getOwnPropertySymbols(r).filter(function(n){return Object.getOwnPropertyDescriptor(r,n).enumerable}))),o.forEach(function(n){Hs(t,n,r[n])})}return t}class Us{profile(){var e,r;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((r=this.dragOverTargetIds)===null||r===void 0?void 0:r.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var r;(r=this.window)===null||r===void 0||r.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,r,o){return this.sourcePreviewNodeOptions.set(e,o),this.sourcePreviewNodes.set(e,r),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,r,o){this.sourceNodes.set(e,r),this.sourceNodeOptions.set(e,o);const n=s=>this.handleDragStart(s,e),i=s=>this.handleSelectStart(s);return r.setAttribute("draggable","true"),r.addEventListener("dragstart",n),r.addEventListener("selectstart",i),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),r.removeEventListener("dragstart",n),r.removeEventListener("selectstart",i),r.setAttribute("draggable","false")}}connectDropTarget(e,r){const o=s=>this.handleDragEnter(s,e),n=s=>this.handleDragOver(s,e),i=s=>this.handleDrop(s,e);return r.addEventListener("dragenter",o),r.addEventListener("dragover",n),r.addEventListener("drop",i),()=>{r.removeEventListener("dragenter",o),r.removeEventListener("dragover",n),r.removeEventListener("drop",i)}}addEventListeners(e){!e.addEventListener||(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){!e.removeEventListener||(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourceNodeOptions.get(e);return rr({dropEffect:this.altKeyPressed?"copy":"move"},r||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),r=this.sourcePreviewNodeOptions.get(e);return rr({anchorX:.5,anchorY:.5,captureDraggingState:!1},r||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(er).some(r=>er[r]===e)}beginDragNativeItem(e,r){this.clearCurrentDragSourceNode(),this.currentNativeSource=Rs(e,r),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const r=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var o;return(o=this.rootElement)===null||o===void 0?void 0:o.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},r)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,r){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(r))}handleDragEnter(e,r){this.dragEnterTargetIds.unshift(r)}handleDragOver(e,r){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(r)}handleDrop(e,r){this.dropTargetIds.unshift(r)}constructor(e,r,o){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=n=>{const i=this.sourceNodes.get(n);return i&&Rr(i)||null},this.endDragNativeItem=()=>{!this.isDraggingNativeItem()||(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=n=>Boolean(n&&this.document&&this.document.body&&this.document.body.contains(n)),this.endDragIfSourceWasRemovedFromDOM=()=>{const n=this.currentDragSourceNode;n==null||this.isNodeInDocument(n)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=n=>{this.hoverRafId===null&&typeof requestAnimationFrame!="undefined"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(n||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame!="undefined"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=n=>{if(n.defaultPrevented)return;const{dragStartSourceIds:i}=this;this.dragStartSourceIds=null;const s=Ke(n);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(i||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:s});const{dataTransfer:c}=n,u=ut(c);if(this.monitor.isDragging()){if(c&&typeof c.setDragImage=="function"){const g=this.monitor.getSourceId(),D=this.sourceNodes.get(g),y=this.sourcePreviewNodes.get(g)||D;if(y){const{anchorX:p,anchorY:C,offsetX:m,offsetY:v}=this.getCurrentSourcePreviewNodeOptions(),b=As(D,y,s,{anchorX:p,anchorY:C},{offsetX:m,offsetY:v});c.setDragImage(y,b.x,b.y)}}try{c==null||c.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(n.target);const{captureDraggingState:d}=this.getCurrentSourcePreviewNodeOptions();d?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(u)this.beginDragNativeItem(u);else{if(c&&!c.types&&(n.target&&!n.target.hasAttribute||!n.target.hasAttribute("draggable")))return;n.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=n=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}if(!this.enterLeaveCounter.enter(n.target)||this.monitor.isDragging())return;const{dataTransfer:c}=n,u=ut(c);u&&this.beginDragNativeItem(u,c)},this.handleTopDragEnter=n=>{const{dragEnterTargetIds:i}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=n.altKey,i.length>0&&this.actions.hover(i,{clientOffset:Ke(n)}),i.some(c=>this.monitor.canDropOnTarget(c))&&(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=n=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var i;(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}},this.handleTopDragOver=n=>{const{dragOverTargetIds:i}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none");return}this.altKeyPressed=n.altKey,this.lastClientOffset=Ke(n),this.scheduleHover(i),(i||[]).some(c=>this.monitor.canDropOnTarget(c))?(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?n.preventDefault():(n.preventDefault(),n.dataTransfer&&(n.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=n=>{this.isDraggingNativeItem()&&n.preventDefault(),this.enterLeaveCounter.leave(n.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=n=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var i;n.preventDefault(),(i=this.currentNativeSource)===null||i===void 0||i.loadDataTransfer(n.dataTransfer)}else ut(n.dataTransfer)&&n.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=n=>{const{dropTargetIds:i}=this;this.dropTargetIds=[],this.actions.hover(i,{clientOffset:Ke(n)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=n=>{const i=n.target;typeof i.dragDrop=="function"&&(i.tagName==="INPUT"||i.tagName==="SELECT"||i.tagName==="TEXTAREA"||i.isContentEditable||(n.preventDefault(),i.dragDrop()))},this.options=new Fs(r,o),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new _s(this.isNodeInDocument)}}const Bs=function(e,r,o){return new Us(e,r,o)};class js extends f.exports.Component{constructor(e){super(e),this.state={snackbar_open:!1,status:!1}}render(){return S(f.exports.Fragment,{children:S(fn,{title:"\u4FDD\u5B58",children:S(Tn,{size:"small",onClick:()=>this.props.save_func(),children:S(In,{fontSize:"small",color:"primary"})})})})}}function Mr(t,e){return e.secret?!0:e.father_id>0?Mr(t,t.id2node(e.father_id)):!1}class zs extends f.exports.Component{constructor(r){super(r);Fe(this,"raw_nodetree");this.state={nodetree:new Ct([]),expanded:[]}}async componentDidMount(){let r=[];He.shallow?r=await nt.get.shallowtree(He.node_id):r=await nt.get.nodetree(He.node_id),this.setState({nodetree:this.state.nodetree.update_rawinfo(r,He.node_id),expanded:Object.values(r).map(o=>o[1])}),this.raw_nodetree=r}move_node(r,o,n){let i=this.state.nodetree.deepcopy(),s=r.idx_in_father,c=i.id2node(r.father_id);o=i.id2node(o.my_id),r=i.id2node(r.my_id),c.my_id==o.my_id&&s<n&&n--;let u=c.sons;c.sons=[...u.slice(0,s),...u.slice(s+1,u.length)];let d=o.sons;o.sons=[...d.slice(0,n),r,...d.slice(n,d.length)],r.father_id=o.my_id,this.setState({nodetree:i})}DroppableSpace(r){let o=this,n=r.node,i=r.expect_idx,s=this.state.nodetree;const[{is_over_can_drop:c},u]=Zt(()=>({accept:"treeitem",drop:(d,g)=>{!g.isOver({shallow:!0})||o.move_node(d,n,i)},collect:d=>({is_over_can_drop:d.isOver({shallow:!0})&&d.canDrop()}),canDrop:d=>n.my_id!=d.my_id&&!s.is_son(d.my_id,n.my_id)}));return S(Oe,{ref:u,sx:{border:c?"1px dashed grey":"0",height:"6px"}})}DragableTreeItem(r){let o=this,n=r.node,i=n.my_id,s=n.father_id,c=r.idx_in_father,u=this.state.nodetree,d=this.DroppableSpace.bind(this),g=Mr(this.state.nodetree,n);const[{is_dragging:D},y]=Ss(()=>({type:"treeitem",item:{...n,idx_in_father:c},collect:v=>({is_dragging:v.isDragging()})})),[{is_over:p,can_drop:C},m]=Zt(()=>({accept:"treeitem",drop:(v,w)=>{!w.isOver({shallow:!0})||v.my_id!=n.my_id&&o.move_node(v,n,n.sons.length)},collect:v=>({is_over:v.isOver({shallow:!0}),can_drop:v.canDrop()}),canDrop:v=>n.my_id==v.my_id||!u.is_son(v.my_id,n.my_id)}));return le(Oe,{ref:m,sx:{border:p&&C?"1px dashed grey":"0"},children:[S(d,{node:u.id2node(s),expect_idx:c}),le(Io,{label:S(Oe,{color:g?"text.secondary":"text.primary",children:le(cn,{force_direction:"row",children:[le(yn,{sx:{marginY:"auto"},children:["[",i,"] ",S(ln,{node_id:i})]}),S(Wn,{onClick:v=>{v.stopPropagation()},defaultChecked:n.secret,onChange:v=>{let w=this.state.nodetree.deepcopy();w.id2node(i).secret=v.target.checked,this.setState({nodetree:w})}}),S(Dn,{href:un(`/edit/content/${i}`),children:"\u7F16\u8F91"})]})}),nodeId:`${i}`,ref:y,onFocusCapture:v=>v.stopPropagation(),sx:{cursor:"move",opacity:D?.5:1},children:[r.children,S(d,{node:n,expect_idx:n.sons.length})]})]})}get_subtree(r){let o=this,n=this.DragableTreeItem.bind(this);return S(dn,{children:Object.values(r.sons).map((i,s)=>S(n,{node:i,idx_in_father:s,children:o.get_subtree(i)},`${s}`))})}async save_nodetree(){let o=this.raw_nodetree.reduce((u,d)=>{let[g,D,y,p]=d;return u[g]=[D,y,p],u},{}),n=this.state.nodetree.get_raw(),i=[];for(let[u,d,g,D]of n){let y=[d,g,D];JSON.stringify(y)!=JSON.stringify(o[u])&&i.push([u,d,g,D])}console.log(i.length);let s=!0,c=50;for(let u=0;u<i.length;u+=c)s=s&&await nt.post.nodetree({nodetree:i.slice(u,u+c)},He.node_id),console.log(`${u} / ${i.length}`),console.log(s);return s}render(){let r=this,o=this.state.nodetree;return le(Oe,{sx:{position:"absolute",top:"2%",left:"2%",height:"96%",width:"96%",display:"flex"},children:[S(Oe,{sx:{marginRight:"1%"},children:S(js,{save_func:r.save_nodetree.bind(r)})}),le(Oe,{sx:{position:"relative",width:"100%",flex:1},children:[S(Lt,{}),S(Ji,{backend:Bs,children:S(ko,{expanded:Object.values(r.state.expanded).map(n=>`${n}`),onNodeToggle:(n,i)=>{r.setState({expanded:i})},defaultCollapseIcon:S(Qn,{}),defaultExpandIcon:S(Jn,{}),children:r.get_subtree(o.get_root())})}),S(Lt,{})]})]})}}Ue.render(S(zs,{}),document.getElementById("root"));
