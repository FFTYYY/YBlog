<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Vite App</title>
		
	</head>
	<body>
		<div id = "root" class = "mathjax_ignore"></div>
		
		<!-- <script type="module" src="/convert/main.tsx"></script> -->

		<!-- <script type="module" src="/templates/articlezone/article_editor/main.tsx"></script> -->
		<script type="module" src="/templates/articlezone/article_viewer/main.tsx"></script>
		<!-- <script type="module" src="/templates/articlezone/special/casket_of_star/main.tsx"></script> -->
		<!-- <script type="module" src="/templates/articlezone/nodetree/main.tsx"></script> -->
		<!-- <script type="module" src="/templates/articlezone/pure_printer/main.tsx"></script> -->
	</body>

	<div style="display:none;" id="_data_node_id">1293</div>
	<div style="display:none;" id="_data_csrf">xxx</div>
	<div style="display:none;" id="_data_logged_in">true</div>
	<div style="display:none;" id="_data_linkto">168510037</div>
	<div style="display:none;" id="_data_shallow">true</div>

	<script>
		const old_console_error = console.error
		console.error = (msg, ...args) => { // filter out react warnings
			if(msg.startsWith(`Warning: Each child in a list should have a unique "key" prop.`)){
				return undefined
			}
			return old_console_error(msg, ...args)
		}
	</script>

	<script>
		// 向父节点发送信息。
		window.addEventListener("message" , (e)=>{
			if(e.data.verification != "showchildren" || e.data.son_id == undefined){
				return
			}

			let height_provider = document.getElementsByClassName("heightProvider")
			if(height_provider.length <= 0){
				return 
			}
			height_provider = height_provider[0]

			let my_height = -1
			setInterval(()=>{ // 监听高度变化
				if(my_height != height_provider.scrollHeight){
					my_height = height_provider.scrollHeight
					parent.postMessage({ // 向父节点发送消息
						verification: "showchildren" , 
						son_id: e.data.son_id , 
						height: my_height , 
					} , "*")
				}
			} , 200)
		})

	</script>

</html>
